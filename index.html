<!DOCTYPE html>
<html lang="en">
<head>
             <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7LWHSBNXT5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7LWHSBNXT5');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover trendy Events easily | Upcoming Events in Kathmandu | Khojum.com</title>
    <meta name="description" content="Nepal's top event discovery platform. Browse upcoming concerts, cultural festivals, art exhibitions, and entertainment in Kathmandu and beyond. Plan your perfect outing with Khojum.">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/home/raman/Downloads/khojum-master/assets/logo/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/home/raman/Downloads/khojum-master/assets/logo/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/home/raman/Downloads/khojum-master/assets/logo/favicon-16x16.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?fami~ly=Mukta:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,500;0,700;1,500&display=swap" rel="stylesheet">
    <style>
        :root {
            --nepal-red: #dc143c;
            --nepal-blue: #003893;
            --accent-yellow: #f9d949;
            --dark-text: #333333;
            --light-text: #666666;
            --lightest-bg: #f9f7f5;
            --card-bg: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Mukta', sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background-color: var(--lightest-bg);
            padding: 0;
            margin: 0;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: var(--nepal-red);
            color: white;
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 25L70 45L50 65L30 45L50 25Z' fill='rgba(255,255,255,0.05)'/%3E%3C/svg%3E");
            background-size: 100px;
            opacity: 0.2;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .logo a {
            text-decoration: none;
            color: inherit;
        }
        
        .logo h1 {
            font-family: 'Mukta', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
        }
        
        .logo span {
            color: var(--accent-yellow);
        }
        
        .logo img {
            width: 50px;
            height: auto;
        }
        
        .title-section {
            text-align: center;
            padding-bottom: 30px;
        }
        
        .title-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            line-height: 1.2;
        }
        
        .title-section p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .date-display {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1.3rem;
            font-weight: 500;
            margin-top: 10px;
            display: block;
        }
        
        .filter-bar {
            background-color: white;
            padding: 15px 0;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 40px;
            position: relative;
            z-index: 10;
        }
        
        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .filter-button {
            background-color: transparent;
            border: 1px solid var(--nepal-red);
            color: var(--nepal-red);
            padding: 8px 16px;
            border-radius: 100px;
            font-family: 'Mukta', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-button:hover, .filter-button.active {
            background-color: var(--nepal-red);
            color: white;
        }
        
        .sort-dropdown {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        
        .sort-dropdown select {
            padding: 8px 16px;
            border: 1px solid var(--nepal-red);
            border-radius: 100px;
            background-color: transparent;
            color: var(--nepal-red);
            font-family: 'Mukta', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 25px;
            padding-bottom: 60px;
        }
        
        @media (min-width: 768px) {
            .events-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .events-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .event-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .event-image {
            height: 180px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .event-category {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--nepal-red);
            color: white;
            padding: 5px 12px;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .event-content {
            padding: 20px;
        }
        
        .event-title {
            font-family: 'Mukta', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark-text);
            line-height: 1.3;
        }
        
        .event-meta {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .event-date, .event-time, .event-location, .event-price {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--light-text);
        }
        
        .event-meta i {
            color: var(--nepal-red);
            font-size: 1rem;
        }
        
        .event-description {
            font-size: 0.95rem;
            color: var(--light-text);
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .event-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: nowrap;
            margin-top: 10px;
        }
        
        .event-price-tag {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--nepal-blue);
            flex: 1;
            min-width: 100px;
        }
        
        .event-price-tag.free {
            color: #2ecc71;
        }
        
        .event-button {
            background-color: var(--nepal-red);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 100px;
            font-family: 'Mukta', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
            margin-left: 10px;
        }
        
        .event-button:hover {
            background-color: #b01030;
        }
        
        footer {
            background-color: var(--nepal-red);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        
        .logo-small {
            font-family: 'Mukta', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .logo-small span {
            color: var(--accent-yellow);
        }
        
        .copyright {
            opacity: 0.8;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 40px 0;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0,0,0,0.1);
            border-left: 4px solid var(--nepal-red);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .title-section h2 {
                font-size: 2.2rem;
            }
            
            .filter-buttons {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 5px;
            }
        }
        
        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
        }
        
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        
        .countdown {
            display: inline-block;
            padding: 10px 15px;
            border: 1px solid var(--nepal-red);
            border-radius: 5px;
            background-color: white;
            color: var(--nepal-red);
            font-weight: bold;
            text-align: center;
            cursor: pointer;
        }
        
        .expired {
            color: red;
        }

        .sprinkle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            opacity: 1;
        }

        .event-time-counter {
            margin-right: 10px;
            font-weight: bold;
            padding: 5px;
            border-radius: 8px;
            background-color: white;
            border: 2px solid var(--nepal-red);
            color: #aa2121;
        }
        .event-time-counter.upcoming {
            background-color: hwb(0 100% 0%);
            color: #dc143c;
        }
        .event-time-counter.happening {
            background-color: #e6ffe6;
            color: #006600;
        }
        .event-time-counter.expired {
            background-color: #ffe6e6;
            color: #cc0000;
        }

        .animated-holi-button {
            position: fixed; /* Fix the position */
            top: 20px; /* Distance from the top */
            right: 20px; /* Distance from the right */
            background-image: linear-gradient(45deg, #FF4136, #FF6B6B, #FFD700, #4ECDC4, #9D4EDD); /* Colorful gradient */
            color: white; /* Text color */
            padding: 8px 15px; /* Reduced padding for a smaller button */
            border: none; /* No border */
            border-radius: 5px; /* Rounded corners */
            font-size: 0.9rem; /* Reduced font size */
            font-weight: bold; /* Bold text */
            text-decoration: none; /* No underline */
            transition: transform 0.2s ease, background-color 0.2s ease; /* Shortened animation duration */
            z-index: 1000; /* Ensure it stays on top */
            animation: pulse 1.5s infinite; /* Add pulse animation */
        }

        .animated-holi-button:hover {
            transform: scale(1.03); /* Slightly scale up on hover */
            background-image: linear-gradient(45deg, #FFD700, #FF6B6B, #4ECDC4, #9D4EDD, #FF4136); /* Change gradient on hover */
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05); /* Scale up */
            }
            100% {
                transform: scale(1); /* Scale back */
            }
        }

        #days-left {
            display: none; /* Hide the element */
        }

        .days-left-message {
            margin-left: 10px; /* Space between button and countdown message */
            font-size: 0.9rem; /* Font size */
            color: #333; /* Color to match your theme */
            font-weight: bold; /* Make it bold */
        }

        /* Media Queries for Mobile Responsiveness */
        @media (max-width: 768px) {
            .animated-holi-button {
                font-size: 0.8rem; /* Smaller font size for mobile */
                padding: 6px 12px; /* Smaller padding for mobile */
                top: 10px; /* Adjust position for mobile */
                right: 10px; /* Adjust position for mobile */
            }

            .days-left-message, .time-left-message {
                font-size: 0.8rem; /* Smaller font size for mobile */
            }
        }

        .support-message {
            font-size: 1rem; /* Increased font size for better visibility */
            color:  #ffcc00; /* Changed color for better contrast */
            margin-top: 4px; /* Add some space above */
            text-align: center; 
            margin-left: 10px;/* Center the text */
        }

        .email-link {
            color: #ffcc00; /* Updated link color */
            font-weight: bold; /* Make the link bold */
            text-decoration: underline; /* Underline the link for emphasis */
        }

        .email-link:hover {
            color: #3fc909; /* Change color on hover for visibility */
        }

        .calendar-icon {
            position: absolute;
            top: 60px;
            right: 20px;
            width: 40px;
            height: 40px;
            background-color: #efbf04;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
            z-index: 1000;
        }
        
        .calendar-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }
        
        .calendar-icon svg {
            width: 24px;
            height: 24px;
            fill: rgb(245, 230, 230);
        }

        .calendar-popup {
            position: absolute;
            top: 150px;
            right: 20px;
            width: 300px;
            background-color: rgb(253, 253, 253);
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            overflow: hidden;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: opacity 0.3s, transform 0.3s, visibility 0.3s;
            z-index: 1000;
        }
        
        .calendar-popup.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background-color: #83a83e;
            color: white;
        }
        
        .month-year {
            font-weight: 700;
            font-size: 22px;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .nav-btn {
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            color: white;
            transition: background-color 0.2s;
        }
        
        .nav-btn:hover {
            background-color: rgba(255,255,255,0.2);
        }
        
        /* Calendar Toggle Styles */
        .calendar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 46px;
            height: 24px;
            margin-right: 8px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #272020;
            transition: .4s;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
        }
        
        input:checked + .slider {
            background-color: #4a6fa5;
        }
        
        input:checked + .slider:before {
            transform: translateX(22px);
        }
        
        .slider.round {
            border-radius: 24px;
        }
        
        .slider.round:before {
            border-radius: 50%;
        }
        
        .toggle-label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }
        
        .calendar-grid {
            padding: 10px;
        }
        
        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: 600;
            color: #666;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            text-align: center;
        }
        
        .day {
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            font-size: 14px;
            color: #333;
            transition: background-color 0.2s;
        }
        
        .day.event:after {
            content: '';
            position: absolute;
            bottom: 6px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background-color: #e74c3c;
            border-radius: 50%;
        }
        
        .day:not(.inactive):hover {
            background-color: #f0f0f0;
        }
        
        .day.today {
            background-color: #e7f0f9;
            font-weight: bold;
        }
        
        .day.selected {
            background-color: #3e5e04;
            color: rgb(138, 126, 126);
            font-weight: bold;
        }
        
        .day.inactive {
            color: #ccc;
            cursor: default;
        }
        
        .events-panel {
            background-color: #f9f9f9;
            border-top: 1px solid #eee;
            padding: 10px 16px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .event-date {
            font-weight: 600;
            color: #4a6fa5;
            margin-bottom: 4px;
            font-size: 14px;
        }
        
        .event-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .event-item {
            padding: 6px 0;
            border-bottom: 1px solid #eee;
            color: #333;
            font-size: 14px;
        }
        
        .event-item:last-child {
            border-bottom: none;
        }
        
        .no-events {
            color: #999;
            font-style: italic;
            font-size: 14px;
        }

        .nepali-date {
            font-size: 12px;
            color: #880e0e;
            margin-top: 3px;
        }
        .archived-events-icon {
            position: bottom; /* Changed to fixed for consistent positioning */
            bottom: 20px; /* Adjusted for desired position */
            right: 20px; /* Adjusted for desired position */
            background-color: var(--nepal-red); /* Background color */
            color: white; /* Text color */
            padding: 10px 15px; /* Padding */
            font-weight: bold;
            border-radius: 5px; /* Rounded corners */
            text-decoration: none; /* Remove underline */
            display: flex; /* Flexbox for alignment */
            align-items: center; /* Center items vertically */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* Shadow for depth */
            transition: background-color 0.3s; /* Smooth background color transition */
            z-index: 1000; /* Ensure it stays on top */
        }

        .archived-events-icon:hover {
            background-color: #b01030; /* Darker shade on hover */
        }
        @media (max-width: 768px) {
  #fixedButton {
    top: 5px; /* Adjusted position for smaller screens */
    right: 5px; /* Adjusted position for smaller screens */
  }
}


        .icon-box {
            display: flex; /* Flexbox for icon and text */
            align-items: center; /* Center items vertically */
        }

        .icon-box i {
            margin-right: 7px; /* Space between icon and text */
        }
        .twitter-link {
    font-size: 1.1rem; /* Increase font size */
    color: #0a0a0a; /* Twitter blue color */
    text-decoration: none; /* Remove underline */
    transition: color 0.3s; /* Smooth color transition */
}

.twitter-link:hover {
    color: #0d8bdb; /* Darker blue on hover */
}

.twitter-link i {
    font-size: 1.3rem; /* Increase icon size */
    margin-right: 5px; 
    margin-top: 20px;/* Space between icon and text */
}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Khojum",
        "url": "https://www.khojum.com",
        "logo": "https://www.khojum.com/assets/favicon.ico" 
    
        
    }
    </script>
</head>
<body>
    <div class="fixed-button-container">
        <a href="holi.html" class="animated-holi-button" id="holi-button">
            Holi Events!
        </a>
        <span id="days-left" class="days-left-message"></span> <!-- Countdown message outside the button -->
    </div>

    <header>
        <div class="container">
            <div class="logo">
                <h1 id="khojum-logo"><span>‡§ñ‡•ã</span>‡§ú‡•Å‡§Æ</h1>
            </div>
            <div class="title-section">
                <h2>What are you doing this Week?</h2>
                <p>Discover the best events happening in Nepal this Week.</p>
                <span class="date-display" id="date-range">Date: March 13</span>
            </div>
        </div>
    </header>
    
    <div class="filter-bar" id="filterBar">
        <div class="container">
            <div class="filter-buttons">
                <button class="filter-button active" data-filter="all">All Events</button>
                <button class="filter-button" data-filter="Free">Free</button>
                <button class="filter-button" data-filter="holi" id="filter-button">Holi</button>
                <button class="filter-button" data-filter="music">Music</button>
                <button class="filter-button" data-filter="arts">Arts</button>
                <button class="filter-button" data-filter="business">Offers</button>
                <button class="filter-button" data-filter="sports">Sports</button>
            </div>
            <div class="sort-dropdown">
                <select id="sort-options">
                    <option value="time">Sort by Time</option>
                    <option value="popularity">Sort by Popularity</option>
                    <option value="price">Sort by Price</option>
                </select>
            </div>
        </div>
    </div>
   
    
    <main class="container">
        <div class="events-grid" id="events-container">
            <!-- Events will be dynamically populated here -->
        </div>
        
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>Loading more events...</p>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="logo-small">
                <span>‡§ñ‡•ã</span>‡§ú‡•Å‡§Æ
            </div>
  
           
            <p class="support-message">
                We value your feedback! <br>
                Help us grow or share your thoughts and suggestions at 
                <a href="mailto:ceo@khojum.com?subject=Feedback%20for%20Khojum" class="email-link">ceo@khojum.com</a>
            </p>
        </p> 
        <a href="https://x.com/ramanLogy" target="_blank" title="X" class="twitter-link">
            <i class="fab fa-twitter"></i> Twitter ( ùïè )
        </a>
        <p class="copyright">&copy; 2025 Khojum. All rights reserved.</p>
            <!-- Moved Archived Events Icon to Footer -->
            <div class="icon-box">
                <a href="expired.html" class="archived-events-icon" title="Archived Events">
                    <i class="fa fa-archive"></i> <!-- Font Awesome down arrow icon -->
                    <span>Archived Events</span>
                </a>
            </div>
            <!-- End of Archived Events Icon -->
        </div>
    </footer>

    <!-- Modal Structure -->
    <div id="event-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-summary"></p>
            <h3>Attendees:</h3>
            <ul id="modal-attendees"></ul>
            <h3>Special Highlights:</h3>
            <ul id="modal-highlights"></ul>
        </div>
    </div>

    <!-- Calendar Icon -->
    <div class="calendar-icon" id="calendarIcon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM7 12h5v5H7z" fill="white"/>
        </svg>
    </div>

    <!-- Calendar Popup -->
    <div class="calendar-popup" id="calendarPopup">
        <div class="calendar-header">
            <div class="month-year" id="monthYear">March 2025</div>
            <div class="nav-buttons">
                <button class="nav-btn" id="prevMonth">
                    <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" fill="currentColor"/>
                    </svg>
                </button>
                <button class="nav-btn" id="nextMonth">
                    <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Calendar Toggle -->
        <div class="calendar-toggle">
            <label class="switch">
                <input type="checkbox" id="calendarTypeToggle">
                <span class="slider round"></span>
            </label>
            <span class="toggle-label" id="calendarTypeLabel">English</span>
        </div>
        
        <div class="calendar-grid">
            <div class="weekdays" id="calendarWeekdays">
                <div>Su</div>
                <div>Mo</div>
                <div>Tu</div>
                <div>We</div>
                <div>Th</div>
                <div>Fr</div>
                <div>Sa</div>
            </div>
            <div class="days" id="calendarDays">
                <!-- Days will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="events-panel" id="eventsPanel">
            <div class="event-date">No date selected</div>
            <div class="no-events">No events for this day</div>
        </div>
    </div>

    <script>
        // Set the date range for "this week"
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const dayOfWeek = now.getDay();
            const startDate = new Date(now);
            startDate.setDate(now.getDate() - dayOfWeek); // Sunday
            
            const endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + 6); // Saturday
            
            const options = { month: 'long', day: 'numeric' };
            const dateRange = `${startDate.toLocaleDateString('en-US', options)} - ${endDate.toLocaleDateString('en-US', options)}, ${endDate.getFullYear()}`;
            
            document.getElementById('date-range').textContent = dateRange;
            
            // Load events
            loadEvents();
            
            // Set default sorting by time when the page loads
            sortEvents('time');
            
            // Set up filter buttons
            const filterButtons = document.querySelectorAll('.filter-button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Filter events
                    const filter = this.getAttribute('data-filter');
                    filterEvents(filter);

                    // Check if the clicked button is the "Holi" button
                    if (filter === 'holi') {
                        createSprinkles(event);
                    }
                });
            });

            // Set up sort dropdown
            const sortDropdown = document.getElementById('sort-options');
            sortDropdown.addEventListener('change', function() {
                const sortCriteria = this.value;
                sortEvents(sortCriteria);
            });
        });
        
        // Sample business data
        const businesses = [
            {
                id: 1,
                title: "DJ Alok Live in Nepal",
                description: "DJ Alok takes the stage for a live performance, bringing hits like 'Hear Me Now' and 'Piece of Your Heart' to the crowd. This event marks his first performance in Nepal.",
                date: "March 7, 2025",
                time: "7:00 PM onwards",
                location: "LOD, Thamel",
                price: "Rs. 2,000 to Rs. 3,000",
                image: "assets/dj alok.png",
                category: "music",
                url: "https://www.instagram.com/p/DGJDIzISsW6/?utm_source=ig_web_copy_link",
                popularity: 8
            },
            
            {
                id: 3,
                title: "KP OLI CUP 2025 Finals",
                description: "Machhindra FC vs KP OLI FC at KP oli cup Final 2025 happening grand with live music and special guests.",
                date: "March 3, 2025",
                time: "3:00 PM",
                location: "Dasharath Stadium",
                price: "Free",
                image: "assets/kp oli cup.png",
                category: "sports",
                url: "https://www.facebook.com/kpolicup/",
                attendees: ["World Cup-winning Italian legend Gianluigi Buffon", "Kuma sagar and khowpa", "Purna Rai and daju bhai"],
                highlights: ["Live music performance", "Special guest appearances", "Food stalls available"],
                popularity: 3
            },
            {
                
                id: 4,
                title: "Sushant KC Live in Nepal",
                description: "Sushant KC is a prominent Nepali singer-songwriter and musician known for his heartfelt lyrics, soulful melodies, and emotional storytelling through music. Some of his hit songs are: 'Sarangi', 'Parkha Na', 'Kya Kardiya', 'Bardali'. His songs are widely celebrated for his soulful music and heartfelt lyrics that often explore themes of love, nostalgia, and life. His unique blend of contemporary pop with Nepali melodies has made him one of the most beloved artists in Nepal and among the Nepali diaspora.",
                date: "March 8, 2025",
                time: "3:00 PM Onwards",
                location: "Sallaghari Ground, Bhaktapur",
                price: "Rs. 1050 to Rs. 3000", // Table will be announced soon
                image: "assets/susants.png", // Add the appropriate image path
                category: "music",
                url: "https://events.khalti.com/events/ET25DZREURPZ", // Example URL
                popularity: 9
            },
            {
                id: 5,
                title: "Dream On Music Fest",
                description: " Albatross, Sabin Rai & The Pharaoh, Swar and The Rockheads take the stage for an electrifying live performance! An unforgettable experience of a lifetime filled with high-energy beats, soulful tunes, and pure musical magic which will be hosted by Malvika Subba.",
                date: "March 8, 2025",
                time: "1:00 PM Onwards",
                location: "Hyatt Ground, Boudha",
                price: "Rs. 899 to Rs. 5,000", // Price range
                image: "assets/dreamon.png", // Add the appropriate image path
                category: "music",
                url: "https://events.khalti.com/events/ET257HPZKA7K", // Example URL
                popularity: 7
            },
            {
                id: 6,
                title: "Holi Rewind 2025",
                description: "Tilt Your World - Holi Rewind 2025 Reliving Holi, Reliving Memories",
                date: "March 13, 2025",
                time: "10:00 AM Onwards",
                location: "International Club, Sanepa, Lalitpur",
                price: "Rs. 799", // Price
                image: "assets/holirewind.png", // Add the appropriate image path
                category: "holi", // Tag for filtering
                url: "https://events.khalti.com/events/ET25WAA2W3FQ",// Example URL
                popularity: 6
            },
            {
                id: 7,
                title: "EV Carnival by MAW Vriddhi",
                description: " This is your chance to  Test drive the latest EV models from Deepal, Nami, and Seres, including the world's first Transformer SUV FOR FREE!!!. Enjoy exclusive offers, cash discounts, and a chance to win exciting prizes!",
                date: "March 1 - 4, 2025",
                time: "11:00 AM - 6:00 PM",
                location: "Amrapali Banquet, Naxal, Kathmandu",
                price: "Free Test Drive",
                image: "assets/evcar.png", // Add the appropriate image path
                category: "event",
                url: "https://english.aarthiknews.com/news/detail/17981/", // Example URL for more information
                highlights: ["Chance to win iPhone 16", "Experience driving luxury cars for free"],
                popularity: 5
            },
            {
                id: 8,
                title: "Support Women's work this Women's day. ",
                description: "Shop unique, handcrafted products\nüíúCome celebrate Women's Day with us at the HattiHatti x International Club Market! ‚ú®üéâ\n\nüõçÔ∏è  Support women & sustainability\nüé∂ Enjoy a vibrant market experience",
                date: "March 7, 2025 - March 9, 2025",
                time: "10 AM - 6 PM",
                location: "International Club, Lalitpur",
                price: "Free",
                image: "assets/hatihati.png", // Add the appropriate image path
                category: "event", // Tag for filtering
                url: "https://www.instagram.com/p/DGxkRoqsapH/", // Example URL for more information
                popularity: 4
            },
            
        ];
        
        function loadEvents() {
            const container = document.getElementById('events-container');
            container.innerHTML = ''; // Clear previous content

            const fragment = document.createDocumentFragment();
            
            businesses.forEach(event => {
                const eventCard = createEventCard(event);
                fragment.appendChild(eventCard);
            });

            container.appendChild(fragment); // Append all elements at once
        }

        function createEventCard(event) {
            const card = document.createElement('div');
            card.className = 'event-card';
            const categories = Array.isArray(event.category) ? event.category.join(',') : event.category;
            card.setAttribute('data-category', categories);
            
            const imageUrl = event.image || "assets/football-finals.png"; // Example image
            
            card.innerHTML = `
                <div class="event-image" style="background-image: url('${imageUrl}')">
                    <div class="event-category">${categories}</div>
                </div>
                <div class="event-content">
                    <h3 class="event-title">${event.title}</h3>
                    <div class="event-meta">
                        <div class="event-date">
                            <i class="far fa-calendar-alt"></i>
                            <span>${event.date}</span>
                        </div>
                        <div class="event-time">
                            <i class="far fa-clock"></i>
                            <span>${event.time}</span>
                        </div>
                    </div>
                    <div class="event-meta">
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${event.location}</span>
                        </div>
                    </div>
                    <p class="event-description">${event.description}</p>
                    <div class="event-footer">
                        <div class="event-price-tag${event.price === 'Free' ? ' free' : ''}">
                            ${event.price}
                        </div>
                        <a href="${event.url}" class="event-button" target="_blank">
                            View Post <i class="fas fa-external-link-alt" aria-hidden="true"></i>
                            <span class="sr-only">(opens in a new tab)</span>
                        </a>
                    </div>
                    <div class="countdown-container">
                        <div class="event-time-counter" id="countdown-${event.id}"></div>
                    </div>
                </div>
            `;

            // Add click event to open modal
            card.addEventListener('click', () => {
                openModal(event);
            });

            return card;
        }
        
    
        
        function filterEvents(category) {
            const allEvents = document.querySelectorAll('.event-card');
            
            allEvents.forEach(event => {
                const eventCategories = event.getAttribute('data-category').split(',');
                const priceElement = event.querySelector('.event-price-tag');
                const isFreePrice = priceElement && priceElement.textContent.trim().includes('Free');
                
                if (category === 'all') {
                    event.style.display = 'block';
                } else if (category === 'Free') {
                    // Show events with "Free" price or "Free" category
                    if (isFreePrice || eventCategories.includes('Free')) {
                        event.style.display = 'block';
                    } else {
                        event.style.display = 'none';
                    }
                } else {
                    // Update the condition to check for category match
                    if (eventCategories.some(cat => cat.trim().toLowerCase() === category.trim().toLowerCase())) {

                        event.style.display = 'block';
                    } else {
                        event.style.display = 'none';
                    }
                }
                
                // Debugging log
                console.log(`Event: ${event.querySelector('.event-title').textContent}, Category: ${eventCategories}`);
            });
        }

        function sortEvents(criteria) {
            const container = document.getElementById('events-container');
            const eventsArray = Array.from(container.children);

            eventsArray.sort((a, b) => {
                const eventA = businesses.find(event => event.title === a.querySelector('.event-title').textContent);
                const eventB = businesses.find(event => event.title === b.querySelector('.event-title').textContent);

                switch (criteria) {
                    case 'time':
                        const timeA = new Date(eventA.date + ' ' + eventA.time);
                        const timeB = new Date(eventB.date + ' ' + eventB.time);
                        return timeA - timeB; // Sort by time ascending
                    case 'popularity':
                        return eventB.popularity - eventA.popularity; // Sort by popularity descending
                    case 'price':
                        const priceA = parseFloat(eventA.price.replace(/[^0-9.-]+/g, "")) || 0;
                        const priceB = parseFloat(eventB.price.replace(/[^0-9.-]+/g, "")) || 0;
                        return priceA - priceB;
                    default:
                        return 0;
                }
            });

            // Clear and re-append sorted events
            container.innerHTML = '';
            eventsArray.forEach(event => container.appendChild(event));
        }

        function openModal(event) {
            const modal = document.getElementById('event-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalSummary = document.getElementById('modal-summary');
            const modalAttendees = document.getElementById('modal-attendees');
            const modalHighlights = document.getElementById('modal-highlights');

            // Populate modal with event details
            modalTitle.textContent = event.title;
            modalSummary.textContent = event.description;

            // Clear previous attendees and highlights
            modalAttendees.innerHTML = '';
            modalHighlights.innerHTML = '';

            // Add attendees and highlights if available
            if (event.attendees) {
                event.attendees.forEach(attendee => {
                    const li = document.createElement('li');
                    li.textContent = attendee;
                    modalAttendees.appendChild(li);
                });
            }

            if (event.highlights) {
                event.highlights.forEach(highlight => {
                    const li = document.createElement('li');
                    li.textContent = highlight;
                    modalHighlights.appendChild(li);
                });
            }

            // Show the modal
            modal.style.display = 'block';

            // Close modal when the close button is clicked
            const closeButton = document.querySelector('.close-button');
            closeButton.onclick = function() {
                modal.style.display = 'none';
            }

            // Close modal when clicking outside of the modal content
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            }
        }

        function createSprinkles(event) {
            const sprinkleContainer = document.createElement("div");
            sprinkleContainer.classList.add("sprinkle-container");
            document.body.appendChild(sprinkleContainer);

            const numSprinkles = 20; // Number of sprinkles to generate
            for (let i = 0; i < numSprinkles; i++) {
                const sprinkle = document.createElement("div");
                sprinkle.classList.add("sprinkle");
                sprinkle.style.backgroundColor = getRandomColor();

                const x = event.clientX;
                const y = event.clientY;
                sprinkle.style.left = `${x}px`;
                sprinkle.style.top = `${y}px`;

                const angle = Math.random() * 2 * Math.PI;
                const distance = Math.random() * 100;
                const finalX = x + Math.cos(angle) * distance;
                const finalY = y + Math.sin(angle) * distance;

                document.body.appendChild(sprinkle);

                animateSprinkle(sprinkle, finalX, finalY);
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            const lazyImages = document.querySelectorAll("img.lazy-load");
            
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove("lazy-load");
                        observer.unobserve(img);
                    }
                });
            });

            lazyImages.forEach(img => observer.observe(img));
        });

        function createEventTimeCounter() {
            // Get all event cards
            const eventCards = document.querySelectorAll('.event-card');

            eventCards.forEach(card => {
                // Find the event in the businesses array
                const eventTitle = card.querySelector('.event-title').textContent;
                const event = businesses.find(e => e.title === eventTitle);

                if (event) {
                    // Create or find the time counter element
                    let timeCounterEl = card.querySelector('.event-time-counter');
                    if (!timeCounterEl) {
                        timeCounterEl = document.createElement('div');
                        timeCounterEl.classList.add('event-time-counter');
                        card.querySelector('.event-footer').insertBefore(timeCounterEl, card.querySelector('.event-button'));
                    }

                    // Parse the event date and time
                    const eventDateTime = parseEventDateTime(event.date, event.time);
                    
                    // Calculate time difference
                    const now = new Date();
                    const timeDiff = eventDateTime - now;

                    // Check if the event spans multiple days
                    const eventEndDateTime = new Date(eventDateTime);
                    eventEndDateTime.setDate(eventEndDateTime.getDate() + 1); // Assuming the event lasts for one day

                    // Style and text for different event states
                    if (timeDiff > 0) {
                        // Event is in the future
                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        
                        timeCounterEl.textContent = `Starts in ${days}d ${hours}h`;
                        timeCounterEl.style.display = 'inline-block';
                        timeCounterEl.style.padding = '10px 15px';
                        timeCounterEl.style.border = '1px solid var(--nepal-red)';
                        timeCounterEl.style.borderRadius = '5px';
                        timeCounterEl.style.backgroundColor = 'white';
                        timeCounterEl.style.color = 'var(--nepal-red)';
                        timeCounterEl.style.fontWeight = 'bold';
                        timeCounterEl.style.textAlign = 'center';
                        timeCounterEl.style.cursor = 'pointer';
                        timeCounterEl.classList.add('upcoming');
                        timeCounterEl.classList.remove('happening', 'expired');
                    } else if (now >= eventDateTime && now < eventEndDateTime) { // Check if the event is happening now
                        // Event is happening now
                        timeCounterEl.textContent = 'Happening Now!';
                        timeCounterEl.style.display = 'inline-block';
                        timeCounterEl.style.padding = '10px 15px';
                        timeCounterEl.style.border = '1px solid var(--nepal-red)';
                        timeCounterEl.style.borderRadius = '5px';
                        timeCounterEl.style.backgroundColor = 'white';
                        timeCounterEl.style.color = 'var(--nepal-red)';
                        timeCounterEl.style.fontWeight = 'bold';
                        timeCounterEl.style.textAlign = 'center';
                        timeCounterEl.style.cursor = 'pointer';
                        timeCounterEl.classList.add('happening');
                        timeCounterEl.classList.remove('upcoming', 'expired');
                    } else {
                        // Event has passed
                        timeCounterEl.textContent = 'Expired';
                        timeCounterEl.style.display = 'inline-block';
                        timeCounterEl.style.padding = '10px 15px';
                        timeCounterEl.style.border = '1px solid var(--nepal-red)';
                        timeCounterEl.style.borderRadius = '5px';
                        timeCounterEl.style.backgroundColor = 'white';
                        timeCounterEl.style.color = 'var(--nepal-red)';
                        timeCounterEl.style.fontWeight = 'bold';
                        timeCounterEl.style.textAlign = 'center';
                        timeCounterEl.style.cursor = 'pointer';
                        timeCounterEl.classList.add('expired');
                        timeCounterEl.classList.remove('upcoming', 'happening');
                    }
                }
            });
        }

        function parseEventDateTime(dateString, timeString) {
            // Clean and parse the time string
            const timeParts = timeString.toLowerCase().replace(/\s*(am|pm|onwards)/g, '').trim();
            let [hours, minutes] = timeParts.split(':').map(Number);
            
            // Adjust for 12-hour format if needed
            if (timeString.toLowerCase().includes('pm') && hours !== 12) {
                hours += 12;
            }
            if (timeString.toLowerCase().includes('am') && hours === 12) {
                hours = 0;
            }

            // Parse the date
            const dateParts = dateString.split(/\s*-\s/); // Handle date ranges
            const parsedDate = new Date(dateParts[0]);

            // Set time
            parsedDate.setHours(hours || 0, minutes || 0, 0, 0);

            return parsedDate;
        }

        // Call the function when the page loads and update periodically
        document.addEventListener('DOMContentLoaded', createEventTimeCounter);
        setInterval(createEventTimeCounter, 60000); // Update every minute

        function updateCountdown() {
            const targetDate = new Date('March 13, 2025');
            const now = new Date();
            const timeDiff = targetDate - now;

            // Calculate days left
            const daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));

            // Update the animated button with days left
            const holiButton = document.getElementById('holi-button');
            const daysLeftElement = document.getElementById('days-left');
            if (daysLeft > 0) {
                holiButton.textContent = 'Holi Events';
                daysLeftElement.textContent = `(${daysLeft} days left)`; // Update countdown message
            } else {
                holiButton.textContent = 'Celebrate Holi! (Event has passed)';
                daysLeftElement.textContent = ''; // Clear countdown message
            }
        }

        // Update countdown on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCountdown(); // Call the function to set the initial value
        });

        document.addEventListener('DOMContentLoaded', function() {
            const calendarIcon = document.getElementById('calendarIcon');
            const calendarPopup = document.getElementById('calendarPopup');
            const monthYearElement = document.getElementById('monthYear');
            const calendarDaysElement = document.getElementById('calendarDays');
            const calendarWeekdays = document.getElementById('calendarWeekdays');
            const eventsPanel = document.getElementById('eventsPanel');
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            const calendarToggle = document.getElementById('calendarTypeToggle');
            const calendarTypeLabel = document.getElementById('calendarTypeLabel');
            
            // Sample events data - replace with your own
            const events = {
                "2025-03-13": [
                    { id: 1, description: "Kuma sagar and khowpa at malla hotel" },
                    { id: 2, description: "HOli daurbarmarg" }
                ],
                "2025-03-15": [
                    { id: 3, description: "Product launch" },
                    { id: 4, description: "Marketing review" }
                ],
                "2025-03-20": [
                    { id: 5, description: "Quarterly review" }
                ],
                "2025-03-25": [
                    { id: 6, description: "Training session" },
                    { id: 7, description: "Budget planning" }
                ]
            };
            
            let currentDate = new Date();
            let currentMonth = currentDate.getMonth();
            let currentYear = currentDate.getFullYear();
            let selectedDate = null;
            let isNepaliCalendar = false;
            
            // Toggle calendar popup
            calendarIcon.addEventListener('click', function() {
                calendarPopup.classList.toggle('active');
                if (calendarPopup.classList.contains('active')) {
                    generateCalendar(currentMonth, currentYear);
                }
            });
            
            // Close calendar when clicking outside
            document.addEventListener('click', function(e) {
                if (!calendarPopup.contains(e.target) && !calendarIcon.contains(e.target)) {
                    calendarPopup.classList.remove('active');
                }
            });
            
            // Toggle between English and Nepali calendars
            calendarToggle.addEventListener('change', function() {
                isNepaliCalendar = this.checked;
                calendarTypeLabel.textContent = isNepaliCalendar ? '‡§®‡•á‡§™‡§æ‡§≤‡•Ä' : 'English';
                
                // Update weekday names
                updateWeekdayLabels();
                
                // Regenerate calendar
                generateCalendar(currentMonth, currentYear);
            });
            
            // Navigate to previous month
            prevMonthBtn.addEventListener('click', function() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                generateCalendar(currentMonth, currentYear);
            });
            
            // Navigate to next month
            nextMonthBtn.addEventListener('click', function() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                generateCalendar(currentMonth, currentYear);
            });
            
            // Update weekday labels based on calendar type
            function updateWeekdayLabels() {
                const englishWeekdays = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];
                const nepaliWeekdays = ['‡§Ü', '‡§∏‡•ã', '‡§Æ‡§Ç', '‡§¨‡•Å', '‡§¨‡§ø', '‡§∂‡•Å', '‡§∂'];
                
                const weekdays = isNepaliCalendar ? nepaliWeekdays : englishWeekdays;
                
                calendarWeekdays.innerHTML = '';
                weekdays.forEach(day => {
                    const dayElement = document.createElement('div');
                    dayElement.textContent = day;
                    calendarWeekdays.appendChild(dayElement);
                });
            }
            
            // Format date for events lookup
            function formatDateKey(date) {
                return date.getFullYear() + "-" + String(date.getMonth() + 1).padStart(2, '0') + "-" + String(date.getDate()).padStart(2, '0');
            }
            
            // Check if date has events
            function hasEvents(date) {
                const dateKey = formatDateKey(date);
                return events[dateKey] !== undefined;
            }
            
            // Convert English date to Nepali date (simplified conversion)
            function convertToNepaliDate(year, month, day) {
                // This is a simplified conversion for demonstration
                // In a real application, you would use a proper Nepali date conversion library
                
                // Nepali month names
                const nepaliMonths = [
                    '‡§¨‡•à‡§∂‡§æ‡§ñ', '‡§ú‡•á‡§†', '‡§Ö‡§∏‡§æ‡§∞', '‡§∂‡•ç‡§∞‡§æ‡§µ‡§£', '‡§≠‡§¶‡•å', '‡§Ö‡§∏‡•ã‡§ú', 
                    '‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï', '‡§Æ‡§Ç‡§∏‡§ø‡§∞', '‡§™‡•Å‡§∑', '‡§Æ‡§æ‡§ò', '‡§´‡§æ‡§ó‡•Å‡§®', '‡§ö‡•à‡§§'
                ];
                
                // Simple offset-based conversion (this is highly simplified)
                // Actual conversion would require proper algorithmic conversion
                // March 2025 roughly corresponds to Chaitra 2081
                let nepaliYear = year + 56; // Simplified offset
                let nepaliMonth;
                let nepaliDay;
                
                // Simple offset for demo (proper conversion would be more complex)
                if (month === 2) { // March
                    nepaliMonth = 11; // Chaitra
                    nepaliDay = day + 15 // Simple offset
                    if (nepaliDay > 30) {
                        nepaliDay = nepaliDay - 30;
                        nepaliMonth = 0; // Baisakh
                    }
                } else {
                    // Apply simple offsets for other months (very approximate)
                    nepaliMonth = (month + 7) % 12;
                    nepaliDay = ((day + 16) % 30) || 30;
                }
                
                return {
                    year: nepaliYear,
                    month: nepaliMonth,
                    day: nepaliDay,
                    monthName: nepaliMonths[nepaliMonth]
                };
            }
            
            // Display events for selected date
            function displayEvents(date) {
                const dateKey = formatDateKey(date);
                let formattedDate;
                
                if (isNepaliCalendar) {
                    const nepaliDate = convertToNepaliDate(date.getFullYear(), date.getMonth() + 1, date.getDate());
                    formattedDate = `${nepaliDate.day} ${nepaliDate.monthName} ${nepaliDate.year}`;
                    
                    // Also show English date for reference
                    const englishDateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                    const englishDate = date.toLocaleDateString('en-US', englishDateOptions);
                    formattedDate += `<div class="english-date">(${englishDate})</div>`;
                } else {
                    const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                    formattedDate = date.toLocaleDateString('en-US', dateOptions);
                    
                    // Show Nepali date for reference
                    const nepaliDate = convertToNepaliDate(date.getFullYear(), date.getMonth() + 1, date.getDate());
                    formattedDate += `<div class="nepali-date">${nepaliDate.day} ${nepaliDate.monthName} ${nepaliDate.year}</div>`;
                }
                
                let html = '<div class="event-date">' + formattedDate + '</div>';
                
                if (events[dateKey]) {
                    html += '<ul class="event-list">';
                    events[dateKey].forEach(function(event) {
                        html += `<li class="event-item" data-event-id="${event.id}">${event.description}</li>`;
                    });
                    html += '</ul>';
                } else {
                    html += '<div class="no-events">No events for this day</div>';
                }
                
                eventsPanel.innerHTML = html;
            }
            
            // Generate calendar grid
            function generateCalendar(month, year) {
                // Clear previous days
                calendarDaysElement.innerHTML = '';
                
                // Update header month and year
                if (isNepaliCalendar) {
                    const nepaliMonths = [
                        '‡§¨‡•à‡§∂‡§æ‡§ñ', '‡§ú‡•á‡§†', '‡§Ö‡§∏‡§æ‡§∞', '‡§∂‡•ç‡§∞‡§æ‡§µ‡§£', '‡§≠‡§¶‡•å', '‡§Ö‡§∏‡•ã‡§ú', 
                        '‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï', '‡§Æ‡§Ç‡§∏‡§ø‡§∞', '‡§™‡•Å‡§∑', '‡§Æ‡§æ‡§ò', '‡§´‡§æ‡§ó‡•Å‡§®', '‡§ö‡•à‡§§'
                    ];
                    
                    const nepaliYear = year + 56; // Approximate offset
                    const nepaliMonth = (month + 8) % 12; // Approximate offset
                    
                    monthYearElement.textContent = nepaliMonths[nepaliMonth] + ' ' + nepaliYear;
                } else {
                    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                    monthYearElement.textContent = monthNames[month] + ' ' + year;
                }
                
                // Get first day of month and number of days
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                
                // Get last day of previous month
                const prevMonthDays = new Date(year, month, 0).getDate();
                
                // Previous month's days
                for (let i = 0; i < firstDay; i++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'day inactive';
                    
                    const dayNum = prevMonthDays - (firstDay - i - 1);
                    
                    if (isNepaliCalendar) {
                        const prevMonth = month - 1 < 0 ? 11 : month - 1;
                        const prevYear = prevMonth === 11 ? year - 1 : year;
                        const nepaliDate = convertToNepaliDate(prevYear, prevMonth + 1, dayNum);
                        dayElement.textContent = nepaliDate.day;
                    } else {
                        dayElement.textContent = dayNum;
                    }
                    
                    calendarDaysElement.appendChild(dayElement);
                }
                
                // Current month's days
                const today = new Date();
                for (let i = 1; i <= daysInMonth; i++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'day';
                    
                    // Create date object for this calendar day
                    const calendarDate = new Date(year, month, i);
                    
                    // Display the date
                    if (isNepaliCalendar) {
                        const nepaliDate = convertToNepaliDate(year, month + 1, i);
                        dayElement.textContent = nepaliDate.day;
                    } else {
                        dayElement.textContent = i;
                    }
                    
                    // Check if it's today
                    if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                        dayElement.classList.add('today');
                    }
                    
                    // Check if it's the selected date
                    if (selectedDate && i === selectedDate.getDate() && month === selectedDate.getMonth() && year === selectedDate.getFullYear()) {
                        dayElement.classList.add('selected');
                    }
                    
                    // Check if date has events
                    if (hasEvents(calendarDate)) {
                        dayElement.classList.add('event');
                    }
                    
                    // Handle click on day
                    dayElement.addEventListener('click', function() {
                        // Remove selected class from all days
                        document.querySelectorAll('.day.selected').forEach(function(el) {
                            el.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked day
                        dayElement.classList.add('selected');
                        
                        // Update selected date
                        selectedDate = new Date(year, month, i);
                        
                        // Display events for this date
                        displayEvents(selectedDate);
                    });
                    
                    calendarDaysElement.appendChild(dayElement);
                }
                
                // Next month's days to fill remaining cells
                const totalCells = 42; // 6 rows √ó 7 days
                const remainingCells = totalCells - (firstDay + daysInMonth);
                
                for (let i = 0; i < remainingCells; i++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'day inactive';
                    
                    const dayNum = i + 1;
                    
                    if (isNepaliCalendar) {
                        const nextMonth = month + 1 > 11 ? 0 : month + 1;
                        const nextYear = nextMonth === 0 ? year + 1 : year;
                        const nepaliDate = convertToNepaliDate(nextYear, nextMonth + 1, dayNum);
                        dayElement.textContent = nepaliDate.day;
                    } else {
                        dayElement.textContent = dayNum;
                    }
                    
                    calendarDaysElement.appendChild(dayElement);
                }
                
                // If no date is selected, select today (first time) or keep current selection
                if (!selectedDate) {
                    selectedDate = new Date();
                    displayEvents(selectedDate);
                }
            }
            
            // Initialize weekday labels
            updateWeekdayLabels();
            
            // Initialize calendar with current month
            generateCalendar(currentMonth, currentYear);
        });

        document.getElementById('khojum-logo').addEventListener('click', function() {
            window.location.href = 'index.html'; // Navigate to the main page
        });
    </script>
</body>
</html>
