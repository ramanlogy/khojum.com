<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7LWHSBNXT5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-7LWHSBNXT5');
    </script>
    <!-- Primary Meta Tags -->
    <title>Discover trendy Events easily | Upcoming Events in Kathmandu | Khojum.com</title>
    <meta name="title" content="Discover trendy Events easily | Upcoming Events in Kathmandu | Khojum.com">
    <meta name="description" content="Nepal's top event discovery platform. Browse upcoming concerts, cultural festivals, art exhibitions, and entertainment in Kathmandu and beyond. Find the latest events happening today and tomorrow.">
    
    <!-- Keywords - include all relevant event categories and locations -->
    <meta name="keywords" content="events in kathmandu, nepal events, concerts in kathmandu, cultural events nepal, art exhibitions kathmandu, entertainment kathmandu, today's events kathmandu, upcoming events nepal, festivals kathmandu, live music nepal, theater shows kathmandu, comedy shows nepal, workshops kathmandu, seminars nepal, food festivals kathmandu, sports events nepal, khojum events">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow, max-image-preview:large">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://khojum.com">
    
    <!-- Language and Locale -->
    <meta name="language" content="English">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="ne_NP">

    <!-- Structured Data for Events -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Khojum Events",
        "url": "https://khojum.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://khojum.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>

    <!-- Dynamic Structured Data for Events -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "itemListElement": [
            {
                "@type": "Event",
                "name": "Example Event 1",
                "description": "Description of event 1",
                "startDate": "2024-03-21T19:00",
                "endDate": "2024-03-21T22:00",
                "location": {
                    "@type": "Place",
                    "name": "Venue Name",
                    "address": {
                        "@type": "PostalAddress",
                        "addressLocality": "Kathmandu",
                        "addressRegion": "Bagmati",
                        "addressCountry": "NP"
                    }
                },
                "image": "https://khojum.com/assets/images/event1.jpg",
                "offers": {
                    "@type": "Offer",
                    "price": "1000",
                    "priceCurrency": "NPR"
                }
            }
            // Add more events dynamically
        ]
    }
    </script>

    <!-- Site Verification -->
    <meta name="google-site-verification" content="your-verification-code">
    
    <!-- Mobile Optimization -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="theme-color" content="#dc143c">
    
    <!-- Existing favicon and other meta tags -->
    <link rel="icon" href="/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    
    <!-- Open Graph Meta Tags for better social sharing -->
    <meta property="og:title" content="Discover trendy Events easily | Upcoming Events in Kathmandu | Khojum.com">
    <meta property="og:description" content="Nepal's top event discovery platform. Browse upcoming concerts, cultural festivals, art exhibitions, and entertainment in Kathmandu and beyond.">
    <meta property="og:image" content="/assets/logo/og-image.png">
    <meta property="og:url" content="https://khojum.com">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Discover trendy Events easily | Khojum.com">
    <meta name="twitter:description" content="Nepal's top event discovery platform. Browse upcoming concerts, cultural festivals, art exhibitions, and entertainment in Kathmandu.">
    <meta name="twitter:image" content="/assets/logo/twitter-card.png">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#dc143c">
    <link rel="canonical" href="https://khojum.com">
    <meta name="robots" content="index, follow">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --nepal-red: #dc143c;
            --nepal-blue: #003893;
            --accent-yellow: #f9d949;
            --dark-text: #333333;
            --light-text: #666666;
            --lightest-bg: #f9f7f5;
            --card-bg: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif; /* Use Poppins as the primary font */
            line-height: 1.6;
            color: var(--dark-text);
            background-color: var(--lightest-bg);
            padding: 0;
            margin: 0;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: var(--nepal-red);
            color: white;
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 25L70 45L50 65L30 45L50 25Z' fill='rgba(255,255,255,0.05)'/%3E%3C/svg%3E");
            background-size: 100px;
            opacity: 0.2;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .logo a {
            text-decoration: none;
            color: inherit;
        }
        
        .logo h1 {
            font-family: 'Lora', serif; /* Use Lora for headings */
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
        }
        
        .logo span {
            color: var(--accent-yellow);
        }
        
        .logo img {
            width: 50px;
            height: auto;
        }
        
        .title-section {
            text-align: center;
            padding-bottom: 30px;
        }
        
        .title-section h2 {
            font-family: 'Lora', serif; /* Use Lora for headings */
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            line-height: 1.2;
        }
        
        .title-section p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .date-display {
            font-family: 'Lora', serif; /* Use Lora for headings */
            font-style: italic;
            font-size: 1.3rem;
            font-weight: 500;
            margin-top: 10px;
            display: block;
        }
        
        .filter-bar {
            background-color: white;
            padding: 15px 0;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 40px;
            position: relative;
            z-index: 10;
        }
        
        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .filter-button {
            background-color: transparent;
            border: 1px solid var(--nepal-red);
            color: var(--nepal-red);
            padding: 8px 16px;
            border-radius: 100px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-button:hover, .filter-button.active {
            background-color: var(--nepal-red);
            color: white;
        }
        
        .sort-dropdown {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        
        .sort-dropdown select {
            padding: 8px 16px;
            border: 1px solid var(--nepal-red);
            border-radius: 100px;
            background-color: transparent;
            color: var(--nepal-red);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 25px;
            padding-bottom: 60px;
        }
        
        @media (min-width: 768px) {
            .events-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .events-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .event-image {
            position: relative;
            width: 100%;
            height: 200px; /* Fixed height for consistent image containers */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            cursor: zoom-in;
            overflow: hidden; /* Ensure content stays within bounds */
        }
        .event-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
     
        
        .event-time-counter {
            margin-top: 10px; /* Space above the counter */
            margin-bottom: 10px; /* Space below the counter */
            font-weight: bold;
            padding: 100px; /* Increased padding for better visibility */
            border-radius: 8px;
            background-color: white;
            border: 2px solid var(--nepal-red);
            color: #aa2121;
            text-align: center; /* Center the text for better visibility */

        }
        
      

        .event-time-counter {
                width: 100%; /* Make it full width on mobile */
                margin-top: 5px; /* Ensure it appears below the price */
                font-size: 1rem; /* Adjust font size for better readability */
            }
        
        
        .event-category {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--nepal-red);
            color: white;
            padding: 5px 12px;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .event-content {
            padding: 20px;
        }
        
        .event-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark-text);
            line-height: 1.3;
        }
        
        .event-meta {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .event-date, .event-time, .event-location, .event-price {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--light-text);
        }
        
        .event-meta i {
            color: var(--nepal-red);
            font-size: 1rem;
        }
        
        .event-description {
            max-height: 150px; /* Adjust this value based on your needs */
            overflow-y: auto;
            padding-right: 10px;
            position: relative;
            scrollbar-width: thin;
            scrollbar-color: var(--nepal-red) #f0f0f0;
        }
        
        /* Scroll indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(transparent, white);
            padding: 5px 8px;
            border-radius: 4px;
            font-size: 12px;
            color: var(--nepal-red);
            opacity: 0.8;
            pointer-events: none;
        }
        
        /* Custom scrollbar styles */
        .event-description::-webkit-scrollbar {
            width: 6px;
        }
        
        .event-description::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 3px;
        }
        
        .event-description::-webkit-scrollbar-thumb {
            background: var(--nepal-red);
            border-radius: 3px;
        }
        
        .event-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: nowrap;
            margin-top: 10px;
        }
        
        .event-price-tag {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--nepal-blue);
            flex: 1;
            min-width: 100px;
          
        }
        
        .event-price-tag.free {
            color: #2ecc71;
        }
        
        .event-button {
            background-color: var(--nepal-red);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 100px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
            margin-left: 10px;
        }
        
        .event-button:hover {
            background-color: #b01030;
        }
        
        footer {
            background-color: var(--nepal-red);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        
        .logo-small {
            font-family: 'Lora', serif; /* Use Lora for headings */
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .logo-small span {
            color: var(--accent-yellow);
        }
        
        .copyright {
            opacity: 0.8;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 40px 0;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0,0,0,0.1);
            border-left: 4px solid var(--nepal-red);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .title-section h2 {
                font-size: 2.2rem;
            }
            
            .filter-buttons {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 5px;
            }
        }
        
        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
        }
        
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        
        .countdown {
            display: inline-block;
            padding: 10px 15px;
            border: 1px solid var(--nepal-red);
            border-radius: 5px;
            background-color: white;
            color: var(--nepal-red);
            font-weight: bold;
            text-align: center;
            cursor: pointer;
        }
        
        .expired {
            color: red;
        }

        .sprinkle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            opacity: 1;
        }

        .event-time-counter {
          
            margin-top: 10px;
            font-weight: bold;
            padding: 10px;
            border-radius: 8px;
            background-color: white;
            border: 2px solid var(--nepal-red);
            color: #aa2121;
           
        }
        .event-time-counter.upcoming {
            background-color: hwb(0 100% 0%);
            color: #dc143c;
        }
        .event-time-counter.happening {
            background-color: #e6ffe6;
            color: #006600;
        }
        .event-time-counter.expired {
            background-color: #ffe6e6;
            color: #cc0000;
        }
        @keyframes colorChange {
            0% { color: #dc143c; }
            25% { color: #f9d949; }
            50% { color: #003893; }
            75% { color: #2ecc71; }
            100% { color: #dc143c; }
        }
        .animated-holi-button {
            position: fixed; /* Fix the position */
            top: 20px; /* Distance from the top */
            right: 20px; /* Distance from the right */
            background-image: linear-gradient(45deg, #FF4136, #FF6B6B, #FFD700, #4ECDC4, #9D4EDD); /* Colorful gradient */
            color: rgb(5, 0, 0); /* Text color */
            padding: 12px 20px; /* Increased padding for a larger button */
            border: none; /* No border */
            border-radius: 20px; /* More rounded corners */
            font-size: 1rem; /* Increased font size */
            font-weight: bold; /* Bold text */
            text-decoration: none; /* No underline */
            transition: transform 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease; /* Shortened animation duration */
            z-index: 1000; /* Ensure it stays on top */
            animation: pulse 1.5s infinite; /* Add pulse animation */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Added shadow for depth */
        }

        .animated-holi-button:hover {
            transform: scale(1.05); /* Slightly scale up on hover */
            background-image: linear-gradient(45deg, #FFD700, #FF6B6B, #4ECDC4, #9D4EDD, #FF4136); /* Change gradient on hover */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); /* Darker shadow on hover */
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05); /* Scale up */
            }
            100% {
                transform: scale(1); /* Scale back */
            }
        }

        #days-left {
            display: none; /* Hide the element */
        }

       

        /* Media Queries for Mobile Responsiveness */
        @media (max-width: 768px) {
            .animated-holi-button {
                font-size: 0.8rem; /* Smaller font size for mobile */
                padding: 6px 12px; /* Smaller padding for mobile */
                top: 10px; /* Adjust position for mobile */
                right: 10px; /* Adjust position for mobile */
            }

            .days-left-message, .time-left-message {
                font-size: 0.8rem; /* Smaller font size for mobile */
            }
        }

        .support-message {
            font-size: 1rem; /* Increased font size for better visibility */
            color:  #ffcc00; /* Changed color for better contrast */
            margin-top: 4px; /* Add some space above */
            text-align: center; 
            margin-left: 10px;/* Center the text */
        }

        .email-link {
            color: #ffcc00; /* Updated link color */
            font-weight: bold; /* Make the link bold */
            text-decoration: underline; /* Underline the link for emphasis */
        }

        .email-link:hover {
            color: #3fc909; /* Change color on hover for visibility */
        }

        :root {
  --nepal-red: #c8102e; /* Nepal flag's crimson red */
  --nepal-blue: #003893; /* Nepal flag's deep blue */
  --calendar-background: #ffffff;
  --calendar-header: #003893; /* Using Nepal blue for header */
  --calendar-text: #333333;
  --calendar-inactive: #cccccc;
  --calendar-today: #e7f0f9;
  --calendar-selected: #c8102e; /* Using Nepal red for selected */
  --calendar-hover: #f0f0f0;
  --calendar-event-dot: #c8102e; /* Using Nepal red for event indicators */
  --calendar-border: #eeeeee;
  --calendar-shadow: rgba(0, 0, 0, 0.15);
}

/* Calendar Icon Button */
.calendar-icon {
  position: fixed;
  top: 8px;
  right: 20px;
  width: 60px;
  height: 60px; /* Increased height for better touchability */
  background-color: var(--nepal-red);
  border-radius: 12px; /* Slightly more rounded */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.25);
  transition: transform 0.2s, box-shadow 0.2s;
  z-index: 1000;
}

.calendar-icon:hover, .calendar-icon:active {
  transform: scale(1.05);
  box-shadow: 0 5px 18px rgba(0, 0, 0, 0.35);
}

.calendar-icon svg {
  width: 28px;
  height: 32px;
  fill: white;
  margin-bottom: -5px;
}

.calendar-label {
  font-size: 12px;
  font-weight: bold;
  color: white;
  text-align: center;
  margin-top: 4px;
}

/* Calendar Popup */
.calendar-popup {
  position: fixed; /* Changed to fixed for better mobile positioning */
  top: 140px;
  right: 0px;
  width: 320px; /* Slightly wider for mobile */
  max-width: calc(100vw - 40px); /* Ensures it doesn't overflow on small screens */
  background-color: var(--calendar-background);
  border-radius: 16px;
  box-shadow: 0 8px 30px var(--calendar-shadow);
  overflow: hidden;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: opacity 0.3s, transform 0.3s, visibility 0.3s;
  z-index: 1000000;
}

.calendar-popup.active {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

/* Calendar Header */
.calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background-color: var(--calendar-header);
  color: white;
}

.month-year {
  font-weight: 700;
  font-size: 20px;
}

.nav-buttons {
  display: flex;
  gap: 12px;
}

.nav-btn {
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px; /* Larger for better touch targets */
  height: 32px; /* Larger for better touch targets */
  border-radius: 50%;
  color: white;
  transition: background-color 0.2s;
}

.nav-btn:hover, .nav-btn:active {
  background-color: rgba(255, 255, 255, 0.25);
}

/* Calendar Toggle Styles */
.calendar-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between; /* Changed to better space the elements */
  padding: 12px 16px;
  border-bottom: 1px solid var(--calendar-border);
}

.toggle-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--calendar-text);
  margin-right: auto; /* Pushes it to the left */
}

.switch {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 24px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #adabab;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
}

input:checked + .slider {
  background-color: var(--nepal-blue); /* Changed to match theme */
}

input:checked + .slider:before {
  transform: translateX(22px);
}

.slider.round {
  border-radius: 24px;
}

.slider.round:before {
  border-radius: 50%;
  
}

/* Calendar Grid */
.calendar-grid {
  padding: 14px;
}

.weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  text-align: center;
  font-weight: 600;
  color: #666;
  margin-bottom: 10px;
  font-size: 14px;
}

.days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  text-align: center;
}

.day {
  aspect-ratio: 1/1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  cursor: pointer;
  position: relative;
  font-size: 14px;
  color: var(--calendar-text);
  transition: background-color 0.2s;
  padding: 8px 0; /* Added padding for better spacing */
}

.day.event:after {
  content: '';
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  width: 5px;
  height: 5px;
  background-color: var(--calendar-event-dot);
  border-radius: 50%;
}

.day:not(.inactive):hover, .day:not(.inactive):active {
  background-color: var(--calendar-hover);
}

.day.today {
  background-color: var(--calendar-today);
  font-weight: bold;
}

.day.selected {
  background-color: var(--calendar-selected);
  color: white;
  font-weight: bold;
}

.day.inactive {
  color: var(--calendar-inactive);
  cursor: default;
}

.nepali-date {
  font-size: 18px;
  color: var(--nepal-red);
  margin-top: 1px;
  /* Added line height limiting for compact display */
  line-height: 1;
}

/* Events Panel */
.events-panel {
  background-color: #f9f9f9;
  border-top: 1px solid var(--calendar-border);
  padding: 12px 16px;
  max-height: 180px; /* Slightly increased height */
  overflow-y: auto;
}

.event-date {
  font-weight: 600;
  color: var(--nepal-blue);
  margin-bottom: 6px;
  font-size: 14px;
}

.event-list {
  list-style-type: none;
  padding: 0;
  margin: 0;
}

.event-item {
  padding: 8px 0;
  border-bottom: 1px solid var(--calendar-border);
  color: var(--calendar-text);
  font-size: 14px;
}

.event-item:last-child {
  border-bottom: none;
}

.no-events {
  color: #999;
  font-style: italic;
  font-size: 14px;
  padding: 8px 0;
}

/* Archived Events Button */
.archived-events-icon {
  position: fixed;
  bottom: 20px;
  right: 10px;
  background-color: var(--nepal-red);
  color: white;
  padding: 12px 16px;
  font-weight: bold;
  font-size: 14px;
  border-radius: 8px;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 8px; /* Space between icon and text */
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.2);
  transition: background-color 0.3s, transform 0.2s;
  z-index: 1000;
}

.archived-events-icon:hover, .archived-events-icon:active {
  background-color: #a70d26; /* Slightly darker on hover */
  transform: scale(1.03);
}

.archived-events-icon svg {
  width: 16px;
  height: 16px;
  fill: white;
}

/* Media Queries for Mobile Responsiveness */
@media (max-width: 768px) {
  .calendar-popup {
    right: 50%;
    transform: translateX(50%) translateY(-10px);
    width: 90%;
    max-width: 350px;
  }
  
  .calendar-popup.active {
    transform: translateX(50%) translateY(0);
  }
  
  .calendar-icon {
    right: 15px;
    top: 15px;
  }
  
  .archived-events-icon {
    right: 15px;
    bottom: 15px;
    padding: 10px 14px;
    font-size: 13px;
  }
  
  .day {
    font-size: 13px;
  }
  
  .nepali-date {
    font-size: 14px;
  }
}

@media (max-width: 480px) {
  .calendar-grid {
    padding: 10px;
  }
  
  .weekdays {
    font-size: 12px;
  }
  
  .day {
    font-size: 12px;
  }
  
  .nepali-date {
    font-size: 16px;
  }
  
  .events-panel {
    max-height: 160px;
  }
}
        .archived-events-icon {
            position: bottom; /* Changed to fixed for consistent positioning */
            bottom: 20px; /* Adjusted for desired position */
            right: 20px; /* Adjusted for desired position */
            background-color: var(--nepal-red); /* Background color */
            color: white; /* Text color */
            padding: 10px 15px; /* Padding */
            font-weight: bold;
            border-radius: 5px; /* Rounded corners */
            text-decoration: none; /* Remove underline */
            display: flex; /* Flexbox for alignment */
            align-items: center; /* Center items vertically */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* Shadow for depth */
            transition: background-color 0.3s; /* Smooth background color transition */
            z-index: 1000; /* Ensure it stays on top */
        }

       

        .archived-events-icon:hover {
            background-color: #b01030; /* Darker shade on hover */
        }
        @media (max-width: 768px) {
  #fixedButton {
    top: 5px; /* Adjusted position for smaller screens */
    right: 5px; /* Adjusted position for smaller screens */
  }
}


        .icon-box {
            display: flex; /* Flexbox for icon and text */
            align-items: center; /* Center items vertically */
        }

        .icon-box i {
            margin-right: 7px; /* Space between icon and text */
        }
        .twitter-link {
    font-size: 1rem; /* Increase font size */
    color: #0a0a0a; /* Twitter blue color */
    text-decoration: none; /* Remove underline */
    transition: color 0.3s; /* Smooth color transition */
}

.twitter-link:hover {
    color: #fdfdfd; /* Darker blue on hover */
}

.twitter-link i {
    font-size: 1.3rem; /* Increase icon size */
    margin-right: 5px; 
    margin-top: 20px;/* Space between icon and text */
}

/* Updated styles for image and description */
.event-image {
    position: relative;
    width: 100%;
    height: 200px; /* Fixed height for consistent image containers */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    cursor: zoom-in;
    overflow: hidden; /* Ensure content stays within bounds */
}

.expand-image-icon {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 8px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s;
}

.event-image:hover .expand-image-icon {
    opacity: 1;
}

.event-description {
    max-height: 150px; /* Adjust this value based on your needs */
    overflow-y: auto;
    padding-right: 10px;
    position: relative;
    scrollbar-width: thin;
    scrollbar-color: var(--nepal-red) #f0f0f0;
}

/* Scroll indicator */
.scroll-indicator {
    position: absolute;
    bottom: 0;
    right: 0;
    background: linear-gradient(transparent, white);
    padding: 5px 8px;
    border-radius: 4px;
    font-size: 12px;
    color: var(--nepal-red);
    opacity: 0.8;
    pointer-events: none;
}

/* Custom scrollbar styles */
.event-description::-webkit-scrollbar {
    width: 6px;
}

.event-description::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
}

.event-description::-webkit-scrollbar-thumb {
    background: var(--nepal-red);
    border-radius: 3px;
}

/* Image modal styles */
.image-modal {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    cursor: pointer;
}

.modal-content {
    margin: auto;
    display: block;
    width: auto;
    height: auto;
    max-width: 90%;
    max-height: 90vh;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    object-fit: contain; /* Ensures image maintains aspect ratio */
}

.expand-image-icon {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 8px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s;
}

.event-image:hover .expand-image-icon {
    opacity: 1;
}

.expand-image-icon svg {
    width: 16px;
    height: 16px;
    color: white;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .event-image {
        height: 180px; /* Slightly smaller height for mobile */
    }
}

/* Add this CSS to style the today date badge */
.today-date {
    position: absolute;
    top: 15px; /* Adjust position as needed */
    right: 20px; /* Adjust position as needed */
    background-color: transparent; /* Use a color that fits your theme */
    color: rgb(255, 230, 0);
    border-radius: 50%;
    width: 20px; /* Size of the badge */
    height: 20px; /* Size of the badge */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem; /* Font size for the date */
    font-weight: bold;
    font-style: italic;
  
}

/* Filter Container Styles */
.filter-container {
    position: relative;
    display: inline-block;
    margin-right: 15px;
}

.filter-toggle {
    background-color: var(--nepal-red);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 25px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    font-weight: 600;
    transition: background-color 0.3s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.filter-toggle:hover {
    background-color: #b01030;
}

.filter-toggle i {
    font-size: 1rem;
}

.filter-dropdown {
    display: none; /* Initially hidden */
    position: absolute;
    background: rgb(255, 253, 253);
    border: 1px solid #f3e7e7;
    border-radius: 5px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    z-index: 100;
    width: 200px; /* Adjust width as needed */
   
}

.filter-dropdown.show {
    display: block;
}

.filter-options {
    padding: 10px;
}

.filter-button {
    display: block;
    width: 100%;
    padding: 10px;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    transition: background 0.3s;
  
}

.filter-button:hover {
    background: rgba(0, 0, 0, 0.05);
}

/* Style for the sort dropdown */
.sort-dropdown {
    padding: 10px;
}

.sort-dropdown select {
    width: 100%;
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

.filter-container {
    position: relative;
/* Needed for absolute positioning of dropdown */
}

.filter-toggle {
    background: #c8102e;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 50px;
    cursor: pointer;
   
}

.filter-toggle:hover {
    background: #a70d26;
    
}

.filter-options {
    padding: 10px;
}

.filter-button {
    display: block;
    width: 100%;
    padding: 10px;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    transition: background 0.3s;
}

.filter-button:hover {
    background: rgba(0, 0, 0, 0.05);
}

/* Style for the sort dropdown */
.sort-dropdown {
    padding: 10px;
}

.sort-dropdown select {
    width: 100%;
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

:root {
    --primary-color: #dc143c;
    --nav-height: 60px;
    --page-transition: 0.3s;
    --sidebar-width: 200px;
    --sidebar-collapsed-width: 60px;
}

body {
    margin: 0;
    padding: 0;
    background-color: #fafafa;
}

/* Header styles - stays at top */
.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: var(--nav-height);
    background: #fefffe;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
    display: flex;
    align-items: center;
    padding: 0 20px;
    padding-top: 60px;
}

/* Footer styles - stays at bottom */
.footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--nav-height);
    background: #fefffe;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
    display: flex;
    align-items: center;
    padding: 0 20px;
}

/* Navigation Styles - mobile: bottom bar */
.nav-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #fefffe;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
    padding: 8px 0;
}

.nav-container {
    max-width: 600px;
    margin: 0 auto;
    display: flex;
    justify-content: space-around;
    align-items: center;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
    color: #666;
    text-decoration: none;
    border: none;
    background: none;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.nav-item i {
    font-size: 24px;
    margin-bottom: 4px;
}

.nav-item span {
    font-size: 12px;
}

.nav-item.active {
    color: var(--primary-color);
}

/* Toggle button for sidebar */
.nav-toggle {
    display: none;
    position: fixed;
    left: var(--sidebar-collapsed-width);
    top: calc(var(--nav-height) + 10px);
    background: #fefffe;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    z-index: 1001;
    cursor: pointer;
    transition: all 0.3s ease;
}

.nav-toggle i {
    color: var(--primary-color);
    font-size: 14px;
}

.nav-toggle.collapsed {
    left: 10px;
}

/* Page Container Styles */
.page-container {
    padding-top: var(--nav-height);
    padding-bottom: calc(var(--nav-height) + 20px);
    min-height: 100vh;
}

.page {
    display: none;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s ease-in-out;
    padding: 20px;
}

.page.active {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* Category Grid Styles */
.category-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-top: 20px;
}

.category-card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.category-card:hover {
    transform: translateY(-5px);
}

.category-card i {
    font-size: 32px;
    color: var(--primary-color);
    margin-bottom: 12px;
}

/* Featured Events Styles */
.featured-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.featured-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.featured-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.featured-card h4 {
    padding: 15px;
    margin: 0;
}

.featured-card p {
    padding: 0 15px 15px;
    margin: 0;
    color: #666;
}

/* Search Styles */
.search-box {
    position: relative;
    margin-bottom: 20px;
}

.search-box input {
    width: 100%;
    padding: 12px 40px 12px 15px;
    border: 1px solid #ddd;
    border-radius: 25px;
    font-size: 16px;
}

.search-box button {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--primary-color);
    cursor: pointer;
}

/* Responsive Design - Sidebar on Larger Screens */
@media (min-width: 768px) {
    .nav-bar {
        position: fixed;
        top: var(--nav-height);
        bottom: var(--nav-height);
        left: 0;
        width: var(--sidebar-width);
        height: auto;
        box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        padding: 20px 0;
        transition: all 0.3s ease;
    }

    .nav-bar.collapsed {
        width: var(--sidebar-collapsed-width);
    }

    .nav-container {
        flex-direction: column;
        gap: 20px;
        width: 100%;
        max-width: 100%;
    }

    .nav-item {
        width: 100%;
        padding: 15px;
        text-align: left;
        flex-direction: row;
        justify-content: flex-start;
        align-items: center;
    }

    .nav-item i {
        margin-right: 15px;
        margin-bottom: 0;
    }

    .nav-item span {
        font-size: 14px;
    }

    .nav-bar.collapsed .nav-item {
        padding: 15px 0;
        justify-content: center;
    }

    .nav-bar.collapsed .nav-item span {
        display: none;
    }

    .nav-toggle {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Ensure content is pushed to the side of the sidebar without overlap */
    .page-container {
        margin-left: var(--sidebar-width);
        padding-left: 20px;
        padding-right: 20px;
        width: calc(100% - var(--sidebar-width) - 40px);
        transition: margin-left 0.3s ease, width 0.3s ease;
    }

    .page-container.sidebar-collapsed {
        margin-left: var(--sidebar-collapsed-width);
        width: calc(100% - var(--sidebar-collapsed-width) - 40px);
    }

    .category-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* Animation Classes */
.slide-in {
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

    .nav-item:hover {
        color: var(--primary-color); /* Change color to primary color on hover */
    }

    /* Share button styles */
    .share-button {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
    }

    .share-button:hover {
        background-color: white;
        transform: scale(1.1);
    }

    .share-icon {
        color: #555;
        font-size: 18px;
    }

    .share-dropdown {
        position: absolute;
        top: 45px;
        right: 0;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        width: 180px;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease, opacity 0.3s ease;
        opacity: 0;
        z-index: 100;
    }

    .share-button.active .share-dropdown {
        max-height: 300px;
        opacity: 1;
    }

    .share-option {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        cursor: pointer;
        transition: background-color 0.2s ease;
    }

    .share-option:hover {
        background-color: #f5f5f5;
    }

    .share-option i {
        margin-right: 10px;
        width: 20px;
        text-align: center;
    }

    .share-option span {
        font-size: 14px;
        color: #333;
    }

    /* WhatsApp */
    .share-option.whatsapp i {
        color: #25D366;
    }

    /* Instagram */
    .share-option.instagram i {
        color: #E1306C;
    }

    /* Facebook */
    .share-option.facebook i {
        color: #1877F2;
    }

    /* Copy Link */
    .share-option.copy-link i {
        color: #6c757d;
    }

    /* Twitter */
    .share-option.twitter i {
        color: #1DA1F2;
    }

    /* Success message for copy link */
    .copy-success {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #4CAF50;
        color: white;
        padding: 10px 20px;
        border-radius: 4px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 1000;
    }

    .copy-success.show {
        opacity: 1;
    }

    .nepal-red {
        color: #dc143c; /* Nepal red color */
    }

    .discord-link, .github-link {
        margin-left: 10px; /* Space between links */
        color: #000000; /* Discord color */
        text-decoration: none; /* Remove underline */
        font-size: 1rem;
        transition: color 0.3sec;
    }

    .github-link {
        color: #000000; /* GitHub color */
    }


.github-link:hover {
    color: #fdfdfd; /* Darker blue on hover */
}
.discord-link:hover {
    color: #fdfdfd; /* Darker blue on hover */
}
/* Nepal Trekking Chatbot Styles */

/* Add these styles to your existing CSS or create a new file */

#chatbot-container {
  --main-color: #2c3e50;
  --accent-color: #3498db;
  --bg-color: #f5f5f5;
  --user-msg-color: #dcf8c6;
  --bot-msg-color: #ffffff;
  font-family: Arial, sans-serif;
}

#chat-area::-webkit-scrollbar {
  width: 6px;
}

#chat-area::-webkit-scrollbar-track {
  background: #f1f1f1;
}

#chat-area::-webkit-scrollbar-thumb {
  background: #ddd;
  border-radius: 3px;
}

#chat-area::-webkit-scrollbar-thumb:hover {
  background: #ccc;
}

#user-input:focus, #send-button:focus {
  outline: none;
  border-color: var(--accent-color);
}

#send-button:hover {
  background: #34495e;
}

/* Animation for chat bubbles */
#chat-area > div {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive adjustments */
@media (max-width: 480px) {
  #chatbot-container {
    width: 90%;
    right: 5%;
    bottom: 10px;
  }
}

    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Khojum",
        "url": "https://www.khojum.com",
        "logo": "/home/raman/Downloads/khojum-master/assets/logo/favicon.ico"
    
        
    }
    </script>
</head>
<body>
    <div class="layout-wrapper">
        <!-- Sidebar Toggle Button -->
       <!-- Add this outside the nav-bar but near it -->
<button class="nav-toggle">
    <i class="fas fa-chevron-left"></i>
</button>
        <!-- Sidebar -->
        <nav class="nav-bar">
            <div class="nav-container">
                <div class="nav-header">
                    <img src="images/logo.png" alt="Khojum Logo" class="nav-logo" id="navLogo">
                </div>
                <button class="nav-item active" data-page="home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-item" data-page="events" onclick="loadPage('events.html')">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Events</span>
                </button>
                <button class="nav-item" data-page="Missions" onclick="loadMissionPage()">
                    <i class="fa-solid fa-gun"></i>
                    <span><b>Missions</b></span>
                </button>
                <button class="nav-item" data-page="archived">
                    <i class="fas fa-archive"></i>
                    <span>Archived</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!--
    <div class="fixed-button-container">
        <a href="holi.html" class="animated-holi-button" id="holi-button">
            Holi Events!
        </a>
        <span id="days-left" class="days-left-message"></span> <!-- Countdown message outside the button -->
    </div> 
    

    <nav class="nav-bar">
        <div class="nav-container">
            <button class="nav-item" data-page="home">
                <i class="fas fa-home"></i>
                <span><b>Home</b></span>
            </button>
            <button class="nav-item" data-page="events">
                <i class="fas fa-calendar-alt"></i>
                <span><b>Events</b></span>
            </button>
            <button class="nav-item" data-page="Missions">
                <i class="fa-solid fa-gun"></i>
                <span><b>Missions</b></span>
            </button>
            <button class="nav-item" data-page="archived">
                <i class="fas fa-archive"></i>
                <span><b>Archived</b></span>
            </button>
        </div>
    </nav>

    <header>
        <div class="container">
            <div class="logo">
                <h1 id="khojum-logo"><span></span></h1>
            </div>
            <div class="title-section">
                <h2>What are you doing this Week?</h2>
                <p>Discover the best events happening in Nepal this Week.</p>
                <span class="date-display" id="date-range">Date: March 13</span>
            </div>
        </div>
    </header>
    
    <div class="filter-bar" id="filterBar">
        <div class="container">
            <div class="filter-container">
                <button class="filter-toggle" id="filterToggle">
                    <i class="fas fa-filter"></i>
                    <span>Filters</span>
                </button>
                <div class="filter-dropdown" id="filterDropdown">
                    <div class="filter-options">
                        <button class="filter-button active" data-filter="all">All Events</button>
                        <button class="filter-button" data-filter="today">Today</button>
                        <button class="filter-button" data-filter="tomorrow">Tomorrow</button>
                        <button class="filter-button" data-filter="Free">Free</button>
                        <button class="filter-button" data-filter="music">Music</button>
                        <button class="filter-button" data-filter="business" onclick="openWhatsApp()">Discount code</button>
                        <button class="filter-button" data-filter="sports">Sports</button>
                    </div>
                    <div class="sort-dropdown">
                        <select id="sort-options">
                            <option value="time">Sort by Time</option>
                            <option value="popularity">Sort by Popularity</option>
                            <option value="price">Sort by Price</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
   
    
    <main class="container">
        <div class="events-grid" id="events-container">
            <!-- Events will be dynamically populated here -->
        </div>
        
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>Loading more events...</p>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="logo-small">
                <span></span>
            </div>
  
           
            <p class="support-message">
              <b>Help Us Improve</b>
                <a href="mailto:ceo@khojum.com?subject=Feedback%20for%20Khojum" class="email-link">ceo@khojum.com</a>
            </p>
        </p> 
        <a href="https://x.com/ramanLogy" target="_blank" title="X" class="twitter-link">
              
        </a>
        <a href="https://discord.gg/ncvvvPqT" target="_blank" title="Discord" class="discord-link">
           <i class="fab fa-discord"></i> 
        </a>
        <a href="https://github.com/ramanlogy/khojum.com.git" target="_blank" title="GitHub" class="github-link">
            <i class="fab fa-github"></i> 
        </a>
        <p class="copyright"> Khojum Inc. &copy; 2025</p>
            <!-- Moved Archived Events Icon to Footer -->
            
            <!-- End of Archived Events Icon -->
        </div>
    </footer>

    <!-- Modal Structure -->
    <div id="event-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-summary"></p>
            <h3>Attendees:</h3>
            <ul id="modal-attendees"></ul>
            <h3>Special Highlights:</h3>
            <ul id="modal-highlights"></ul>
        </div>
    </div>

    <!-- Calendar Icon -->
    <div class="calendar-icon" id="calendarToggleBtn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M19,4H17V3a1,1,0,0,0-2,0V4H9V3A1,1,0,0,0,7,3V4H5A3,3,0,0,0,2,7V19a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4Zm1,15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V10H20Zm0-11H4V7A1,1,0,0,1,5,6H7V7A1,1,0,0,0,9,7V6h6V7a1,1,0,0,0,2,0V6h2a1,1,0,0,1,1,1Z"/>
        </svg>
        <span class="calendar-label">Calendar</span>
        <span class="today-date" id="todayDate"></span> <!-- Badge for today's date -->
    </div>
    

    <!-- Calendar Popup -->
    <div class="calendar-popup" id="calendarPopup">
        <div class="calendar-header">
            <div class="month-year" id="monthYear">March 2025</div>
            <div class="nav-buttons">
                <button class="nav-btn" id="prevMonth">
                    <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" fill="currentColor"/>
                    </svg>
                </button>
                <button class="nav-btn" id="nextMonth">
                    <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" fill="currentColor"/>
                    </svg>
                </button>
                <!-- Full-Screen Icon -->
                <button class="nav-btn" id="fullScreenBtn" title="View Full Screen">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 3h3v3H3V3zm15 0h3v3h-3V3zM3 15h3v3H3v-3zm15 0h3v3h-3v-3zM3 9h3v3H3V9zm15 0h3v3h-3V9zM9 3h6v3H9V3zm0 15h6v3H9v-3z"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Calendar Toggle -->
        <div class="calendar-toggle">
            <label class="switch">
                <input type="checkbox" id="calendarTypeToggle">
                <span class="slider round"></span>
            </label>
            <span class="toggle-label" id="calendarTypeLabel">ON ( calendar)</span>
        </div>
        
        <div class="calendar-grid">
            <div class="weekdays" id="calendarWeekdays">
                <div>Su</div>
                <div>Mo</div>
                <div>Tu</div>
                <div>We</div>
                <div>Th</div>
                <div>Fr</div>
                <div>Sa</div>
            </div>
            <div class="days" id="calendarDays">
                <!-- Days will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="events-panel" id="eventsPanel">
            <div class="event-date">No date selected</div>
            <div class="no-events">No events for this day</div>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modalImage">
        <div class="zoom-controls">
            <button id="zoomIn">+</button>
            <button id="zoomOut">-</button>
            <button id="resetZoom">Reset</button>
        </div>
    </div>

    <!-- Add this form inside the main container -->
    <div id="eventForm" class="event-form" style="display: none;">
        <h3>Add Event</h3>
        <label for="eventTitle">Event Title:</label>
        <input type="text" id="eventTitle" required>
        
        <label for="eventDate">Event Date:</label>
        <input type="date" id="eventDate" required>
        
        <label for="eventTime">Event Time:</label>
        <input type="time" id="eventTime" required>
        
        <label for="eventDescription">Description:</label>
        <textarea id="eventDescription" required></textarea>
        
        <label for="eventPublic">Public Event:</label>
        <input type="checkbox" id="eventPublic" checked>
        
        <button id="eventSubmitBtn">Add Event</button>
        <button id="eventCancelBtn">Cancel</button>
    </div>
    

    <script>

document.addEventListener('DOMContentLoaded', function() {
        const navItems = document.querySelectorAll('.nav-item');
        
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const page = this.getAttribute('data-page');
                
                // Remove active class from all items
                navItems.forEach(nav => nav.classList.remove('active'));
                // Add active class to clicked item
                this.classList.add('active');
                
                if (page === 'archived') {
                    // Navigate to archived events page
                    window.location.href = 'expired.html';
                } else {
                    // Handle other navigation as before
                    switchPage(page);
                }
            });
        });
    });
        // Set the date range for "this week"
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const dayOfWeek = now.getDay();
            const startDate = new Date(now);
            startDate.setDate(now.getDate() - dayOfWeek); // Sunday
            
            const endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + 6); // Saturday
            
            const options = { month: 'long', day: 'numeric' };
            const dateRange = `${startDate.toLocaleDateString('en-US', options)} - ${endDate.toLocaleDateString('en-US', options)}, ${endDate.getFullYear()}`;
            
            document.getElementById('date-range').textContent = dateRange;
            
            // Load events
            loadEvents();
            
            // Set default sorting by time when the page loads
            sortEvents('time');
            
            // Set up filter buttons
            const filterButtons = document.querySelectorAll('.filter-button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Filter events
                    const filter = this.getAttribute('data-filter');
                    filterEvents(filter);

                    // Check if the clicked button is the "Holi" button
                    if (filter === 'holi') {
                        createSprinkles(event);
                    }
                });
            });

            // Set up sort dropdown
            const sortDropdown = document.getElementById('sort-options');
            sortDropdown.addEventListener('change', function() {
                const sortCriteria = this.value;
                sortEvents(sortCriteria);
            });
        });
        
        // Sample business data
        const businesses = [
         
      
        {
        id: 1, // New ID for the Jameson Patan Fest 2025 event
        title: "Jameson Patan Fest 2025",
        description: "Jameson Patan Fest 2025 is set to be one of the biggest events in Nepal this year! If you're searching for upcoming events in Nepal, concerts near me, or festivals in Kathmandu, this is where you need to be! On April 5, 2025, from 2:00 PM onwards, Chyasal Stadium will transform into a high-energy celebration of music, culture, and entertainment, featuring some of Nepal's most electrifying performers!\n\nOur first headline act is hereJohn & The Locals!  Known for their unmatched energy and electrifying live performances, they're ready to take Jameson Patan Fest to the next level! But this is just the beginningmore powerhouse artists are set to be revealed soon! Stay tuned as we build up to an epic music festival that will keep you on your feet all night long!",
        date: "April 5, 2025", // Date of the event
        time: "2:00 PM Onwards", // Time of the event
        location: "Chyasal Stadium, Lalitpur, Nepal", // Venue
        price: "Rs. 900 to Rs. 1500", // Price can be updated later
        image: "assets/jameson.png", // Add the appropriate image path
        category: "Music", // Tags for filtering
        url: "https://events.khalti.com/events/ET25HCWK4QJV", // Example URL for more information
        popularity: 10 // Adjust popularity as needed
         }, 
             {
        id: 2, // New ID for the Jameson Patan Fest 2025 event
        title: "Jameson Patan Fest 2025",
        description: "Jameson Patan Fest 2025 is set to be one of the biggest events in Nepal this year! If you're searching for upcoming events in Nepal, concerts near me, or festivals in Kathmandu, this is where you need to be! On April 5, 2025, from 2:00 PM onwards, Chyasal Stadium will transform into a high-energy celebration of music, culture, and entertainment, featuring some of Nepal's most electrifying performers!\n\nOur first headline act is hereJohn & The Locals!  Known for their unmatched energy and electrifying live performances, they're ready to take Jameson Patan Fest to the next level! But this is just the beginningmore powerhouse artists are set to be revealed soon! Stay tuned as we build up to an epic music festival that will keep you on your feet all night long!",
        date: "April 5, 2025", // Date of the event
        time: "2:00 PM Onwards", // Time of the event
        location: "Chyasal Stadium, Lalitpur, Nepal", // Venue
        price: "Rs. 900 to Rs. 1500", // Price can be updated later
        image: "assets/jameson.png", // Add the appropriate image path
        category: "Music", // Tags for filtering
        url: "https://events.khalti.com/events/ET25HCWK4QJV", // Example URL for more information
        popularity: 10 // Adjust popularity as needed
    },
    {
        id: 3, // New ID for the 1974 AD - Live Kathmandu event
        title: "1974 AD - The last show in nepal",
        description: "1974 AD is a Nepali rock band formed in Kathmandu in the early 1990s. Known for experimenting with various genres, including Nepali folk, ragas, rock, funk, blues, and jazz, they are among Nepal's most successful recording artists. Many of their albums rank among the top ten bestsellers. This event could be their final performance in Nepal as they celebrate the 30th anniversary of their formation.",
        date: "April 5, 2025", // Date of the event
        time: "4:00 PM onwards", // Time of the event (to be announced)
        location: "Hyatt Regency Kathmandu, Kathmandu, Nepal", // Venue
        price: "Rs. 1000 to Rs. 2500", // Price range
        image: "assets/1974.png", // Add the appropriate image path
        category: "Music", // Tags for filtering
        url: "https://esewaevents.com/booking/1974-ad-live-in-kathmandu", // Example URL for more information
        popularity: 10 // Adjust popularity as needed
    },
             {
        id: 4, // New ID for the New Year Fest 2082 event
        
        title: "New Year Fest 2082",
        description: "New Year Fest 2082 is the ultimate way to kick off the Nepali New Year with high-energy live music, electrifying performances, and an unforgettable atmosphere! If you're searching for events in Nepal, upcoming events in Nepal, or concerts near you, this festival at Bhutandevi School Ground, Hetauda, is where you need to be!\n\nBrought to you by 8 Peaks Nepal, this festival features Albatross as the headliner, along with The Elements and more artists, ready to set the stage on fire! Get ready for a night of powerful beats, thrilling performances, and pure musical magic as we welcome Baisakh 1 with style, energy, and excitement! Don't miss out on the biggest New Year's Eve party in Nepal!",
        date: "April 14, 2025", // Date of the event
        time: "4:00 PM Onwards", // Time of the event
        location: "Bhutandevi Higher Secondary School, Hetauda, Nepal", // Venue
        price: "Early bird: RS. 500", // Price can be updated later
        image: "assets/elements.png", // Add the appropriate image path
        category: "Music", // Tags for filtering
        url: "https://events.khalti.com/events/ET25A9N43LYQ", // Example URL for more information
        popularity: 9 // Adjust popularity as needed
    },

    {
    id: 5, // New ID for the BRAVE CF 93 event
    title: "BRAVE CF 93: Himalion vs. Magician (MMA)",
    description: "Nepal's MMA star, Rabindra Dhant aka Himalion is set to face China's Egiyuebu aka Magician at BRAVE CF 93. This event promises to be an electrifying showdown between two talented fighters, showcasing the best of mixed martial arts. Don't miss this thrilling encounter!",
    date: "April 18, 2025", // Date of the event
    time: "7:45 PM Onwards", // Time of the event (to be announced)
    location: "Zhengzhou, China", // Venue
    price: "7 crore", // Price can be updated later
    image: "assets/chinaboy.png", // Add the appropriate image path
    category: "Sports", // Tags for filtering
    url: "https://www.bravecf.com/events/93", // Example URL for more information
    popularity: 8,// Adjust popularity as needed
    highlights: ['Big news for Nepali MMA Fans.']
},

{
    id: 6, // New ID for the Nepal Super League 2025 event
    title: "Nepal Super League (NSL) 2025",
    description: "From: sat, chaitra 16 - sat baisakh 13 (FINALLLL MATCH) The Nepal Super League (NSL) 2025 is the third edition of Nepal's first professional franchise-based football league, organized by Nepal Sports and Events Management (NSEM) with technical support from the All Nepal Football Association (ANFA). This league features seven teams: Butwal Lumbini FC, Dhangadhi FC, FC Chitwan, Jhapa FC, Kathmandu Rayzrs FC, Lalitpur City FC, and Pokhara Thunders FC. The league aims to enhance football development in Nepal, promote regional pride, and provide a platform for local footballers to excel.",
    date: "March 29, 2025 - April 25, 2025 ", // Start date of the event
    time: "6:00 PM everymatch", // Time of the event (to be announced)
    location: "Dasrath Rangasala, Tripureshowr", // Venue
    price: "Rs.200 to Rs.500", // Price can be updated later
    image: "assets/nsl.png", // Add the appropriate image path
    category: "Sports", // Tags for filtering
    url: "https://events.khalti.com/events/ET257PPR6M74", // Example URL for more information
    popularity: 9, // Adjust popularity as needed
    highlights: ['Teams: The league will feature seven teams: Butwal Lumbini FC, Dhangadhi FC, FC Chitwan, Jhapa FC, Kathmandu Rayzrs FC, Lalitpur City FC, and Pokhara Thunders FC.'] // Special highlights
},
{
    id: 7, // New ID for the Men's PM Cup 2025 event
    title: " '     ",
    description: " The Ultimate Battle for Nepal's Domestic Crown! \n Tournament Dates: 9th March  29th March\n\n3 venues, 46 matches  Who will rise as Nepal's Domestic Champions? \n\n#PMCup2025 | #NepalCricket | #domesticchampions",
    date:"March 20, 2025",
    startDate: "March 9, 2025", // Start date of the tournament
    endDate: "March 29, 2025", // End date of the tournament
    time: "9:00 AM every match", // Time of the event (to be announced)
    location: "Siddhartha Rangasala & Extra Tech & Lamahi", // Venues
    price: "Free on youtube", // Price can be updated later
    image: "assets/pmcup.png", // Add the appropriate image path
    category: "Sports", // Tags for filtering
    url: "https://www.youtube.com/@KantipurMaxHD", // Example URL for more information
    popularity: 9, // Adjust popularity as needed
    highlights: ['46 matches across 3 venues!', 'Who will be crowned the champions?'] // Special highlights
},
   


        ];
        
        // Debugging: Log the businesses array before and after adding the new event
        console.log("Before adding new event:", businesses);
        // Add the new event here if not already included
        console.log("After adding new event:", businesses);
        
        function loadEvents() {
            const container = document.getElementById('events-container');
            container.innerHTML = ''; // Clear previous content

            const fragment = document.createDocumentFragment();
            
            businesses.forEach(event => {
                const eventCard = createEventCard(event);
                fragment.appendChild(eventCard);
            });

            container.appendChild(fragment); // Append all elements at once
        }

     function createEventCard(event) {
            const card = document.createElement('div');
            card.className = 'event-card';
            const categories = Array.isArray(event.category) ? event.category.join(',') : event.category;
            card.setAttribute('data-category', categories);
            
            const imageUrl = event.image || "assets/football-finals.png"; // Example image
            
            card.innerHTML = `
                <div class="event-image" style="background-image: url('${imageUrl}')">
                    <div class="event-category">${categories}</div>
                </div>
                <div class="event-content">
                    <h3 class="event-title">${event.title}</h3>
                    <div class="event-meta">
                        <div class="event-date">
                            <i class="far fa-calendar-alt"></i>
                            <span>${event.date}</span>
                        </div>
                        <div class="event-time">
                            <i class="far fa-clock"></i>
                            <span>${event.time}</span>
                        </div>
                         <div class="event-location">
                        <i class="fas fa-map-marker-alt nepal-red"></i> <!-- Add the nepal-red class here -->
                        <span>${event.location}</span>
                    </div>
                    </div>
                   
                    <p class="event-description">${event.description}</p>
                    <div class="event-footer">
                        <div class="event-price-tag${event.price === 'Free' ? ' free' : ''}">
                            ${event.price}
                        </div>
                        <a href="${event.url}" class="event-button" ">
                       Buy Tickets <i class="fas fa-external-link-alt" aria-hidden="true"></i>
                            <span class="sr-only">(opens in a new tab)</span>
                        </a>
                    </div>
                    <div class="countdown-container">
                        <div class="event-time-counter" id="countdown-${event.id}"></div>
                    </div>
                </div>
            `;
               

            // Add click event to open modal
            card.addEventListener('click', () => {
                openModal(event);
            });

            return card;
        }
        
    function openWhatsApp() {
    const phoneNumber = "9779861828821"; // Replace with your WhatsApp number in international format without '+'
    const message = "Message to get discount on tickets.!!"; // Customize your message
    const url = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodeURIComponent(message)}`;
    window.open(url, "_blank");
}
   
        
        function filterEvents(category) {
            const allEvents = document.querySelectorAll('.event-card');
            
            allEvents.forEach(event => {
                const eventCategories = event.getAttribute('data-category').split(',');
                const priceElement = event.querySelector('.event-price-tag');
                const isFreePrice = priceElement && priceElement.textContent.trim().includes('Free');
                
                if (category === 'all') {
                    event.style.display = 'block';
                } else if (category === 'Free') {
                    // Show events with "Free" price or "Free" category
                    if (isFreePrice || eventCategories.includes('Free')) {
                        event.style.display = 'block';
                    } else {
                        event.style.display = 'none';
                    }
                } else {
                    // Check if the event's categories include the selected category
                    if (eventCategories.some(cat => cat.trim().toLowerCase() === category.trim().toLowerCase())) {
                        event.style.display = 'block';
                    } else {
                        event.style.display = 'none';
                    }
                }
                
                // Debugging log
                console.log(`Event: ${event.querySelector('.event-title').textContent}, Category: ${eventCategories}`);
            });
        }

        function sortEvents(criteria) {
            const container = document.getElementById('events-container');
            const eventsArray = Array.from(container.children);

            eventsArray.sort((a, b) => {
                const eventA = businesses.find(event => event.title === a.querySelector('.event-title').textContent);
                const eventB = businesses.find(event => event.title === b.querySelector('.event-title').textContent);

                switch (criteria) {
                    case 'time':
                        const timeA = new Date(eventA.date + ' ' + eventA.time);
                        const timeB = new Date(eventB.date + ' ' + eventB.time);
                        return timeA - timeB; // Sort by time ascending
                    case 'popularity':
                        return eventB.popularity - eventA.popularity; // Sort by popularity descending
                    case 'price':
                        const priceA = parseFloat(eventA.price.replace(/[^0-9.-]+/g, "")) || 0;
                        const priceB = parseFloat(eventB.price.replace(/[^0-9.-]+/g, "")) || 0;
                        return priceA - priceB;
                    default:
                        return 0;
                }
            });

            // Clear and re-append sorted events
            container.innerHTML = '';
            eventsArray.forEach(event => container.appendChild(event));
        }

        function openModal(event) {
            const modal = document.getElementById('event-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalSummary = document.getElementById('modal-summary');
            const modalAttendees = document.getElementById('modal-attendees');
            const modalHighlights = document.getElementById('modal-highlights');

            // Populate modal with event details
            modalTitle.textContent = event.title;
            modalSummary.textContent = event.description;

            // Clear previous attendees and highlights
            modalAttendees.innerHTML = '';
            modalHighlights.innerHTML = '';

            // Add attendees and highlights if available
            if (event.attendees) {
                event.attendees.forEach(attendee => {
                    const li = document.createElement('li');
                    li.textContent = attendee;
                    modalAttendees.appendChild(li);
                });
            }

            if (event.highlights) {
                event.highlights.forEach(highlight => {
                    const li = document.createElement('li');
                    li.textContent = highlight;
                    modalHighlights.appendChild(li);
                });
            }

            // Show the modal
            modal.style.display = 'block';

            // Close modal when the close button is clicked
            const closeButton = document.querySelector('.close-button');
            closeButton.onclick = function() {
                modal.style.display = 'none';
            }

            // Close modal when clicking outside of the modal content
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            }
        }

        function createSprinkles(event) {
            const sprinkleContainer = document.createElement("div");
            sprinkleContainer.classList.add("sprinkle-container");
            document.body.appendChild(sprinkleContainer);

            const numSprinkles = 20; // Number of sprinkles to generate
            for (let i = 0; i < numSprinkles; i++) {
                const sprinkle = document.createElement("div");
                sprinkle.classList.add("sprinkle");
                sprinkle.style.backgroundColor = getRandomColor();

                const x = event.clientX;
                const y = event.clientY;
                sprinkle.style.left = `${x}px`;
                sprinkle.style.top = `${y}px`;

                const angle = Math.random() * 2 * Math.PI;
                const distance = Math.random() * 100;
                const finalX = x + Math.cos(angle) * distance;
                const finalY = y + Math.sin(angle) * distance;

                document.body.appendChild(sprinkle);

                animateSprinkle(sprinkle, finalX, finalY);
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            const lazyImages = document.querySelectorAll("img.lazy-load");
            
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove("lazy-load");
                        observer.unobserve(img);
                    }
                });
            });

            lazyImages.forEach(img => observer.observe(img));
        });

        function createEventTimeCounter() {
            // Get all event cards
            const eventCards = document.querySelectorAll('.event-card');

            eventCards.forEach(card => {
                // Find the event in the businesses array
                const eventTitle = card.querySelector('.event-title').textContent;
                const event = businesses.find(e => e.title === eventTitle);

                if (event) {
                    // Create or find the time counter element
                    let timeCounterEl = card.querySelector('.event-time-counter');
                    if (!timeCounterEl) {
                        timeCounterEl = document.createElement('div');
                        timeCounterEl.classList.add('event-time-counter');
                        card.querySelector('.event-footer').insertBefore(timeCounterEl, card.querySelector('.event-button'));
                    }

                    // Parse the event date and time
                    const eventDateTime = parseEventDateTime(event.date, event.time);
                    
                    // Calculate time difference
                    const now = new Date();
                    const timeDiff = eventDateTime - now;

                    // Check if the event spans multiple days
                    const eventEndDateTime = new Date(eventDateTime);
                    eventEndDateTime.setDate(eventEndDateTime.getDate() + 1); // Assuming the event lasts for one day

                    // Style and text for different event states
                    if (timeDiff > 0) {
                        // Event is in the future
                        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        
                        timeCounterEl.textContent = `Starts in ${days}d ${hours}h`;
                        timeCounterEl.style.display = 'inline-block';
                        timeCounterEl.style.padding = '10px 15px';
                        timeCounterEl.style.border = '1px solid var(--nepal-red)';
                        timeCounterEl.style.borderRadius = '5px';
                        timeCounterEl.style.backgroundColor = 'white';
                        timeCounterEl.style.color = 'var(--nepal-red)';
                        timeCounterEl.style.fontWeight = 'bold';
                        timeCounterEl.style.textAlign = 'center';
                        timeCounterEl.style.cursor = 'pointer';
                        timeCounterEl.classList.add('upcoming');
                        timeCounterEl.classList.remove('happening', 'expired');
                    } else if (now >= eventDateTime && now < eventEndDateTime) { // Check if the event is happening now
                        // Event is happening now
                        timeCounterEl.textContent = 'Happening Now!';
                        timeCounterEl.style.display = 'inline-block';
                        timeCounterEl.style.padding = '10px 15px';
                        timeCounterEl.style.border = '1px solid var(--nepal-red)';
                        timeCounterEl.style.borderRadius = '5px';
                        timeCounterEl.style.backgroundColor = 'white';
                        timeCounterEl.style.color = 'var(--nepal-red)';
                        timeCounterEl.style.fontWeight = 'bold';
                        timeCounterEl.style.textAlign = 'center';
                        timeCounterEl.style.cursor = 'pointer';
                        timeCounterEl.classList.add('happening');
                        timeCounterEl.classList.remove('upcoming', 'expired');
                    } else {
                        // Event has passed
                        timeCounterEl.textContent = 'Expired';
                        timeCounterEl.style.display = 'inline-block';
                        timeCounterEl.style.padding = '10px 15px';
                        timeCounterEl.style.border = '1px solid var(--nepal-red)';
                        timeCounterEl.style.borderRadius = '5px';
                        timeCounterEl.style.backgroundColor = 'white';
                        timeCounterEl.style.color = 'var(--nepal-red)';
                        timeCounterEl.style.fontWeight = 'bold';
                        timeCounterEl.style.textAlign = 'center';
                        timeCounterEl.style.cursor = 'pointer';
                        timeCounterEl.classList.add('expired');
                        timeCounterEl.classList.remove('upcoming', 'happening');
                    }
                }
            });
        }

        function parseEventDateTime(dateString, timeString) {
            // Clean and parse the time string
            const timeParts = timeString.toLowerCase().replace(/\s*(am|pm|onwards)/g, '').trim();
            let [hours, minutes] = timeParts.split(':').map(Number);
            
            // Adjust for 12-hour format if needed
            if (timeString.toLowerCase().includes('pm') && hours !== 12) {
                hours += 12;
            }
            if (timeString.toLowerCase().includes('am') && hours === 12) {
                hours = 0;
            }

            // Parse the date
            const dateParts = dateString.split(/\s*-\s/); // Handle date ranges
            const parsedDate = new Date(dateParts[0]);

            // Set time
            parsedDate.setHours(hours || 0, minutes || 0, 0, 0);

            return parsedDate;
        }

        // Call the function when the page loads and update periodically
        document.addEventListener('DOMContentLoaded', createEventTimeCounter);
        setInterval(createEventTimeCounter, 60000); // Update every minute

        function updateCountdown() {
            const targetDate = new Date('March 13, 2025');
            const now = new Date();
            const timeDiff = targetDate - now;

            // Calculate days left
            const daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));

            // Update the animated button with days left
            const holiButton = document.getElementById('holi-button');
            const daysLeftElement = document.getElementById('days-left');
            if (daysLeft > 0) {
                holiButton.textContent = 'Search Holi Events';
                daysLeftElement.textContent = `(${daysLeft} days left)`; // Update countdown message
            } else {
                holiButton.textContent = 'Celebrate Holi! (Event has passed)';
                daysLeftElement.textContent = ''; // Clear countdown message
            }
        }

        // Update countdown on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCountdown(); // Call the function to set the initial value
        });

        document.addEventListener('DOMContentLoaded', function() {
    const calendarIcon = document.getElementById('calendarToggleBtn');
    const calendarPopup = document.getElementById('calendarPopup');
    const monthYearElement = document.getElementById('monthYear');
    const calendarDaysElement = document.getElementById('calendarDays');
    const calendarWeekdays = document.getElementById('calendarWeekdays');
    const eventsPanel = document.getElementById('eventsPanel');
    const prevMonthBtn = document.getElementById('prevMonth');
    const nextMonthBtn = document.getElementById('nextMonth');
    const calendarToggle = document.getElementById('calendarTypeToggle');
    const calendarTypeLabel = document.getElementById('calendarTypeLabel');
    const addEventBtn = document.getElementById('addEventBtn');
    const eventForm = document.getElementById('eventForm');
    const shareButton = document.getElementById('shareCalendarBtn');
    
    // Sample events data - replace with your own
    let events = {
        "2025-03-13": [
            { id: 1, description: "Kuma sagar and khowpa at malla hotel", isPublic: true },
            { id: 2, description: "HOli daurbarmarg", isPublic: true }
        ],
        "2025-03-15": [
            { id: 3, description: "Product launch", isPublic: false },
            { id: 4, description: "Marketing review", isPublic: true }
        ],
        "2025-03-20": [
            { id: 5, description: "Quarterly review", isPublic: false }
        ],
        "2025-03-25": [
            { id: 6, description: "Training session", isPublic: true },
            { id: 7, description: "Budget planning", isPublic: false }
        ]
    };
    
    // Holiday data
    const holidays = {
        // English calendar holidays (YYYY-MM-DD)
        "english": {
            "2025-03-08": "International Women's Day",
            "2025-03-17": "St. Patrick's Day",
            "2025-03-20": "March Equinox",
            "2025-03-29": "Holi",
            "2025-04-13": "Nepali New Year (Baisakh 1)"
        },
        // Nepali calendar holidays (YYYY-MM-DD)
        "nepali": {
            "2081-12-25": "Holi",
            "2082-01-01": "Nepali New Year",
            "2081-12-13": "International Women's Day",
            "2081-12-30": "Rama Navami"
        }
    };
    
    let currentDate = new Date();
    let currentMonth = currentDate.getMonth();
    let currentYear = currentDate.getFullYear();
    let selectedDate = null;
    let isNepaliCalendar = false;
    
    // Function to close calendar
    function closeCalendar() {
        if (calendarPopup) {
            calendarPopup.classList.remove('active');
        }
    }

    // Toggle calendar when icon is clicked
    calendarIcon.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation(); // Stop the click from bubbling up
        calendarPopup.classList.toggle('active');
        if (calendarPopup.classList.contains('active')) {
            generateCalendar(currentMonth, currentYear);
        }
    });

    // Close calendar when clicking anywhere on the document
    document.addEventListener('click', function(e) {
        // Check if click is outside calendar popup and icon
        if (!calendarPopup.contains(e.target) && !calendarIcon.contains(e.target)) {
            closeCalendar();
        }
    });

    // Prevent calendar from closing when clicking inside it
    calendarPopup.addEventListener('click', function(e) {
        e.stopPropagation(); // Stop the click from reaching the document
    });

    // Close calendar with ESC key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeCalendar();
        }
    });
    
    // Toggle between English and Nepali calendars
    calendarToggle.addEventListener('change', function() {
        isNepaliCalendar = this.checked;
        calendarTypeLabel.textContent = isNepaliCalendar ? 'OFF (English Calendar)' : 'ON (Nepali Calendar)';
        
        // Smooth transition effect
        calendarDaysElement.classList.add('calendar-transition');
        calendarWeekdays.classList.add('calendar-transition');
        
        setTimeout(() => {
            // Update weekday names
            updateWeekdayLabels();
            
            // Regenerate calendar
            generateCalendar(currentMonth, currentYear);
            
            // Remove transition class after animation completes
            setTimeout(() => {
                calendarDaysElement.classList.remove('calendar-transition');
                calendarWeekdays.classList.remove('calendar-transition');
            }, 300);
        }, 150);
    });
    
    // Navigate to previous month
    prevMonthBtn.addEventListener('click', function() {
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11; // Wrap to December
            currentYear--; // Decrease year
        }
        generateCalendar(currentMonth, currentYear); // Regenerate calendar
        updateMonthYearDisplay(); // Update displayed month and year
    });
    
    // Navigate to next month
    nextMonthBtn.addEventListener('click', function() {
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0; // Wrap to January
            currentYear++; // Increase year
        }
        generateCalendar(currentMonth, currentYear); // Regenerate calendar
        updateMonthYearDisplay(); // Update displayed month and year
    });
    
    // Add event button click
    addEventBtn.addEventListener('click', function() {
        if (!selectedDate) {
            selectedDate = new Date();
        }
        
        const dateStr = formatDateDisplay(selectedDate, false);
        document.getElementById('eventDate').value = formatDateKey(selectedDate);
        document.getElementById('selectedDateDisplay').textContent = dateStr;
        document.getElementById('eventPublic').checked = true;
        document.getElementById('eventDescription').value = '';
        
        eventForm.classList.add('active');
    });
    
    // Share calendar button
    shareButton.addEventListener('click', function() {
        const publicEvents = {};
        
        // Filter for public events only
        for (const dateKey in events) {
            const publicDateEvents = events[dateKey].filter(event => event.isPublic);
            if (publicDateEvents.length > 0) {
                publicEvents[dateKey] = publicDateEvents;
            }
        }
        
        // Generate shareable link
        const shareableData = btoa(JSON.stringify(publicEvents));
        const shareableLink = `${window.location.origin}${window.location.pathname}?shared=${shareableData}`;
        
        // Display sharing modal with link
        alert(`Share this link with others:\n${shareableLink}`);
        
        // In a real implementation, you would show a proper modal with copy functionality
    });
    
    // Handle event form submission
    document.getElementById('eventSubmitBtn').addEventListener('click', function(e) {
        e.preventDefault();
        
        const dateKey = document.getElementById('eventDate').value;
        const description = document.getElementById('eventDescription').value.trim();
        const isPublic = document.getElementById('eventPublic').checked;
        
        if (!description) {
            alert('Please enter an event description');
            return;
        }
        
        // Create event object
        const newEvent = {
            id: Date.now(), // Simple unique ID
            description: description,
            isPublic: isPublic
        };
        
        // Add to events object
        if (!events[dateKey]) {
            events[dateKey] = [];
        }
        events[dateKey].push(newEvent);
        
        // Reset form
        eventForm.classList.remove('active');
        document.getElementById('eventDescription').value = '';
        
        // Refresh calendar
        generateCalendar(currentMonth, currentYear);
        
        // If selected date has the new event, update events panel
        if (selectedDate && formatDateKey(selectedDate) === dateKey) {
            displayEvents(selectedDate);
        }
    });
    
    // Cancel event form
    document.getElementById('eventCancelBtn').addEventListener('click', function(e) {
        e.preventDefault();
        eventForm.classList.remove('active');
    });
    
    // Update weekday labels based on calendar type
    function updateWeekdayLabels() {
        const englishWeekdays = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];
        const nepaliWeekdays = ['', '', '', '', '', '', ''];
        
        const weekdays = isNepaliCalendar ? nepaliWeekdays : englishWeekdays;
        
        calendarWeekdays.innerHTML = '';
        weekdays.forEach(day => {
            const dayElement = document.createElement('div');
            dayElement.textContent = day;
            calendarWeekdays.appendChild(dayElement);
        });
    }
    
    // Format date for events lookup
    function formatDateKey(date) {
        return date.getFullYear() + "-" + String(date.getMonth() + 1).padStart(2, '0') + "-" + String(date.getDate()).padStart(2, '0');
    }
    
    // Format date for display
    function formatDateDisplay(date, includeWeekday = true) {
        const options = includeWeekday
            ? { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }
            : { year: 'numeric', month: 'long', day: 'numeric' };
        
        return date.toLocaleDateString('en-US', options);
    }
    
    // Check if date has events
    function hasEvents(date) {
        const dateKey = formatDateKey(date);
        return events[dateKey] !== undefined && events[dateKey].length > 0;
    }
    
    // Check if date is a holiday
    function isHoliday(date) {
        if (isNepaliCalendar) {
            const nepaliDate = convertToNepaliDate(date.getFullYear(), date.getMonth(), date.getDate());
            const nepaliDateKey = `${nepaliDate.year}-${String(nepaliDate.month + 1).padStart(2, '0')}-${String(nepaliDate.day).padStart(2, '0')}`;
            return holidays.nepali[nepaliDateKey];
        } else {
            const dateKey = formatDateKey(date);
            return holidays.english[dateKey];
        }
    }
    
    // Get holiday name
    function getHolidayName(date) {
        if (isNepaliCalendar) {
            const nepaliDate = convertToNepaliDate(date.getFullYear(), date.getMonth(), date.getDate());
            const nepaliDateKey = `${nepaliDate.year}-${String(nepaliDate.month + 1).padStart(2, '0')}-${String(nepaliDate.day).padStart(2, '0')}`;
            return holidays.nepali[nepaliDateKey];
        } else {
            const dateKey = formatDateKey(date);
            return holidays.english[dateKey];
        }
    }
    
    // Convert English date to Nepali date
    function convertToNepaliDate(year, month, day) {
        // This is a more accurate conversion than the original code
        // Using a reference date approach
        
        // Reference: Jan 1, 2025 is Poush 17, 2081 in Nepali calendar
        const referenceEnglishDate = new Date(2025, 0, 1); // Jan 1, 2025
        const referenceNepaliYear = 2081;
        const referenceNepaliMonth = 8; // Poush (0-indexed)
        const referenceNepaliDay = 17;
        
        // Nepali month names and days in month
        const nepaliMonths = [
            '', '', '', '', '', '', 
            '', '', '', '', '', ''
        ];
        
        const nepaliDaysInMonth = {
            2081: [31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 29, 30], // Days in each month for Nepali year 2081
            2082: [31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30]  // Days in each month for Nepali year 2082
        };
        
        // Calculate days difference
        const targetDate = new Date(year, month, day);
        const millisecondsPerDay = 24 * 60 * 60 * 1000;
        const daysDifference = Math.round((targetDate - referenceEnglishDate) / millisecondsPerDay);
        
        // Start with reference Nepali date and add the difference
        let nepaliYear = referenceNepaliYear;
        let nepaliMonth = referenceNepaliMonth;
        let nepaliDay = referenceNepaliDay;
        
        let remainingDays = daysDifference;
        
        if (remainingDays >= 0) {
            // Moving forward in time
            while (remainingDays > 0) {
                const daysInCurrentMonth = nepaliDaysInMonth[nepaliYear][nepaliMonth];
                const daysRemainingInMonth = daysInCurrentMonth - nepaliDay;
                
                if (remainingDays <= daysRemainingInMonth) {
                    nepaliDay += remainingDays;
                    remainingDays = 0;
                } else {
                    remainingDays -= (daysRemainingInMonth + 1);
                    nepaliMonth++;
                    nepaliDay = 1;
                    
                    if (nepaliMonth > 11) {
                        nepaliMonth = 0;
                        nepaliYear++;
                    }
                }
            }
        } else {
            // Moving backward in time
            remainingDays = Math.abs(remainingDays);
            while (remainingDays > 0) {
                if (nepaliDay > 1) {
                    nepaliDay--;
                    remainingDays--;
                } else {
                    nepaliMonth--;
                    if (nepaliMonth < 0) {
                        nepaliMonth = 11;
                        nepaliYear--;
                    }
                    nepaliDay = nepaliDaysInMonth[nepaliYear][nepaliMonth];
                    remainingDays--;
                }
            }
        }
        
        // Convert Nepali digits if needed
        const nepaliDigits = ['', '', '', '', '', '', '', '', '', ''];
        
        return {
            year: nepaliYear,
            month: nepaliMonth,
            day: nepaliDay,
            monthName: nepaliMonths[nepaliMonth],
            // Convert regular digits to Nepali digits
            dayNepali: nepaliDay.toString().split('').map(d => nepaliDigits[parseInt(d)]).join(''),
            yearNepali: nepaliYear.toString().split('').map(d => nepaliDigits[parseInt(d)]).join('')
        };
    }
    
    // Convert Nepali date to English date
    function convertToEnglishDate(nepaliYear, nepaliMonth, nepaliDay) {
        // Reference: Poush 17, 2081 is Jan 1, 2025 in English calendar
        const referenceEnglishDate = new Date(2025, 0, 1); // Jan 1, 2025
        const referenceNepaliYear = 2081;
        const referenceNepaliMonth = 8; // Poush (0-indexed)
        const referenceNepaliDay = 17;
        
        const nepaliDaysInMonth = {
            2081: [31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 29, 30], // Days in each month for Nepali year 2081
            2082: [31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30]  // Days in each month for Nepali year 2082
        };
        
        // Calculate days difference from reference Nepali date
        let daysDifference = 0;
        
        // For different years
        for (let year = referenceNepaliYear; year < nepaliYear; year++) {
            for (let month = 0; month < 12; month++) {
                daysDifference += nepaliDaysInMonth[year][month];
            }
        }
        
        // For same year but different months
        for (let month = referenceNepaliMonth; month < nepaliMonth; month++) {
            daysDifference += nepaliDaysInMonth[nepaliYear][month];
        }
        
        // For same month but different days
        daysDifference += nepaliDay - referenceNepaliDay;
        
        // Calculate the resulting English date
        const resultEnglishDate = new Date(referenceEnglishDate);
        resultEnglishDate.setDate(resultEnglishDate.getDate() + daysDifference);
        
        return {
            year: resultEnglishDate.getFullYear(),
            month: resultEnglishDate.getMonth(),
            day: resultEnglishDate.getDate()
        };
    }
    
    // Display events for selected date
    function displayEvents(date) {
        const dateKey = formatDateKey(date);
        let formattedDate;
        let holidayInfo = '';
        
        if (isNepaliCalendar) {
            const nepaliDate = convertToNepaliDate(date.getFullYear(), date.getMonth(), date.getDate());
            formattedDate = `${nepaliDate.dayNepali} ${nepaliDate.monthName} ${nepaliDate.yearNepali}`;
            
            // Check for holiday
            const nepaliDateKey = `${nepaliDate.year}-${String(nepaliDate.month + 1).padStart(2, '0')}-${String(nepaliDate.day).padStart(2, '0')}`;
            if (holidays.nepali[nepaliDateKey]) {
                holidayInfo = `<div class="holiday-badge">${holidays.nepali[nepaliDateKey]}</div>`;
            }
            
            // Also show English date for reference
            const englishDateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const englishDate = date.toLocaleDateString('en-US', englishDateOptions);
            formattedDate += `<div class="english-date">(${englishDate})</div>`;
        } else {
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            formattedDate = date.toLocaleDateString('en-US', dateOptions);
            
            // Check for holiday
            if (holidays.english[dateKey]) {
                holidayInfo = `<div class="holiday-badge">${holidays.english[dateKey]}</div>`;
            }
            
            // Show Nepali date for reference
            const nepaliDate = convertToNepaliDate(date.getFullYear(), date.getMonth(), date.getDate());
            formattedDate += `<div class="nepali-date">${nepaliDate.dayNepali} ${nepaliDate.monthName} ${nepaliDate.yearNepali}</div>`;
        }
        
        let html = '<div class="event-date">' + formattedDate + '</div>' + holidayInfo;
        
        if (events[dateKey] && events[dateKey].length > 0) {
            html += '<ul class="event-list">';
            events[dateKey].forEach(function(event) {
                html += `
                    <li class="event-item" data-event-id="${event.id}">
                        <div class="event-content">
                            <span>${event.description}</span>
                            ${event.isPublic ? '<span class="public-badge">Public</span>' : '<span class="private-badge">Private</span>'}
                        </div>
                        <button class="delete-event" data-id="${event.id}"></button>
                    </li>`;
            });
            html += '</ul>';
        } else {
            html += '<div class="no-events">No events for this day</div>';
        }
        
        eventsPanel.innerHTML = html;
        
        // Add event listeners for delete buttons
        document.querySelectorAll('.delete-event').forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation();
                const eventId = parseInt(this.getAttribute('data-id'));
                
                // Filter out the event with matching ID
                events[dateKey] = events[dateKey].filter(event => event.id !== eventId);
                
                // Remove the date key if no events remain
                if (events[dateKey].length === 0) {
                    delete events[dateKey];
                }
                
                // Refresh the events panel
                displayEvents(selectedDate);
                
                // Refresh the calendar to update event indicators
                generateCalendar(currentMonth, currentYear);
            });
        });
    }
    
    // Generate calendar grid
    function generateCalendar(month, year) {
        // Clear previous days
        calendarDaysElement.innerHTML = '';
        
        // Update header month and year
        if (isNepaliCalendar) {
            const nepaliMonths = [
                '', '', '', '', '', '', 
                '', '', '', '', '', ''
            ];
            
            const nepaliDate = convertToNepaliDate(year, month, 1);
            const nepaliDigits = ['', '', '', '', '', '', '', '', '', ''];
            const nepaliYear = nepaliDate.year.toString().split('').map(d => nepaliDigits[parseInt(d)]).join('');
            
            monthYearElement.textContent = nepaliMonths[nepaliDate.month] + ' ' + nepaliYear;
        } else {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            monthYearElement.textContent = monthNames[month] + ' ' + year;
        }
        
        // Get first day of month and number of days
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        // Get last day of previous month
        const prevMonthDays = new Date(year, month, 0).getDate();
        
        // Previous month's days
        for (let i = 0; i < firstDay; i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day inactive';
            
            const dayNum = prevMonthDays - (firstDay - i - 1);
            const prevDate = new Date(year, month - 1, dayNum);
            
            if (isNepaliCalendar) {
                const prevMonth = month - 1 < 0 ? 11 : month - 1;
                const prevYear = prevMonth === 11 ? year - 1 : year;
                const nepaliDate = convertToNepaliDate(prevYear, prevMonth, dayNum);
                dayElement.textContent = nepaliDate.dayNepali;
            } else {
                dayElement.textContent = dayNum;
            }
            
            calendarDaysElement.appendChild(dayElement);
        }
        
        // Current month's days
        const today = new Date();
        for (let i = 1; i <= daysInMonth; i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day';
            
            // Create date object for this calendar day
            const calendarDate = new Date(year, month, i);
            
            // Display the date
            if (isNepaliCalendar) {
                const nepaliDate = convertToNepaliDate(year, month, i);
                dayElement.textContent = nepaliDate.dayNepali;
            } else {
                dayElement.textContent = i;
            }
            
            // Check if it's today
            if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                dayElement.classList.add('today');
            }
            
            // Check if it's the selected date
            if (selectedDate && i === selectedDate.getDate() && month === selectedDate.getMonth() && year === selectedDate.getFullYear()) {
                dayElement.classList.add('selected');
            }
            
            // Check if date has events
            if (hasEvents(calendarDate)) {
                dayElement.classList.add('event');
            }
            
            // Check if date is a holiday
            if (isHoliday(calendarDate)) {
                dayElement.classList.add('holiday');
                
                // Add tooltip for holiday name
                const holidayName = getHolidayName(calendarDate);
                dayElement.setAttribute('title', holidayName);
                
                // Add holiday indicator dot
                const holidayDot = document.createElement('span');
                holidayDot.className = 'holiday-dot';
                dayElement.appendChild(holidayDot);
            }
            
            // Handle click on day
            dayElement.addEventListener('click', function() {
                // Remove selected class from all days
                document.querySelectorAll('.day.selected').forEach(function(el) {
                    el.classList.remove('selected');
                });
                
                // Add selected class to clicked day
                dayElement.classList.add('selected');
                
                // Update selected date
                selectedDate = new Date(year, month, i);
                
                // Display events for this date
                displayEvents(selectedDate);
            });
            
            calendarDaysElement.appendChild(dayElement);
        }
        
        // Next month's days to fill remaining cells
        const totalCells = 42; // 6 rows  7 days
        const remainingCells = totalCells - (firstDay + daysInMonth);
        
        for (let i = 0; i < remainingCells; i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day inactive';
            
            const dayNum = i + 1;
            
            if (isNepaliCalendar) {
                const nextMonth = month + 1 > 11 ? 0 : month + 1;
                const nextYear = nextMonth === 0 ? year + 1 : year;
                const nepaliDate = convertToNepaliDate(nextYear, nextMonth, dayNum);
                dayElement.textContent = nepaliDate.dayNepali;
            } else {
                dayElement.textContent = dayNum;
            }
            
            calendarDaysElement.appendChild(dayElement);
        }
        
        // If no date is selected, select today (first time) or keep current selection
        if (!selectedDate) {
            selectedDate = new Date();
            displayEvents(selectedDate);
        }
    }
    
    // Check for shared calendar in URL
    function loadSharedCalendar() {
        const urlParams = new URLSearchParams(window.location.search);
        const sharedParam = urlParams.get('shared');
        
        if (sharedParam) {
            try {
                const sharedEvents = JSON.parse(atob(sharedParam));
                
                // Merge shared events with user's events (or replace entirely)
                // This implementation merges them, keeping user's private events
                for (const dateKey in sharedEvents) {
                    if (!events[dateKey]) {
                        events[dateKey] = [];
                    }
                    
                    // Add shared events with isShared flag
                    sharedEvents[dateKey].forEach(event => {
                        // Check if this shared event is already in the user's calendar
                        const isDuplicate = events[dateKey].some(e => 
                            e.description === event.description);
                        
                        if (!isDuplicate) {
                            events[dateKey].push({
                                ...event,
                                isShared: true
                            });
                        }
                    });
                }
                
                // Show notification
                alert('Shared calendar events have been loaded!');
                
                // Refresh calendar
                generateCalendar(currentMonth, currentYear);
            } catch (e) {
                console.error('Error loading shared calendar:', e);
            }
        }
    }
    
    // Initialize weekday labels
    updateWeekdayLabels();
    
    // Initialize calendar with current month
    generateCalendar(currentMonth, currentYear);
    
    // Load shared calendar if present in URL
    loadSharedCalendar();
});

document.getElementById('khojum-logo').addEventListener('click', function() {
    window.location.href = 'index.html'; // Navigate to the main page
});

document.addEventListener('DOMContentLoaded', function() {
    // Add expand icons to all event images
    document.querySelectorAll('.event-image').forEach(imageContainer => {
        // Create expand icon
        const expandIcon = document.createElement('div');
        expandIcon.className = 'expand-image-icon';
        expandIcon.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
            </svg>`;
        imageContainer.appendChild(expandIcon);

        // Extract background image URL
        const computedStyle = window.getComputedStyle(imageContainer);
        const backgroundImage = computedStyle.backgroundImage;
        const imageUrl = backgroundImage.slice(4, -1).replace(/["']/g, "");

        // Store the original image URL as a data attribute
        imageContainer.setAttribute('data-image-url', imageUrl);

        // Add click event to the entire image container
        imageContainer.addEventListener('click', function(e) {
            const imgUrl = this.getAttribute('data-image-url');
            if (imgUrl) {
                const modal = document.getElementById('imageModal');
                const modalImg = document.getElementById('modalImage');
                modal.style.display = "block";
                modalImg.src = imgUrl;
            }
        });
    });

    // Image Modal functionality
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');

    // Close modal when clicking anywhere
    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            this.style.display = "none";
        }
    });

    // Close modal with Escape key
    window.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.style.display === 'block') {
            modal.style.display = "none";
        }
    });

    // Handle modal image loading error
    modalImg.addEventListener('error', function() {
        console.error('Failed to load image');
        modal.style.display = "none";
        // Optionally show an error message to the user
        alert('Failed to load image');
    });
});

document.addEventListener('DOMContentLoaded', function() {
    // Function to check if a date is today
    function isToday(date) {
        const today = new Date();
        return date.getDate() === today.getDate() &&
               date.getMonth() === today.getMonth() &&
               date.getFullYear() === today.getFullYear();
    }

    // Function to check if a date is tomorrow
    function isTomorrow(date) {
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        return date.getDate() === tomorrow.getDate() &&
               date.getMonth() === tomorrow.getMonth() &&
               date.getFullYear() === tomorrow.getFullYear();
    }

    // Filter button click handlers
    document.querySelectorAll('.filter-button').forEach(button => {
        button.addEventListener('click', function() {
            const filter = this.getAttribute('data-filter');
            
            // Remove active class from all buttons
            document.querySelectorAll('.filter-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            this.classList.add('active');

            // Filter events
            const eventCards = document.querySelectorAll('.event-card');
            let foundEvents = false;

            eventCards.forEach(card => {
                const dateText = card.querySelector('.event-date').textContent;
                const eventDate = new Date(dateText);

                switch(filter) {
                    case 'today':
                        card.style.display = isToday(eventDate) ? 'block' : 'none';
                        if (isToday(eventDate)) foundEvents = true;
                        break;
                    case 'tomorrow':
                        card.style.display = isTomorrow(eventDate) ? 'block' : 'none';
                        if (isTomorrow(eventDate)) foundEvents = true;
                        break;
                    case 'all':
                        card.style.display = 'block';
                        foundEvents = true;
                        break;
                    default:
                        // Handle category filtering
                        const category = card.querySelector('.event-category').textContent.toLowerCase();
                        card.style.display = (filter === 'all' || category === filter.toLowerCase()) ? 'block' : 'none';
                        if (card.style.display === 'block') foundEvents = true;
                }
            });

            // Show/hide no events message
            const messageContainer = document.getElementById('no-events-message') || 
                                  createNoEventsMessage();
            messageContainer.style.display = foundEvents ? 'none' : 'block';
            messageContainer.textContent = foundEvents ? '' : 
                                        `No events ${filter === 'today' ? 'today' : 
                                          filter === 'tomorrow' ? 'tomorrow' : 
                                          'in this category'}`;
        });
    });

    function createNoEventsMessage() {
        const messageContainer = document.createElement('div');
        messageContainer.id = 'no-events-message';
        messageContainer.style.cssText = `
            width: 100%;
            padding: 20px;
            text-align: center;
            color: #666;
            background: #f8f8f8;
            border-radius: 8px;
            margin: 20px 0;
            grid-column: 1 / -1;
        `;
        document.querySelector('.events-grid').appendChild(messageContainer);
        return messageContainer;
    }

    // Trigger "All" filter by default instead of "Today"
    document.querySelector('.filter-button[data-filter="all"]').click();
});

document.addEventListener('DOMContentLoaded', function() {
    // Function to generate structured data for events
    function generateEventStructuredData() {
        const eventCards = document.querySelectorAll('.event-card');
        const structuredData = {
            "@context": "https://schema.org",
            "@type": "ItemList",
            "itemListElement": []
        };

        eventCards.forEach((card, index) => {
            const eventData = {
                "@type": "Event",
                "name": card.querySelector('.event-title')?.textContent,
                "description": card.querySelector('.event-description')?.textContent,
                "startDate": card.querySelector('.event-date')?.getAttribute('data-date'),
                "location": {
                    "@type": "Place",
                    "name": card.querySelector('.event-venue')?.textContent,
                    "address": {
                        "@type": "PostalAddress",
                        "addressLocality": "Kathmandu",
                        "addressRegion": "Bagmati",
                        "addressCountry": "NP"
                    }
                },
                "image": card.querySelector('.event-image')?.getAttribute('data-image-url'),
                "offers": {
                    "@type": "Offer",
                    "price": card.querySelector('.event-price')?.textContent.replace(/[^0-9]/g, ''),
                    "priceCurrency": "NPR"
                }
            };
            structuredData.itemListElement.push(eventData);
        });

        // Update or create structured data script tag
        let scriptTag = document.querySelector('script[data-type="event-structured-data"]');
        if (!scriptTag) {
            scriptTag = document.createElement('script');
            scriptTag.setAttribute('type', 'application/ld+json');
            scriptTag.setAttribute('data-type', 'event-structured-data');
            document.head.appendChild(scriptTag);
        }
        scriptTag.textContent = JSON.stringify(structuredData);
    }

    // Generate structured data when page loads
    generateEventStructuredData();

    // Update structured data when events are filtered
    document.querySelectorAll('.filter-button').forEach(button => {
        button.addEventListener('click', () => {
            setTimeout(generateEventStructuredData, 100);
        });
    });
});

    // Add this script to set today's date in the badge
    document.addEventListener('DOMContentLoaded', function() {
        const today = new Date();
        const day = today.getDate(); // Get the current day
        document.getElementById('todayDate').textContent = day; // Set the day in the badge
    });

    // Add this script to handle full-screen functionality
    document.getElementById('fullScreenBtn').addEventListener('click', function() {
        const calendarPopup = document.getElementById('calendarPopup');
        
        if (calendarPopup.requestFullscreen) {
            calendarPopup.requestFullscreen();
        } else if (calendarPopup.mozRequestFullScreen) { // Firefox
            calendarPopup.mozRequestFullScreen();
        } else if (calendarPopup.webkitRequestFullscreen) { // Chrome, Safari and Opera
            calendarPopup.webkitRequestFullscreen();
        } else if (calendarPopup.msRequestFullscreen) { // IE/Edge
            calendarPopup.msRequestFullscreen();
        }
    });

    // Exit full-screen mode when pressing the Escape key
    document.addEventListener('fullscreenchange', function() {
        if (!document.fullscreenElement) {
            // Handle exit from full-screen mode if needed
        }
    });

    document.addEventListener('DOMContentLoaded', function() {
        const filterToggle = document.getElementById('filterToggle');
        const filterDropdown = document.getElementById('filterDropdown');

        filterToggle.addEventListener('click', function() {
            filterDropdown.style.display = filterDropdown.style.display === 'block' ? 'none' : 'block';
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!filterToggle.contains(event.target) && !filterDropdown.contains(event.target)) {
                filterDropdown.style.display = 'none';
            }
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        // Toggle share dropdown
        const shareButtons = document.querySelectorAll('.share-button');
        
        // Close all dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.share-button')) {
                shareButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
            }
        });
        
        shareButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent triggering document click
                this.classList.toggle('active');
                
                // Close other dropdowns
                shareButtons.forEach(btn => {
                    if (btn !== this) {
                        btn.classList.remove('active');
                    }
                });
            });
            
            // Get share options within this button
            const shareOptions = button.querySelectorAll('.share-option');
            
            shareOptions.forEach(option => {
                option.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent triggering document click
                    
                    // Get the event ID from the data attribute
                    const eventId = this.getAttribute('data-id');
                    
                    // Find the event data based on the ID (you may need to adjust this based on your data structure)
                    const eventData = events.find(event => event.id == eventId); // Assuming 'events' is your array of event objects
                    
                    if (eventData) {
                        const eventTitle = eventData.title;
                        const eventUrl = eventData.url; // Use the URL from the event data
                        
                        // Handle different share platforms
                        const platform = this.getAttribute('data-platform');
                        
                        switch(platform) {
                            case 'whatsapp':
                                window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(eventTitle + ' - ' + eventUrl)}`, '_blank');
                                break;
                            case 'instagram':
                                // Instagram doesn't support direct sharing via URL, so copy to clipboard and show instructions
                                copyToClipboard(eventUrl);
                                alert('Link copied to clipboard. Open Instagram and paste in your story or direct message.');
                                break;
                            case 'facebook':
                                window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(eventUrl)}`, '_blank');
                                break;
                            case 'twitter':
                                window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(eventTitle)}&url=${encodeURIComponent(eventUrl)}`, '_blank');
                                break;
                            case 'copy':
                                copyToClipboard(eventUrl);
                                showCopySuccess();
                                break;
                        }
                    }
                    
                    // Close dropdown after selection
                    button.classList.remove('active');
                });
            });
        });
        
        // Function to copy text to clipboard
        function copyToClipboard(text) {
            const input = document.createElement('input');
            input.style.position = 'fixed';
            input.style.opacity = 0;
            input.value = text;
            document.body.appendChild(input);
            
            input.select();
            document.execCommand('copy');
            document.body.removeChild(input);
        }
        
        // Function to show copy success message
        function showCopySuccess() {
            const successMsg = document.querySelector('.copy-success');
            successMsg.classList.add('show');
            
            setTimeout(() => {
                successMsg.classList.remove('show');
            }, 2000);
        }
    });

    function loadMissionPage() {
        const contentDiv = document.getElementById('content'); // Assuming you have a div with id 'content' to load the new page
        fetch('mission.html')
            .then(response => response.text())
            .then(data => {                contentDiv.innerHTML = data; // Load the content of mission.html
                contentDiv.classList.add('fade-in'); // Add a class for animation
                setTimeout(() => {
                    contentDiv.classList.remove('fade-in'); // Remove class after animation
                }, 500); // Adjust duration to match your CSS animation
            })
            .catch(error => console.error('Error loading mission page:', error));
    }
    // Nepal Trekking Chatbot
// This script creates a simple chatbot that answers questions about trekking in Nepal

// Knowledge base with questions and answers
const knowledgeBase = [
  {
    question: "What are the most popular treks in Nepal?",
    answer: "The most popular treks in Nepal include the Annapurna Circuit, Everest Base Camp, Langtang Valley, and Manaslu Circuit."
  },
  {
    question: "What is the Annapurna Circuit trek?",
    answer: "The Annapurna Circuit is a renowned trek known for its diverse landscapes, including jungle, alpine forests, and high mountain passes like Thorong La."
  },
  {
    question: "How long does the Annapurna Circuit trek take?",
    answer: "The Annapurna Circuit trek typically takes 10 to 17 days to complete."
  },
  {
    question: "What is the best time to trek the Annapurna Circuit?",
    answer: "The best time to trek the Annapurna Circuit is from March to May and September to November."
  },
  {
    question: "What is the Everest Base Camp trek?",
    answer: "The Everest Base Camp trek is a popular route that leads to the base of Mount Everest, offering stunning Himalayan views."
  },
  {
    question: "How long does the Everest Base Camp trek take?",
    answer: "The Everest Base Camp trek usually takes about 17 days to complete."
  },
  {
    question: "What is the Langtang Valley trek?",
    answer: "The Langtang Valley trek is a shorter trek near Kathmandu, known for its scenic views of the Langtang Himalayas and Tibetan culture."
  },
  {
    question: "How long does the Langtang Valley trek take?",
    answer: "The Langtang Valley trek typically takes 7 to 8 days."
  },
  {
    question: "What is the Manaslu Circuit trek?",
    answer: "The Manaslu Circuit trek is an alternative to the Annapurna Circuit, offering similar dramatic scenery with fewer crowds."
  },
  {
    question: "How long does the Manaslu Circuit trek take?",
    answer: "The Manaslu Circuit trek usually takes about 16 days to complete."
  },
  {
    question: "What is the best trek for beginners in Nepal?",
    answer: "The Ghandruk Loop or Langtang Valley trek are good options for beginners due to their relatively easy terrain and short duration."
  },
  {
    question: "What are the best short treks in Nepal?",
    answer: "Short treks in Nepal include the Ghandruk Loop and the Tamang Heritage Trail."
  },
  {
    question: "What is the Tamang Heritage Trail?",
    answer: "The Tamang Heritage Trail is a cultural trek that focuses on Tamang villages and Buddhist culture near the Langtang region."
  },
  {
    question: "How do I prepare for trekking in Nepal?",
    answer: "Preparation includes physical conditioning, obtaining necessary permits, and packing appropriate gear for the season."
  },
  {
    question: "What gear do I need for trekking in Nepal?",
    answer: "Essential gear includes hiking boots, layers of clothing, a backpack, and a first aid kit."
  },
  {
    question: "Do I need a guide for trekking in Nepal?",
    answer: "While not mandatory, hiring a guide can be beneficial for navigating trails and understanding local culture."
  },
  {
    question: "What are the costs associated with trekking in Nepal?",
    answer: "Costs include trekking permits, accommodation, food, and guide fees, which vary depending on the trek and duration."
  },
  {
    question: "How do I obtain trekking permits in Nepal?",
    answer: "Trekking permits can be obtained through the Nepal Tourism Board or local trekking agencies."
  },
  {
    question: "What are the health risks associated with trekking in Nepal?",
    answer: "Common health risks include altitude sickness, dehydration, and injuries from falls or overexertion."
  },
  {
    question: "How can I stay safe while trekking in Nepal?",
    answer: "Staying safe involves being aware of weather conditions, using proper gear, staying hydrated, and following local advice."
  }
];

// Additional common questions tourists might ask
const additionalQuestions = [
  {
    question: "What is altitude sickness?",
    answer: "Altitude sickness, or Acute Mountain Sickness (AMS), occurs when you ascend too quickly without proper acclimatization. Symptoms include headache, nausea, dizziness, and fatigue. The best prevention is to ascend slowly and stay hydrated."
  },
  {
    question: "Can I trek solo in Nepal?",
    answer: "Yes, solo trekking is possible in many areas of Nepal. However, for safety, it's recommended to hire a guide or join a group, especially for remote areas or challenging treks."
  },
  {
    question: "What is teahouse trekking?",
    answer: "Teahouse trekking refers to staying in basic lodges or 'teahouses' along the trekking routes. These provide simple accommodation and meals, meaning you don't need to carry camping equipment."
  },
  {
    question: "How difficult is the Everest Base Camp trek?",
    answer: "The Everest Base Camp trek is considered moderately difficult. The main challenges are the high altitude and long walking days. Good physical fitness and proper acclimatization are essential."
  },
  {
    question: "What's the best trek for seeing local culture?",
    answer: "The Tamang Heritage Trail and Lower Mustang trek are excellent for experiencing local culture, traditional villages, and Buddhist monasteries."
  },
  {
    question: "hi",
    answer : "Hello sathi (friend), how can i help you today?"
  },
  {
    question: "namaste",
    answer : "Namaste sathi (friend), how can i help you today?"
  },
  {
    question: "jojo lopa",
    answer : "hey there, how can i help you today?"
  },
  {
    question: "thank you",
    answer : "No worries sathi, Can't wait you to join us for your best trekking experience in nepal!!"
  },
  {
    question: "i love you ",
    answer: "sorry priya, i'm very loyal person, i love you as a friend."
  },

  // Advanced Nepal Trekking Chatbot with Dynamic Suggestions and Expanded Knowledge Base

// Comprehensive knowledge base with 120+ questions and answers about Nepal trekking and tourism

  {
    question: "What are the most popular treks in Nepal?",
    answer: "The most popular treks in Nepal include the Annapurna Circuit, Everest Base Camp, Langtang Valley, Manaslu Circuit, Gokyo Lakes, Upper Mustang, and Poon Hill trek.",
    categories: ["popular", "treks", "general"]
  },
  {
    question: "What is the Annapurna Circuit trek?",
    answer: "The Annapurna Circuit is a renowned trek that encircles the Annapurna massif, offering diverse landscapes including jungle, alpine forests, arid plateaus, and the challenging Thorong La pass (5,416m). It showcases stunning mountain views, traditional villages, and ancient monasteries.",
    categories: ["annapurna", "circuit", "specific trek"]
  },
  {
    question: "How long does the Annapurna Circuit trek take?",
    answer: "The Annapurna Circuit trek typically takes 10 to 17 days to complete, depending on your pace and whether you take side trips. The traditional full circuit is about 160-230 km, but many trekkers now end at Jomsom due to road construction.",
    categories: ["annapurna", "duration", "specific trek"]
  },
  {
    question: "What is the best time to trek the Annapurna Circuit?",
    answer: "The best time to trek the Annapurna Circuit is from March to May (spring) and September to November (autumn). These periods offer stable weather, clear skies for mountain views, and comfortable temperatures. Avoid summer (monsoon season) due to rain and leeches, and winter for extreme cold at high passes.",
    categories: ["annapurna", "timing", "weather", "specific trek"]
  },
  {
    question: "What is the Everest Base Camp trek?",
    answer: "The Everest Base Camp trek is a legendary journey that leads to the foot of the world's highest peak, Mount Everest (8,848m). The route passes through Sherpa villages, Buddhist monasteries, and dramatic suspension bridges, culminating at the base camp (5,364m) with views of the Khumbu Icefall.",
    categories: ["everest", "specific trek"]
  },
  {
    question: "How long does the Everest Base Camp trek take?",
    answer: "The classic Everest Base Camp trek usually takes about 12-14 days to complete. This includes necessary acclimatization days to prevent altitude sickness. With side trips to places like Gokyo Lakes or Chhukung Ri, it can extend to 17-20 days.",
    categories: ["everest", "duration", "specific trek"]
  },
  {
    question: "What is the Langtang Valley trek?",
    answer: "The Langtang Valley trek is a shorter trek north of Kathmandu, known for its scenic views of the Langtang Himalayas, alpine meadows, and rich Tibetan-influenced culture. It was affected by the 2015 earthquake but has been rebuilt and is now welcoming trekkers again.",
    categories: ["langtang", "specific trek"]
  },
  {
    question: "How long does the Langtang Valley trek take?",
    answer: "The Langtang Valley trek typically takes 7 to 8 days to complete. This makes it ideal for trekkers with limited time who still want to experience the Himalayan landscapes and culture.",
    categories: ["langtang", "duration", "specific trek"]
  },
  {
    question: "What is the Manaslu Circuit trek?",
    answer: "The Manaslu Circuit trek is a stunning adventure around Mount Manaslu (8,163m), the world's eighth highest peak. It offers similar dramatic scenery to the Annapurna Circuit but with fewer crowds. The trek passes through remote villages, diverse ecosystems, and crosses the challenging Larkya La pass (5,160m).",
    categories: ["manaslu", "specific trek"]
  },
  {
    question: "How long does the Manaslu Circuit trek take?",
    answer: "The Manaslu Circuit trek usually takes about 14-16 days to complete. This includes necessary acclimatization days and the time needed to properly experience the remote villages and landscapes along the route.",
    categories: ["manaslu", "duration", "specific trek"]
  },
  {
    question: "What is the best trek for beginners in Nepal?",
    answer: "For beginners, the Ghorepani Poon Hill trek (4-5 days), Langtang Valley trek (7-8 days), and Mardi Himal trek (5-7 days) are excellent choices. These routes offer magnificent mountain views with moderate difficulty, good teahouse facilities, and don't reach extreme altitudes.",
    categories: ["beginner", "experience level", "recommendation"]
  },
  {
    question: "What are the best short treks in Nepal?",
    answer: "The best short treks in Nepal (under a week) include the Ghorepani Poon Hill trek (4-5 days), Mardi Himal trek (5 days), Tamang Heritage Trail (6 days), Nagarkot to Dhulikhel trek (2-3 days), and the Royal Trek (4 days). These offer excellent mountain views and cultural experiences in a limited timeframe.",
    categories: ["short treks", "duration", "recommendation"]
  },
  {
    question: "What is the Tamang Heritage Trail?",
    answer: "The Tamang Heritage Trail is a culturally rich trek near the Langtang region that focuses on the Tamang ethnic group's villages, traditions, and Buddhist culture. It features hot springs at Tatopani, traditional homes, and magnificent views of the Langtang and Ganesh Himal ranges. The trail typically takes 6 days to complete.",
    categories: ["tamang", "cultural", "specific trek"]
  },
  {
    question: "How do I prepare for trekking in Nepal?",
    answer: "Preparation for trekking in Nepal includes: 1) Physical conditioning with cardio and strength training 2-3 months before your trek; 2) Researching and obtaining necessary permits; 3) Packing appropriate gear for the season; 4) Getting travel insurance that covers high-altitude trekking and emergency evacuation; 5) Learning about altitude sickness prevention; and 6) Planning your itinerary with acclimatization days.",
    categories: ["preparation", "planning", "general"]
  },
  {
    question: "What gear do I need for trekking in Nepal?",
    answer: "Essential gear for trekking in Nepal includes: 1) Good hiking boots (broken in before your trip); 2) Moisture-wicking and insulating layers of clothing; 3) A warm down jacket and thermal underwear for high altitudes; 4) Rain gear; 5) A comfortable backpack (30-40L for teahouse treks); 6) Sun protection (hat, sunglasses, sunscreen); 7) Headlamp with extra batteries; 8) Trekking poles; 9) Water purification method; and 10) A basic first aid kit.",
    categories: ["gear", "equipment", "preparation"]
  },
  {
    question: "Do I need a guide for trekking in Nepal?",
    answer: "While not mandatory for many treks, hiring a guide is highly recommended for safety, cultural insights, and supporting the local economy. Some remote areas like Upper Mustang, Manaslu, and Tsum Valley legally require a guide. Guides help with navigation, translation, accommodation arrangements, and can be crucial in emergencies. Independent trekking is permitted on popular routes like Annapurna and Everest.",
    categories: ["guide", "preparation", "planning"]
  },
  {
    question: "What are the costs associated with trekking in Nepal?",
    answer: "Trekking costs in Nepal include: 1) Permits ($20-$500 depending on the region); 2) Guide fees ($20-$30 per day); 3) Porter fees ($15-$25 per day); 4) Teahouse accommodation ($5-$20 per night); 5) Food ($15-$30 per day); 6) Transportation to/from trailheads ($10-$180); 7) Equipment rental if needed; and 8) Insurance. Budget trekkers can manage on $25-$30 per day while trekking, while organized tours can cost $80-$180 per day.",
    categories: ["cost", "budget", "planning"]
  },
  {
    question: "How do I obtain trekking permits in Nepal?",
    answer: "Trekking permits in Nepal can be obtained through the Nepal Tourism Board offices in Kathmandu or Pokhara, or more commonly through registered trekking agencies. You'll need your passport, photos, and the permit fees. Most treks require the TIMS card (Trekkers' Information Management System, $10-$20) and specific conservation area permits for regions like Annapurna, Everest, or Langtang ($25-$30). Restricted areas like Upper Mustang require additional special permits ($500 for 10 days).",
    categories: ["permits", "preparation", "planning"]
  },
  {
    question: "What are the health risks associated with trekking in Nepal?",
    answer: "The main health risks while trekking in Nepal include: 1) Altitude sickness (AMS, HAPE, HACE) - the most serious concern above 2,500m; 2) Waterborne illnesses from contaminated water; 3) Foodborne illnesses; 4) Physical injuries from falls or overexertion; 5) Hypothermia at high altitudes; 6) Sunburn and snow blindness; and 7) Respiratory infections from dry, cold air and dust. Proper acclimatization, hydration, hygiene, and preparation can mitigate most of these risks.",
    categories: ["health", "safety", "risks"]
  },
  {
    question: "How can I stay safe while trekking in Nepal?",
    answer: "To stay safe while trekking in Nepal: 1) Trek with a guide or group; 2) Follow proper acclimatization schedules; 3) Stay hydrated and well-nourished; 4) Be prepared for weather changes with appropriate clothing; 5) Never trek alone; 6) Use a map, compass or GPS; 7) Get comprehensive travel insurance; 8) Register with your embassy; 9) Keep emergency contacts available; 10) Respect local advice about trail conditions; and 11) Know the symptoms of altitude sickness and how to respond.",
    categories: ["safety", "health", "general"]
  },
  
  // Additional 100+ questions and answers
  {
    question: "What is the best time of year to trek in Nepal?",
    answer: "The best times for trekking in Nepal are during spring (March to May) and autumn (September to November). Spring offers blooming rhododendron forests and warmer temperatures, while autumn provides the clearest mountain views with stable weather. Summer (June-August) brings monsoon rains making trails slippery and obscuring views. Winter (December-February) is possible for lower altitude treks but brings snow and extreme cold at higher elevations.",
    categories: ["timing", "weather", "general"]
  },
  {
    question: "What is altitude sickness and how can I prevent it?",
    answer: "Altitude sickness (Acute Mountain Sickness or AMS) occurs when ascending too quickly without proper acclimatization, typically above 2,500m. Symptoms include headache, nausea, dizziness, fatigue, loss of appetite, and sleep disturbances. Prevent it by: 1) Ascending slowly (no more than 300-500m per day above 3,000m); 2) Taking acclimatization days; 3) Staying hydrated; 4) Avoiding alcohol; 5) Considering preventative medication like Diamox (consult your doctor); and 6) Following the trekking rule 'climb high, sleep low'. If symptoms persist, descend immediately.",
    categories: ["health", "altitude", "safety"]
  },
  {
    question: "What is the Gokyo Lakes trek?",
    answer: "The Gokyo Lakes trek is a stunning alternative or addition to the Everest Base Camp route. It features the spectacular emerald Gokyo Lakes (the world's highest freshwater lake system at around 5,000m), views of four 8,000m+ peaks (Everest, Lhotse, Makalu, and Cho Oyu), and crossing the challenging Cho La pass (5,420m) if combining with EBC. The trek typically takes 12-15 days and offers less crowded trails with equally impressive scenery.",
    categories: ["gokyo", "everest region", "specific trek"]
  },
  {
    question: "What is the Upper Mustang trek?",
    answer: "The Upper Mustang trek explores a restricted, remote trans-Himalayan region that was a forbidden kingdom until 1992. Known as 'Little Tibet,' it features a unique arid landscape with colorful rock formations, sky caves, and well-preserved Tibetan Buddhist culture. The trek centers around Lo Manthang, the ancient walled capital. It requires a special permit ($500 for 10 days) and takes about 14 days. The best time is May-October as it lies in the rain shadow of the Annapurna range.",
    categories: ["upper mustang", "restricted", "specific trek"]
  },
  {
    question: "Can I trek in Nepal during monsoon season?",
    answer: "While most trekkers avoid the monsoon season (June-August), it is possible to trek in certain rain-shadow areas like Upper Mustang, Upper Dolpo, and the Nar Phu Valley, which receive minimal rainfall. The Annapurna Circuit northern section is also relatively dry. Benefits of monsoon trekking include fewer crowds, lower prices, and lush, green landscapes. Drawbacks include regular rainfall, slippery trails, leeches at lower elevations, and limited mountain views due to clouds.",
    categories: ["monsoon", "timing", "weather"]
  },
  {
    question: "What is the Ghorepani Poon Hill trek?",
    answer: "The Ghorepani Poon Hill trek is a popular short trek (4-5 days) in the Annapurna region, perfect for beginners or those with limited time. The highlight is watching sunrise from Poon Hill (3,210m) over the panorama of Himalayan peaks including Annapurna, Dhaulagiri, and Machapuchare. The trek features rhododendron forests, traditional Gurung villages, and well-developed teahouse facilities, while never exceeding moderate altitudes, reducing altitude sickness risk.",
    categories: ["poon hill", "annapurna", "beginner", "specific trek"]
  },
  {
    question: "What is the Annapurna Base Camp trek?",
    answer: "The Annapurna Base Camp (ABC) trek is a popular 7-10 day journey into the heart of the Annapurna range, reaching the amphitheater-like base camp at 4,130m. The trek offers stunning views of peaks like Annapurna I (8,091m), Machapuchare (Fishtail), and Hiunchuli. The route passes through diverse landscapes including lush forests, terraced fields, and traditional villages of the Gurung people. It's moderately challenging but achievable for reasonably fit trekkers.",
    categories: ["annapurna base camp", "specific trek"]
  },
  {
    question: "How physically fit do I need to be for trekking in Nepal?",
    answer: "The fitness level required for Nepal trekking varies by route. For beginner treks like Poon Hill, average fitness is sufficient. For moderate treks like Annapurna Base Camp or Everest Base Camp, you should be able to comfortably walk 5-7 hours daily with a light pack, including uphill sections, for multiple consecutive days. Preparation should include regular cardio (hiking, cycling, swimming) 2-3 times weekly for at least 2-3 months before your trek, plus some strength training for legs and core. The mental stamina to persist through challenging days is equally important.",
    categories: ["fitness", "preparation", "health"]
  },
  {
    question: "What is teahouse trekking?",
    answer: "Teahouse trekking is the most common style of trekking in Nepal, where you stay in basic lodges (teahouses) along established routes instead of camping. Teahouses provide simple accommodation (typically twin rooms or dormitories), toilets (often shared), hot meals, and sometimes hot showers (for an additional fee). This popular system means you only need to carry a daypack with essentials, not camping equipment. Facilities range from very basic in remote areas to relatively comfortable on popular routes like Everest and Annapurna.",
    categories: ["accommodation", "teahouse", "general"]
  },
  {
    question: "What should I pack for a teahouse trek in Nepal?",
    answer: "For a teahouse trek, pack: 1) Layered clothing (moisture-wicking base layers, insulating mid-layers, waterproof outer layer); 2) Good hiking boots and socks; 3) Down jacket and thermal wear for evenings; 4) Sleeping bag (recommended even in teahouses); 5) Headlamp with spare batteries; 6) Water purification method; 7) Basic first aid kit; 8) Toiletries; 9) Quick-dry towel; 10) Sun protection; 11) Trekking poles; 12) Daypack (30-40L); 13) Electronics (camera, power bank); 14) Snacks; and 15) Cash (no ATMs on trails). Keep weight under 10kg in your daypack if using a porter.",
    categories: ["packing", "gear", "preparation"]
  },
  {
    question: "How much does it cost to hire a guide and porter in Nepal?",
    answer: "Guide fees in Nepal typically range from $20-30 per day depending on experience, English proficiency, and trek difficulty. Porters charge approximately $15-25 per day and can carry up to 15-20kg of your belongings. Both usually expect tips of 10-15% for good service. When hiring, it's recommended to use registered agencies that ensure proper insurance, equipment, and fair treatment of staff rather than hiring freelancers directly. Package costs often include accommodation and food for the guide/porter during the trek.",
    categories: ["cost", "guide", "planning"]
  },
  {
    question: "What are the accommodation options while trekking in Nepal?",
    answer: "The main accommodation options while trekking in Nepal are: 1) Teahouses/lodges - simple guesthouses with basic rooms and meal service, found on most popular trekking routes; 2) Camping - necessary for remote areas without teahouses, requiring more equipment and support staff; 3) Homestays - available in some areas, offering cultural immersion with local families; 4) Mountain huts - limited to specific areas like Mardi Himal; and 5) Luxury lodges - available on select lower routes like the Everest region and Annapurna foothills. Costs range from $3-5 for basic teahouses to $100+ for luxury lodges.",
    categories: ["accommodation", "teahouse", "planning"]
  },
  {
    question: "What food is available while trekking in Nepal?",
    answer: "Most teahouses serve a standard menu featuring: 1) Dal Bhat (rice, lentil soup, and vegetable curry) - the staple trekking fuel; 2) Momo (dumplings); 3) Noodle soups; 4) Pasta dishes; 5) Fried rice or potatoes; 6) Porridge, pancakes, and eggs for breakfast; 7) Tea, coffee, and hot lemon; and 8) Snacks like energy bars and chocolate. Food variety decreases and prices increase with altitude. Most dietary requirements can be accommodated on popular routes, but vegetarian options are more readily available than vegan or gluten-free.",
    categories: ["food", "teahouse", "planning"]
  },
  {
    question: "Is it safe to drink the water while trekking in Nepal?",
    answer: "It's not safe to drink untreated water while trekking in Nepal. To stay hydrated safely: 1) Use water purification tablets (cheapest); 2) Bring a UV purifier like SteriPEN; 3) Use a filtration system like LifeStraw; 4) Buy boiled water from teahouses (50-300 NPR per liter depending on altitude); or 5) Purchase bottled water (not recommended due to plastic waste). Plan for 3-4 liters daily, more at higher altitudes. Many environmentally conscious trekkers bring purification methods rather than buying bottled water to reduce plastic waste in the mountains.",
    categories: ["water", "health", "safety"]
  },
  {
    question: "Do I need travel insurance for trekking in Nepal?",
    answer: "Comprehensive travel insurance is absolutely essential for trekking in Nepal. Ensure your policy specifically covers: 1) High-altitude trekking (above 5,000m if your trek goes that high); 2) Helicopter evacuation and medical repatriation; 3) Emergency medical expenses; 4) Trip cancellation/interruption; and 5) Personal belongings/gear. Policies should provide coverage of at least $100,000 for medical emergencies and evacuation. Many standard travel insurance policies exclude high-altitude activities, so verify coverage details carefully or consider specialized mountaineering insurance.",
    categories: ["insurance", "preparation", "safety"]
  },
  {
    question: "How difficult is the Annapurna Circuit trek?",
    answer: "The Annapurna Circuit is considered a moderately difficult trek. The main challenges include: 1) Crossing Thorong La pass at 5,416m (requiring proper acclimatization); 2) Long daily walking distances (10-20km); 3) Trek duration (10-17 days); and 4) Varied terrain from subtropical to alpine. Most days involve 5-7 hours of hiking with elevation gains of 500-800m. While technically not difficult (no climbing or equipment needed), good fitness, proper preparation, and altitude acclimatization are essential. The trail infrastructure is well-developed with regular teahouses.",
    categories: ["difficulty", "annapurna", "specific trek"]
  },
  {
    question: "What are restricted trekking areas in Nepal?",
    answer: "Restricted trekking areas in Nepal require special permits and guided tours. These include: 1) Upper Mustang ($500 permit for 10 days); 2) Upper Dolpo ($500 for 10 days); 3) Manaslu Circuit (requires a guide and restricted area permit); 4) Kanchenjunga ($10/week plus TIMS); 5) Tsum Valley; 6) Nar Phu Valley; and 7) Lumba Sumba. These areas are controlled to preserve their unique cultural heritage, limit environmental impact, and for border security. All restricted area treks require at least two trekkers accompanied by a licensed guide.",
    categories: ["restricted", "permits", "planning"]
  },
  {
    question: "How do I get to the Annapurna Circuit trailhead?",
    answer: "The Annapurna Circuit traditionally starts in Besisahar, which you can reach by taking a 6-7 hour bus from Kathmandu or 3-4 hours from Pokhara. Many trekkers now save time by taking a jeep further up to Dharapani or Chame. The trek typically ends at Nayapul (if completing the full circuit) or Jomsom (if taking the shorter version), from where you can catch transportation back to Pokhara. Private jeeps, shared jeeps, and public buses are available, with prices ranging from $5-10 for buses to $80-120 for private jeeps.",
    categories: ["transportation", "annapurna", "planning"]
  },
  {
    question: "How do I reach the start of the Everest Base Camp trek?",
    answer: "The Everest Base Camp trek begins in Lukla, which is most commonly reached by a 30-minute flight from Kathmandu to the Tenzing-Hillary Airport. These flights cost $180-220 one-way and are weather-dependent with frequent delays. Alternative options include: 1) Flying to Ramechhap during peak season when Kathmandu flights are limited; 2) Taking a helicopter (more expensive at $500+ but less prone to cancellation); or 3) The budget option of a 8-10 hour bus to Phaplu or Salleri followed by a 3-4 day additional trek to join the main trail.",
    categories: ["transportation", "everest", "planning"]
  },
  {
    question: "Can I charge my electronic devices while trekking?",
    answer: "Charging electronic devices is possible at most teahouses along popular trekking routes, but comes with limitations: 1) Charging typically costs 200-500 NPR per device/hour, with prices increasing at higher altitudes; 2) Electricity can be unreliable, especially during peak season when teahouses are full; 3) Power outages are common; 4) Remote areas may only have solar charging with limited capacity. It's recommended to bring a power bank (20,000+ mAh), spare batteries, and consider a solar charger for remote treks. Setting your devices to airplane mode or powering off when not in use helps conserve battery.",
    categories: ["electronics", "gear", "planning"]
  },
  {
    question: "Can I trek solo in Nepal?",
    answer: "Solo trekking is legally permitted on most popular routes like Annapurna and Everest, but restricted areas always require a guide. While many experienced trekkers do trek independently, consider that: 1) Having a guide improves safety, especially in emergencies or bad weather; 2) Solo trekkers have higher risks if injured; 3) A guide adds cultural insights and local knowledge; 4) Guides provide employment to locals. If trekking solo, always register your itinerary with your embassy, carry a means of communication, stick to main routes, and consider using a personal location beacon for emergencies.",
    categories: ["solo", "safety", "guide"]
  },
  {
    question: "Is there internet and phone coverage on trekking routes?",
    answer: "Internet and phone coverage on Nepal's trekking routes has improved significantly but varies widely: 1) Popular routes like Everest and Annapurna have fairly good coverage in villages; 2) Ncell and NTC (Nepal Telecom) offer the best networks for trekkers; 3) WiFi is available in most teahouses on major routes (costing 200-800 NPR depending on altitude); 4) Connection quality decreases with altitude and distance from villages; 5) Remote areas may have no coverage at all. For reliable communication, consider renting a satellite phone for remote treks or purchasing a local SIM card (available at Kathmandu airport with your passport).",
    categories: ["communication", "internet", "planning"]
  },
  {
    question: "What is the Kanchenjunga Base Camp trek?",
    answer: "The Kanchenjunga Base Camp trek is a remote adventure to the world's third highest mountain (8,586m) in eastern Nepal. This challenging 3-4 week trek offers two base camp options: North (5,143m) and South (4,730m). Highlights include spectacular mountain views, diverse ecosystems from subtropical to alpine, and authentic cultural experiences with minimal tourist development. It requires good fitness, trekking experience, and hiring a licensed guide. The permit costs $10 per week plus TIMS card. Best seasons are pre-monsoon (April-May) and post-monsoon (October-November).",
    categories: ["kanchenjunga", "remote", "specific trek"]
  },
  {
    question: "What is the Mardi Himal trek?",
    answer: "The Mardi Himal trek is a hidden gem in the Annapurna region that has gained popularity in recent years. This 5-7 day trek offers spectacular close-up views of Machapuchare (Fishtail), Annapurna South, and Hiunchuli without the crowds of other Annapurna routes. Starting near Pokhara, the trail winds through lush forests, charming villages, and alpine terrain to the Mardi Himal Base Camp (4,500m). It's perfect for trekkers seeking solitude, moderate difficulty, and a shorter timeframe. Teahouses are available but more basic than on mainstream routes.",
    categories: ["mardi himal", "annapurna region", "specific trek"]
  },
  {
    question: "What is the Three Passes trek?",
    answer: "The Three Passes trek is the ultimate Everest region adventure, crossing three high passes: Kongma La (5,535m), Cho La (5,420m), and Renjo La (5,340m). This challenging 18-21 day circuit includes Everest Base Camp, Kala Patthar, and Gokyo Lakes, offering the most comprehensive experience of the region with fewer crowds on the pass sections. It requires excellent fitness, some trekking experience, proper acclimatization, and ideally a guide for safety on the passes. The best times are spring (April-May) and autumn (October-November) when the passes are least likely to be snow-bound.",
    categories: ["three passes", "everest region", "challenging", "specific trek"]
  },
  {
    question: "What is the Makalu Base Camp trek?",
    answer: "The Makalu Base Camp trek is a challenging and remote adventure to the base of the world's fifth highest mountain (8,485m) in eastern Nepal. This 14-18 day journey traverses the Makalu-Barun National Park, known for exceptional biodiversity, pristine forests, and spectacular mountain vistas. The trail climbs through Rai, Limbu and Sherpa villages to the stunning Makalu Base Camp at 4,870m. It's considerably less crowded than Everest or Annapurna, requiring good fitness, camping equipment in some sections, and ideally a guide. Best seasons are spring (April-May) and autumn (October-November).",
    categories: ["makalu", "remote", "specific trek"]
  },
  {
    question: "What are the emergency services available while trekking in Nepal?",
        answer: "Emergency services while trekking in Nepal include: 1) Helicopter rescue (available in most areas but can be delayed by weather); 2) Health posts in larger villages (with very basic medical supplies); 3) Rescue coordination through trekking agencies; 4) Altitude clinics in the Everest region (Pheriche) and Manang (Annapurna Circuit); and 5) Nepal Army and police emergency assistance. For emergencies, contact your guide"}
];

// Combine all questions
const allQuestions = [...knowledgeBase, ...additionalQuestions];

// Function to find the best match for a user question
function findBestMatch(userQuestion) {
  userQuestion = userQuestion.toLowerCase();
  
  // First, try to find an exact match
  for (const qa of allQuestions) {
    if (userQuestion === qa.question.toLowerCase()) {
      return qa.answer;
    }
  }
  
  // If no exact match, look for the best partial match
  let bestMatch = null;
  let highestScore = 0;
  
  for (const qa of allQuestions) {
    // Simple scoring system based on word matching
    const questionWords = qa.question.toLowerCase().split(/\s+/);
    const userWords = userQuestion.split(/\s+/);
    
    let matchScore = 0;
    for (const userWord of userWords) {
      if (userWord.length <= 2) continue; // Skip short words
      
      if (questionWords.includes(userWord)) {
        matchScore += 1;
      } else {
        // Check for partial word matches
        for (const qWord of questionWords) {
          if (qWord.length > 3 && (qWord.includes(userWord) || userWord.includes(qWord))) {
            matchScore += 0.5;
          }
        }
      }
    }
    
    // Weight by keyword importance for trekking
    const keyTrekkingTerms = ['trek', 'annapurna', 'everest', 'langtang', 'manaslu', 'guide', 'permit', 'cost', 'safe', 'gear'];
    for (const term of keyTrekkingTerms) {
      if (userQuestion.includes(term) && qa.question.toLowerCase().includes(term)) {
        matchScore += 1;
      }
    }
    
    if (matchScore > highestScore) {
      highestScore = matchScore;
      bestMatch = qa.answer;
    }
  }
  
  // Return the best match if score is above threshold, otherwise a default message
  if (highestScore >= 1) {
    return bestMatch;
  } else {
    return "I'm sorry, I don't have specific information about that. Please ask about popular treks in Nepal, trek durations, best seasons, preparation, or safety tips.";
  }
}

// Function to initialize the chatbot
function initChatbot() {
  // Create chatbot elements if they don't exist
  if (!document.getElementById('chatbot-container')) {
    // Create main container
    const chatbotContainer = document.createElement('div');
    chatbotContainer.id = 'chatbot-container';
    chatbotContainer.style.cssText = `
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 350px;
      height: 450px;
      display: flex;
      flex-direction: column;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      background: #fff;
      overflow: hidden;
      z-index: 1000;
      transition: all 0.3s ease;
    `;
    
    // Create header
    const header = document.createElement('div');
    header.style.cssText = `
      padding: 15px;
      background: #2c3e50;
      color: white;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
    `;
    header.innerHTML = `
      <span>Nepal Trekking Assistant</span>
      <button id="minimize-chatbot" style="background: none; border: none; color: white; cursor: pointer;"></button>
    `;
    
    // Create chat area
    const chatArea = document.createElement('div');
    chatArea.id = 'chat-area';
    chatArea.style.cssText = `
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      background: #f5f5f5;
    `;
    
    // Create input area
    const inputArea = document.createElement('div');
    inputArea.style.cssText = `
      padding: 10px;
      border-top: 1px solid #ddd;
      display: flex;
    `;
    inputArea.innerHTML = `
      <input type="text" id="user-input" placeholder="Ask about trekking in Nepal..." style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
      <button id="send-button" style="margin-left: 10px; padding: 8px 15px; background: #2c3e50; color: white; border: none; border-radius: 4px; cursor: pointer;">Send</button>
    `;
    
    // Assemble the chatbot
    chatbotContainer.appendChild(header);
    chatbotContainer.appendChild(chatArea);
    chatbotContainer.appendChild(inputArea);
    document.body.appendChild(chatbotContainer);
    
    // Create minimized button
    const minimizedButton = document.createElement('div');
    minimizedButton.id = 'minimized-chatbot';
    minimizedButton.style.cssText = `
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: #2c3e50;
      color: white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;
    `;
    minimizedButton.innerHTML = `<div style="font-size: 20px;"></div>`;
    document.body.appendChild(minimizedButton);
    
    // Add welcome message
    addMessage("bot", " Hello! I'm your Nepal Trekking Assistant. Ask me anything about trekking in Nepal!");
    addSuggestions();
    
    // Add event listeners
    document.getElementById('user-input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        handleUserInput();
      }
    });
    
    document.getElementById('send-button').addEventListener('click', handleUserInput);
    
    document.getElementById('minimize-chatbot').addEventListener('click', function() {
      chatbotContainer.style.display = 'none';
      minimizedButton.style.display = 'flex';
    });
    
    minimizedButton.addEventListener('click', function() {
      chatbotContainer.style.display = 'flex';
      minimizedButton.style.display = 'none';
    });
  }
}

// Function to handle user input
function handleUserInput() {
  const userInput = document.getElementById('user-input').value.trim();
  if (userInput === '') return;
  
  // Add user message to chat
  addMessage("user", userInput);
  
  // Clear input field
  document.getElementById('user-input').value = '';
  
  // Get and display bot response after a small delay
  setTimeout(() => {
    const botResponse = findBestMatch(userInput);
    addMessage("bot", botResponse);
  }, 500);
}

// Function to add message to chat area
function addMessage(sender, text) {
  const chatArea = document.getElementById('chat-area');
  const messageElement = document.createElement('div');
  
  messageElement.style.cssText = `
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 10px;
    max-width: 80%;
    ${sender === 'user' ? 'margin-left: auto; background-color: #dcf8c6;' : 'margin-right: auto; background-color: white;'}
  `;
  
  messageElement.innerText = text;
  chatArea.appendChild(messageElement);
  
  // Scroll to bottom
  chatArea.scrollTop = chatArea.scrollHeight;
}

// Function to add quick suggestion buttons
function addSuggestions() {
  const chatArea = document.getElementById('chat-area');
  const suggestionsElement = document.createElement('div');
  
  suggestionsElement.style.cssText = `
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 15px;
  `;
  
  const suggestions = [
    "Popular treks",
    "Everest Base Camp",
    "Annapurna Circuit",
    "Best time to trek",
    "Trekking safety"
  ];
  
  suggestions.forEach(suggestion => {
    const button = document.createElement('button');
    button.innerText = suggestion;
    button.style.cssText = `
      background: #e0e0e0;
      border: none;
      border-radius: 15px;
      padding: 5px 10px;
      font-size: 12px;
      cursor: pointer;
      white-space: nowrap;
    `;
    
    button.addEventListener('click', function() {
      document.getElementById('user-input').value = suggestion;
      handleUserInput();
    });
    
    suggestionsElement.appendChild(button);
  });
  
  chatArea.appendChild(suggestionsElement);
}

// Initialize the chatbot when the page loads
window.addEventListener('load', initChatbot);

    function loadPage(page) {
        const contentContainer = document.getElementById('content-container');

        // Optional: Add a loading animation or effect
        contentContainer.innerHTML = '<p>Loading...</p>'; // Show loading text

        // Fetch the content of the specified page
        fetch(page)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                // Smooth transition effect
                contentContainer.style.opacity = 0; // Fade out
                setTimeout(() => {
                    contentContainer.innerHTML = data; // Load new content
                    contentContainer.style.opacity = 1; // Fade in
                }, 300); // Match this duration with your CSS transition duration
            })
            .catch(error => {
                console.error('There was a problem with the fetch operation:', error);
                contentContainer.innerHTML = '<p>Error loading content.</p>'; // Show error message
            });
    }
    </script>
</body>
</html>

#content-container {
    transition: opacity 0.3s ease; /* Adjust duration as needed */
    opacity: 1; /* Initial opacity */
}

