<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Bubble Universe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: black;
            font-family: 'Arial', sans-serif;
            cursor: none;
        }
        #universe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #1a2980 0%, #26d0ce 100%);
        }
        #soundToggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            z-index: 1000;
        }
        #cursor {
            position: fixed;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.5);
            pointer-events: none;
            mix-blend-mode: difference;
            transition: transform 0.1s ease-out;
            z-index: 1000;
        }
        #instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.7);
            text-align: center;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="universe"></div>
    <div id="cursor"></div>
    <div id="instructions">
        Move and click to create a living universe<br>
        Explore the magic of quantum bubbles
    </div>
    <button id="soundToggle">ðŸ”Š Sound</button>

    <script>
        class QuantumBubbleUniverse {
            constructor() {
                this.universe = document.getElementById('universe');
                this.cursor = document.getElementById('cursor');
                this.soundToggle = document.getElementById('soundToggle');
                
                this.bubbles = [];
                this.particles = [];
                this.audioContext = null;
                this.soundEnabled = true;
                
                this.setupListeners();
                this.setupAudio();
                this.createUniverse();
            }

            setupAudio() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.warn('Web Audio API not supported');
                    this.soundEnabled = false;
                    this.soundToggle.style.display = 'none';
                }
            }

            createSoundBurst() {
                if (!this.soundEnabled || !this.audioContext) return;

                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(
                    Math.random() * 1000 + 200, 
                    this.audioContext.currentTime
                );
                
                gainNode.gain.setValueAtTime(0.5, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(
                    0.001, 
                    this.audioContext.currentTime + 0.5
                );

                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                oscillator.start();
                oscillator.stop(this.audioContext.currentTime + 0.5);
            }

            setupListeners() {
                // Cursor tracking
                window.addEventListener('mousemove', (e) => {
                    this.cursor.style.transform = `translate(${e.clientX - 25}px, ${e.clientY - 25}px)`;
                });

                // Interactive bubble creation
                this.universe.addEventListener('click', (e) => {
                    this.createQuantumBubble(e.clientX, e.clientY);
                });

                // Touch support
                this.universe.addEventListener('touchstart', (e) => {
                    const touch = e.touches[0];
                    this.createQuantumBubble(touch.clientX, touch.clientY);
                });

                // Sound toggle
                this.soundToggle.addEventListener('click', () => {
                    this.soundEnabled = !this.soundEnabled;
                    this.soundToggle.textContent = this.soundEnabled ? 'ðŸ”Š Sound' : 'ðŸ”‡ Muted';
                });
            }

            createQuantumBubble(x, y) {
                // Vibrant, quantum-inspired color palette
                const colors = [
                    'rgba(75,192,192,0.7)',   // Teal
                    'rgba(255,99,132,0.7)',   // Pink
                    'rgba(54,162,235,0.7)',   // Blue
                    'rgba(255,206,86,0.7)',   // Yellow
                    'rgba(153,102,255,0.7)'   // Purple
                ];

                const bubble = {
                    x, 
                    y, 
                    radius: Math.random() * 100 + 50, 
                    color: colors[Math.floor(Math.random() * colors.length)],
                    velocity: {
                        x: (Math.random() - 0.5) * 5,
                        y: (Math.random() - 0.5) * 5
                    },
                    oscillation: {
                        amplitude: Math.random() * 10,
                        frequency: Math.random() * 0.05 + 0.01
                    },
                    time: 0
                };

                this.bubbles.push(bubble);
                this.createParticleEcosystem(x, y, bubble.color);
                this.createSoundBurst();
            }

            createParticleEcosystem(x, y, baseColor) {
                const particleCount = 100;
                for (let i = 0; i < particleCount; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 3 + 1;
                    
                    this.particles.push({
                        x, 
                        y, 
                        radius: Math.random() * 3,
                        color: this.mutateColor(baseColor),
                        velocity: {
                            x: Math.cos(angle) * speed,
                            y: Math.sin(angle) * speed
                        },
                        life: 1,
                        decay: Math.random() * 0.02 + 0.01
                    });
                }
            }

            mutateColor(baseColor) {
                // Slight color variation for particle diversity
                const rgba = baseColor.match(/\d+/g).map(Number);
                return `rgba(
                    ${Math.min(255, rgba[0] + Math.random() * 50)},
                    ${Math.min(255, rgba[1] + Math.random() * 50)},
                    ${Math.min(255, rgba[2] + Math.random() * 50)},
                    ${rgba[3]}
                )`;
            }

            createUniverse() {
                const render = () => {
                    // Clear with slight trail effect
                    this.universe.innerHTML = '';

                    // Animate and render bubbles
                    this.bubbles.forEach((bubble, index) => {
                        // Quantum-like oscillation
                        bubble.time += bubble.oscillation.frequency;
                        bubble.x += bubble.velocity.x;
                        bubble.y += bubble.velocity.y + 
                            Math.sin(bubble.time) * bubble.oscillation.amplitude;

                        // Create bubble element
                        const bubbleEl = document.createElement('div');
                        bubbleEl.style.position = 'absolute';
                        bubbleEl.style.left = `${bubble.x}px`;
                        bubbleEl.style.top = `${bubble.y}px`;
                        bubbleEl.style.width = `${bubble.radius * 2}px`;
                        bubbleEl.style.height = `${bubble.radius * 2}px`;
                        bubbleEl.style.borderRadius = '50%';
                        bubbleEl.style.background = bubble.color;
                        bubbleEl.style.filter = 'blur(10px)';
                        bubbleEl.style.opacity = '0.7';
                        this.universe.appendChild(bubbleEl);

                        // Remove out-of-bounds bubbles
                        if (bubble.x < -bubble.radius * 2 || 
                            bubble.x > window.innerWidth + bubble.radius * 2 ||
                            bubble.y < -bubble.radius * 2 || 
                            bubble.y > window.innerHeight + bubble.radius * 2) {
                            this.bubbles.splice(index, 1);
                        }
                    });

                    // Animate particles
                    this.particles.forEach((particle, index) => {
                        particle.x += particle.velocity.x;
                        particle.y += particle.velocity.y;
                        particle.life -= particle.decay;

                        const particleEl = document.createElement('div');
                        particleEl.style.position = 'absolute';
                        particleEl.style.left = `${particle.x}px`;
                        particleEl.style.top = `${particle.y}px`;
                        particleEl.style.width = `${particle.radius * 2}px`;
                        particleEl.style.height = `${particle.radius * 2}px`;
                        particleEl.style.borderRadius = '50%';
                        particleEl.style.background = particle.color;
                        particleEl.style.opacity = particle.life;
                        this.universe.appendChild(particleEl);

                        // Remove dead particles
                        if (particle.life <= 0) {
                            this.particles.splice(index, 1);
                        }
                    });

                    requestAnimationFrame(render);
                };

                render();
            }
        }

        // Initialize the quantum universe
        new QuantumBubbleUniverse();
    </script>
</body>
</html>