<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7LWHSBNXT5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7LWHSBNXT5');
    </script>
    <!-- Primary Meta Tags -->
    <title>Discover Events in Nepal | Khojum.com</title>
    <meta name="title" content="Discover Events in Nepal | Khojum.com">
    <meta name="description" content="Nepal's top event discovery platform. Find concerts, festivals, art exhibitions, and workshops in Kathmandu and beyond. Your guide to what's happening.">
    
    <!-- Keywords -->
    <meta name="keywords" content="events in kathmandu, nepal events, concerts, festivals, art exhibitions, workshops, entertainment, today's events, upcoming events, khojum">
    
    <!-- SEO & Indexing -->
    <meta name="robots" content="index, follow, max-image-preview:large">
    <link rel="canonical" href="https://khojum.com">
    
    <!-- Mobile Optimization -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#c8102e">
    
    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    
    <!-- Open Graph & Twitter Cards -->
    <meta property="og:title" content="Discover Events in Nepal | Khojum.com">
    <meta property="og:description" content="Nepal's top event discovery platform for concerts, festivals, and more.">
    <meta property="og:image" content="/assets/logo/og-image.png">
    <meta property="og:url" content="https://khojum.com">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Discover Events in Nepal | Khojum.com">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --brand-red: #c8102e;
            --brand-red-dark: #a70d26;
            --brand-blue: #003893;
            --text-primary: #1a1a1a;
            --text-secondary: #555;
            --text-light: #888;
            --bg-main: #f8f9fa;
            --bg-card: #ffffff;
            --border-color: #e0e0e0;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --font-primary: 'Inter', sans-serif;
            --font-display: 'Lora', serif;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 25px rgba(0,0,0,0.15);
            --header-height: 70px;
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        /* GENERAL STYLES */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-primary); line-height: 1.6; color: var(--text-primary); background-color: var(--bg-main); padding-top: var(--header-height); }
        .container { width: 90%; max-width: 1280px; margin: 0 auto; padding: 0 15px; }

        /* HEADER */
        header.main-header { background-color: rgba(255, 255, 255, 0.95); height: var(--header-height); position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; box-shadow: var(--shadow-sm); display: flex; align-items: center; backdrop-filter: blur(10px); }
        .header-content { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo { font-family: var(--font-display); font-size: 1.8rem; font-weight: 600; color: var(--text-primary); text-decoration: none; }
        .logo span { color: var(--brand-red); }

        /* HEADER POPUP */
        .header-popup { position: absolute; right: 20px; top: 15px; background-color: #1e293b; padding: 8px 15px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); z-index: 1001; display: flex; align-items: center; }
        .close-button { background-color: #f44336; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 20px; cursor: pointer; position: absolute; top: 10px; right: 10px; transition: background-color 0.3s; }
        .close-button:hover { background-color: #d32f2f; }
        .header-popup .button { padding: 15px 20px; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 5px; font-size: 16px; transition: background-color 0.3s, transform 0.3s; display: inline-block; }
        .header-popup .button:hover { background-color: #45a049; transform: scale(1.05); }

        /* HERO SECTION */
        .hero-section { text-align: center; padding: 60px 0 40px; }
        .hero-section h1 { font-family: var(--font-display); font-size: 3rem; margin-bottom: 16px; background: linear-gradient(135deg, var(--text-primary) 0%, var(--brand-red) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .hero-section p { font-size: 1.2rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto; }
        
        /* FILTERS */
        .filter-section { padding: 30px 0; background-color: var(--bg-card); border-radius: var(--border-radius); box-shadow: var(--shadow-sm); }
        .filter-bar { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; justify-content: center; }
        .filter-button { background-color: transparent; border: 2px solid var(--border-color); color: var(--text-secondary); padding: 12px 24px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: var(--transition); font-size: 0.9rem; }
        .filter-button:hover, .filter-button.active { border-color: var(--brand-red); color: white; background-color: var(--brand-red); box-shadow: var(--shadow-md); transform: translateY(-2px); }

        /* EVENTS GRID & CARDS */
        .events-section { margin-bottom: 60px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .section-title { font-size: 1.5rem; font-weight: 700; }
        .events-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 30px; }
        .event-card { background-color: var(--bg-card); border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow-sm); transition: var(--transition); display: flex; flex-direction: column; position: relative; border: 1px solid transparent; }
        .event-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-lg); border-color: var(--brand-red); }
        .event-image-container { position: relative; width: 100%; padding-top: 56.25%; overflow: hidden; cursor: pointer; }
        .event-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; transition: transform 0.3s ease; }
        .event-card:hover .event-image { transform: scale(1.05); }
        .image-overlay { position: absolute; bottom: 0; left: 0; right: 0; height: 60%; background: linear-gradient(to top, rgba(0,0,0,0.7), transparent); }
        .card-top-icons { position: absolute; top: 15px; right: 15px; display: flex; gap: 10px; z-index: 2; }
        .save-btn, .share-btn { width: 40px; height: 40px; border-radius: 50%; background-color: rgba(255,255,255,0.9); color: var(--text-secondary); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition); }
        .save-btn:hover, .share-btn:hover, .save-btn.saved { background-color: var(--brand-red); color: white; }
        .ticket-status { position: absolute; top: 15px; left: 15px; padding: 8px 16px; border-radius: 50px; font-size: 0.8rem; font-weight: 700; color: white; text-transform: uppercase; z-index: 2; }
        .ticket-status.available { background-color: var(--success-color); } .ticket-status.limited { background-color: var(--warning-color); color: var(--text-primary); } .ticket-status.sold-out { background-color: var(--danger-color); }
        .event-content { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; cursor: pointer;}
        .event-title { font-size: 1.4rem; font-weight: 700; margin-bottom: 15px; }
        .event-meta-grid { display: grid; gap: 12px; margin-bottom: 20px; }
        .event-meta-item { display: flex; align-items: center; gap: 10px; font-size: 0.95rem; color: var(--text-secondary); }
        .event-meta-item i { color: var(--brand-red); width: 18px; text-align: center; }
        .event-meta-item .highlight { color: var(--text-primary); font-weight: 600; }
        .verified-badge { color: var(--brand-blue); margin-left: 5px; }
        .event-meta-item.location-link a { color: inherit; text-decoration: none; display: flex; align-items: center; gap: 10px; transition: color 0.3s ease; border-radius: 4px; }
        .event-meta-item.location-link a:hover { color: var(--brand-red); }
        .event-meta-item.location-link a:hover .highlight { text-decoration: underline; }
        .event-tags { margin-top: auto; padding-top: 15px; display: flex; flex-wrap: wrap; gap: 8px; }
        .event-tag { background-color: var(--bg-main); color: var(--text-secondary); padding: 6px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 500; }
        .event-tag.primary-cat { background-color: var(--brand-red); color: white; border-color: var(--brand-red); }
        .event-footer { padding: 20px 25px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        .event-price { font-size: 1.3rem; font-weight: 700; color: var(--brand-blue); } .event-price .free { color: var(--success-color); }
        .action-btn { border: none; padding: 10px 16px; border-radius: 25px; font-weight: 600; cursor: pointer; transition: var(--transition); display: flex; align-items: center; gap: 6px; }
        .action-btn.secondary { background-color: var(--bg-main); color: var(--text-secondary); border: 1px solid var(--border-color); }
        .action-btn.primary { background-color: var(--brand-red); color: white; }
        .action-btn:hover { transform: translateY(-1px); }
        .action-btn:disabled { background-color: var(--text-light); border-color: var(--text-light); color: white; cursor: not-allowed; transform: none; }
        .action-btn:disabled:hover { background-color: var(--text-light); }

        /* SKELETON & EMPTY STATE */
        .skeleton-card { background-color: var(--bg-card); border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow-sm); height: 450px; }
        .skeleton-image { height: 220px; } .skeleton { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        .empty-state { text-align: center; padding: 60px 20px; color: var(--text-secondary); } .empty-state i { font-size: 4rem; color: var(--border-color); margin-bottom: 20px; }

        /* EVENT DETAIL VIEW */
        #event-detail-view { padding: 40px 0; }
        .detail-card { background: var(--bg-card); border-radius: var(--border-radius); box-shadow: var(--shadow-lg); overflow: hidden; }
        .detail-header { position: relative; height: 400px; }
        .detail-image { width: 100%; height: 100%; object-fit: cover; }
        .detail-header-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(0,0,0,0.8) 20%, transparent 60%); display: flex; flex-direction: column; justify-content: flex-end; padding: 30px; }
        .detail-title { font-size: 2.5rem; font-weight: 700; color: white; text-shadow: 2px 2px 8px rgba(0,0,0,0.7); margin-bottom: 10px; }
        a.detail-venue-link { text-decoration: none; transition: opacity .2s ease; }
        a.detail-venue-link:hover { opacity: 0.9; }
        .detail-venue { font-size: 1.2rem; color: #eee; text-shadow: 1px 1px 4px rgba(0,0,0,0.7); }
        a.detail-venue-link:hover .detail-venue { color: var(--warning-color); }
        .detail-body { display: grid; grid-template-columns: 2fr 1fr; gap: 40px; padding: 40px; }
        .detail-main-content h3 { font-size: 1.5rem; margin-bottom: 20px; border-bottom: 2px solid var(--brand-red); padding-bottom: 10px; }
        .detail-description p { margin-bottom: 1.2em; color: var(--text-secondary); line-height: 1.8; }
        .detail-sidebar { background: var(--bg-main); padding: 30px; border-radius: var(--border-radius); }
        .detail-meta-list { list-style: none; }
        .detail-meta-list li { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 20px; font-size: 1rem; }
        .detail-meta-list i { color: var(--brand-red); font-size: 1.1rem; margin-top: 4px; width: 20px; }
        .detail-sidebar .action-btn.primary { width: 100%; padding: 15px; font-size: 1.1rem; justify-content: center; margin-top: 20px; }
        .back-to-events-btn { display: inline-flex; align-items: center; gap: 8px; margin-bottom: 30px; background: transparent; border: 2px solid var(--border-color); padding: 10px 20px; border-radius: 50px; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: var(--transition); }
        .back-to-events-btn:hover { background: var(--bg-main); color: var(--text-primary); border-color: var(--text-secondary); }

        /* BOTTOM NAV & FOOTER */
        .bottom-nav { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background-color: rgba(255, 255, 255, 0.95); box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000; backdrop-filter: blur(10px); }
        .bottom-nav-container { display: flex; justify-content: space-around; }
        .nav-item { display: flex; flex-direction: column; align-items: center; padding: 12px 10px; color: var(--text-secondary); text-decoration: none; flex-grow: 1; }
        .nav-item i { font-size: 20px; margin-bottom: 4px; } .nav-item span { font-size: 11px; } .nav-item.active, .nav-item:hover { color: var(--brand-red); }
        footer { text-align: center; padding: 50px 0; background: linear-gradient(135deg, var(--text-primary) 0%, var(--brand-red) 100%); color: white; margin-top: 60px; }
        .footer-links a { margin: 0 15px; color: white; font-size: 1.5rem; transition: var(--transition); } .footer-links a:hover { transform: scale(1.2); opacity: 0.8; }
        .copyright { margin-top: 20px; opacity: 0.8; }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            body { padding-bottom: 80px; }
            .bottom-nav { display: block; }
            .hero-section h1 { font-size: 2.2rem; }
            .filter-bar { justify-content: flex-start; overflow-x: auto; padding: 0 15px; scrollbar-width: none; -ms-overflow-style: none; }
            .filter-bar::-webkit-scrollbar { display: none; }
            .filter-button { white-space: nowrap; flex-shrink: 0; }
            .events-grid { grid-template-columns: 1fr; gap: 20px; }
            .detail-body { grid-template-columns: 1fr; padding: 25px; }
            .detail-title { font-size: 2rem; }
        }

        .button {
            background: linear-gradient(135deg, #6dd5ed, #2193b0); /* Gradient background */
            color: white; /* White text */
            padding: 15px 25px; /* Padding for size */
            text-align: center; /* Center text */
            text-decoration: none; /* Remove underline */
            display: inline-block; /* Make it inline-block */
            font-size: 18px; /* Increase font size */
            border: none; /* Remove border */
            border-radius: 30px; /* More rounded corners */
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3); /* Shadow for depth */
            transition: background 0.3s, transform 0.3s, box-shadow 0.3s; /* Smooth transition */
            cursor: pointer; /* Pointer cursor on hover */
        }

        .button:hover {
            background: linear-gradient(135deg, #2193b0, #6dd5ed); /* Reverse gradient on hover */
            transform: translateY(-3px); /* Slightly lift the button */
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.4); /* Deeper shadow on hover */
        }

        .button:active {
            transform: translateY(1px); /* Slightly lower on click */
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.3); /* Reduce shadow on click */
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container header-content">
            <a href="/" class="logo"><span>खो</span>जुम</a>
            <div class="header-popup" id="headerPopup">
                <button class="close-button" id="closePopup">×</button>
                <a href="sharktank.html" class="button">Track Shark Tank</a>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Main Grid View (shown by default) -->
        <div id="main-grid-view">
            <section class="hero-section">
                <h1>What are you doing this week?</h1>
                <p>Discover the best events happening in Nepal. Your next great experience is just a click away.</p>
            </section>
            
            <div class="filter-section">
                <div class="filter-bar">
                    <button class="filter-button active" data-filter="all">All Events</button>
                    <button class="filter-button" data-filter="music">🎵 Music</button>
                    <button class="filter-button" data-filter="art">🎨 Art</button>
                    <button class="filter-button" data-filter="business">💼 Business</button>
                    <button class="filter-button" data-filter="food">🍽️ Food</button>
                    <button class="filter-button" data-filter="health">💪 Health</button>
                    <button class="filter-button" data-filter="weekend">This Weekend</button>
                    <button class="filter-button" data-filter="free">Free Events</button>
                </div>
            </div>

            <section class="events-section">
                <div class="section-header">
                    <h2 class="section-title">Upcoming Events</h2>
                    <div class="results-count" id="results-count">Showing all events</div>
                </div>
                
                <div class="events-grid" id="events-container">
                    <!-- Event cards are rendered here by JS -->
                </div>
                
                <div class="empty-state" id="empty-state" style="display: none;">
                    <i class="fas fa-calendar-times"></i>
                    <h3>No events found</h3>
                    <p>Try adjusting your filters or search terms</p>
                </div>
            </section>
        </div>

        <!-- Event Detail View (hidden by default) -->
        <div id="event-detail-view" style="display: none;">
            <!-- Content for single event is rendered here by JS -->
        </div>
    </main>

    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="#" class="nav-item active"><i class="fas fa-compass"></i><span>Discover</span></a>
            <a href="#" class="nav-item"><i class="fas fa-search"></i><span>Search</span></a>
            <a href="#" class="nav-item"><i class="fas fa-heart"></i><span>Saved</span></a>
            <a href="#" class="nav-item"><i class="fas fa-user-circle"></i><span>Profile</span></a>
        </div>
    </nav>

    <footer>
        <div class="container">
            <p><strong>Help Us Improve:</strong> <a href="mailto:ceo@khojum.com?subject=Feedback" style="color: white;">ceo@khojum.com</a></p>
            <div class="footer-links">
                <a href="https://x.com/ramanLogy" target="_blank" title="Follow on X">𝕏</a>
                <a href="https://discord.gg/ncvvvPqT" target="_blank" title="Join Discord"><i class="fab fa-discord"></i></a>
                <a href="https://github.com/ramanlogy/khojum.com.git" target="_blank" title="View on GitHub"><i class="fab fa-github"></i></a>
            </div>
            <p class="copyright">Khojum Inc. © 2025</p>
        </div>
    </footer>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const eventsData = [
          {
            id: 1, title: "Shark Tank Nepal - Season 1", date: "2025-07-08", time: "9:00 PM", venue: "Himalayan TV HD", gmapsUrl: "https://maps.app.goo.gl/9m2L7G8pY6X3A7Z79", price: "Free", image: "assets/sharktank.png", category: "business", tags: ["TV Show", "Startups", "Investment"], organizer: { name: "Himalayan TV", verified: true }, availability: "available", attendeeCount: 15000, duration: "1 hour", description: "Watch entrepreneurs pitch their ideas to celebrity investors on national television. This season promises bigger deals, tougher negotiations, and groundbreaking innovations from across Nepal.", bookingUrl: "https://www.youtube.com/watch?v=bp4NDX-WMlA", actionText: "Watch Now", actionIcon: "fa-play-circle"
          },
          {
            id: 2, title: "John and The Locals Concert", date: "2025-07-12", time: "9:00 PM Onwards", venue: "XO Club, Thamel", gmapsUrl: "https://maps.app.goo.gl/QpA1m5nQz5b7X3E17", price: "Rs. 1500", image: "assets/jhonconcert.png", category: "music", tags: ["Live Music", "Rock", "Nightlife"], organizer: { name: "XO Club", verified: false }, availability: "limited", attendeeCount: 450, duration: "3 hours", description: "Experience an electrifying night of rock music with John and The Locals live in Thamel. Get ready for high-energy performances and unforgettable anthems.", bookingUrl: "https://events.khalti.com/events/ET259U4Z5ADC"
          },
          {
            id: 3, title: "Interdependence: Art Exhibition", date: "2025-07-12", time: "11:00 AM - 5:00 PM", venue: "Nepal Art Council", gmapsUrl: "https://maps.app.goo.gl/hYmZfG4pW6t2S3E6A", price: "Free", image: "assets/artexhibiton.png", category: "art", tags: ["Exhibition", "Fine Arts", "Culture"], organizer: { name: "Nepal Art Council", verified: true }, availability: "available", attendeeCount: 1200, duration: "All day", description: "An exploration of human connection through contemporary Nepali art and cultural expression. Featuring works from over 20 renowned and emerging artists.", bookingUrl: "https://vt.tiktok.com/ZSB2P4tYS/", actionText: "Learn More", actionIcon: "fa-info-circle"
          },
          {
            id: 4, title: "Artha Run Club", date: "Every Saturday", time: "6:00 AM", venue: "International Club, Lalitpur", gmapsUrl: "https://maps.app.goo.gl/jR8fG5K3D4S2F9E8A", price: "Free", image: "assets/runclub.png", category: "health", tags: ["Running", "Fitness", "Community"], organizer: { name: "Artha Group", verified: false }, availability: "available", attendeeCount: 85, duration: "1.5 hours", description: "Join fellow runners for a healthy start to your weekend with Artha Run Club. All fitness levels are welcome for a scenic 5k run.", bookingUrl: "https://lu.ma/0yjhvggo", actionText: "Join Club", actionIcon: "fa-running"
          },
          {
            id: 5, title: "Tokha Saturday Mela", date: "2025-07-05", time: "3:00 PM - 7:00 PM", venue: "Tokha, near Ganesh Temple", gmapsUrl: "https://maps.app.goo.gl/yQ3zH7G8P6R5X5A9A", price: "Free", image: "assets/tokhamela.png", category: "food", tags: ["Cultural", "Food Festival", "Newari Cuisine"], organizer: { name: "Local Community", verified: false }, availability: "available", attendeeCount: 2000, duration: "4 hours", description: "Celebrate community and cuisine at Tokha's vibrant Saturday food and culture mela. Enjoy traditional Newari delicacies, live music, and local crafts.", bookingUrl: "https://www.tiktok.com/@storiesofmanisha/video/7474071111668600082", actionText: "Learn More", actionIcon: "fa-info-circle"
          },
          {
            id: 6, title: "Benambari Theater Show", date: "2025-07-05", time: "12:00 PM and 4:00 PM", venue: "Mandala Theater, Thapagaun", gmapsUrl: "https://maps.app.goo.gl/kXfW7G9J5H4A3E2A9", price: "Rs. 350", image: "assets/benambari.png", category: "art", tags: ["Theater", "Performance", "Cultural"], organizer: { name: "Ace Theater club", verified: true }, availability: "available", attendeeCount: 0, duration: "2 hours", description: "Experience the captivating Benambari Theater Show at Mandala Theater. A must-see performance that showcases the rich cultural heritage of Nepal.", bookingUrl: "https://www.instagram.com/ace_theater_club?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==", actionText: "View Details", actionIcon: "fa-info-circle"
          },
          {
            id: 7, title: "Kaiser Library", date: "Every Day", time: "9:00 AM - 5:00 PM", venue: "Kantipath", gmapsUrl: "https://maps.app.goo.gl/fW2sH6J4K5L9X8E7A", price: "Free", image: "assets/kaiserlibrary.png", category: "art", tags: ["Reading", "Quiet", "Productive"], organizer: { name: "Kaiser Library", verified: true }, availability: "available", attendeeCount: 149, duration: "All day", description: "Kaiser Library offers a serene environment to spend time and read books in the courtyard and inside the library. One of the rare gems of Nepal that most don't know about. If you live around there, this is a must-visit place.", bookingUrl: "https://www.tiktok.com/@adorrree_me/video/7493883616259296520?is_from_webapp=1&sender_device=pc&web_id=7428614612804961799", actionText: "Learn More", actionIcon: "fa-book-open"
          },
          {
            id: 8, title: "Kausi theater: Sickroom", date: "June 20 - July 12", time: "5:15 PM | 1 PM on Saturdays", venue: "Kausi Theater, Teku", gmapsUrl: "https://maps.app.goo.gl/wYtV7H5J4N3S2F8A6", price: "From Rs. 300", image: "assets/sickroom.png", category: "art", tags: ["Theater", "Performance", "Cultural"], organizer: { name: "Katha Ghera", verified: true }, availability: "available", attendeeCount: 250, duration: "2 hours", description: "Katha Ghera presents 'Sickroom', a Nepali adaptation of Rajiv Joseph's play Gruesome Playground Injuries, directed by Akanchha Karki. A raw, intimate exploration of pain, connection, and memory. Trigger Warning: Mentions of self-harm and injuries. Recommended Age: 13+.", bookingUrl: "https://www.instagram.com/p/DK30ORgNJnL/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA==", actionText: "Book Now"
          },
          {
            id: 9, title: "Patan Pottery", date: "Everyday", time: "10am-8pm", venue: "Mangal Bazar", gmapsUrl: "https://maps.app.goo.gl/dYtV8H6J5K4A3E1A8", price: "Rs. 500", image: "assets/patan_pottery.png", category: "Artisan", tags: ["Pottery", "Coffee", "Art"], organizer: { name: "Patan Pottery", verified: false }, availability: "available", attendeeCount: 0, duration: "N/A", description: "Patan Pottery offers a unique experience with pottery making, along with coffee and painting services on mugs and bowls. Shaping Memories, Molding Moments ☎️ : +977 9815391400📍 : Mangal bazar, Patan💌 : potterypatan@gmail.com", bookingUrl: "https://www.tiktok.com/@datewithbebe/video/7450685638715690258?is_from_webapp=1&sender_device=pc&web_id=7428614612804961799", actionText: "Learn More", actionIcon: "fa-info-circle"
          }
        ];

        let currentFilter = 'all';
        let savedEvents = new Set();
        
        const mainGridView = document.getElementById('main-grid-view');
        const eventDetailView = document.getElementById('event-detail-view');
        const eventsContainer = document.getElementById('events-container');
        const emptyState = document.getElementById('empty-state');
        const resultsCount = document.getElementById('results-count');
        const filterButtons = document.querySelectorAll('.filter-button');

        function init() {
            setupEventListeners();
            handleRouting();
            window.addEventListener('hashchange', handleRouting);
        }

        function handleRouting() {
            const hash = window.location.hash;
            if (hash.startsWith('#event-')) {
                const eventId = parseInt(hash.substring('#event-'.length), 10);
                showDetailPage(eventId);
            } else {
                showGridView();
            }
        }

        function showGridView() {
            mainGridView.style.display = 'block';
            eventDetailView.style.display = 'none';
            if (window.location.hash) {
                history.pushState("", document.title, window.location.pathname + window.location.search);
            }
            showLoadingState();
            setTimeout(() => {
                hideLoadingState();
                applyFilters();
            }, 300);
        }

        function showDetailPage(eventId) {
            const event = eventsData.find(e => e.id === eventId);
            mainGridView.style.display = 'none';
            eventDetailView.style.display = 'block';
            window.scrollTo(0, 0);

            if (!event) {
                eventDetailView.innerHTML = `<div class="empty-state"><h3>Event Not Found</h3><p>The event you are looking for does not exist.</p><button class="back-to-events-btn" onclick="window.location.hash=''">Back to All Events</button></div>`;
                return;
            }
            
            const formattedDate = formatEventDate(event.date, { weekday: 'long', month: 'long', day: 'numeric' });
            const actionIcon = event.actionIcon || 'fa-ticket-alt';
            let actionText = event.actionText || 'Book Now';
            if(event.availability === 'sold-out') actionText = 'Sold Out';
            
            eventDetailView.innerHTML = `
                <button class="back-to-events-btn" onclick="window.location.hash=''"><i class="fas fa-arrow-left"></i> Back to All Events</button>
                <div class="detail-card">
                    <header class="detail-header">
                        <img src="${event.image}" alt="${event.title}" class="detail-image">
                        <div class="detail-header-overlay">
                            <h1 class="detail-title">${event.title}</h1>
                            <a href="${event.gmapsUrl}" target="_blank" rel="noopener noreferrer" class="detail-venue-link">
                                <p class="detail-venue"><i class="fas fa-map-marker-alt"></i> ${event.venue}</p>
                            </a>
                        </div>
                    </header>
                    <div class="detail-body">
                        <div class="detail-main-content">
                            <h3>About the Event</h3>
                            <div class="detail-description"><p>${event.description.replace(/\n/g, '</p><p>')}</p></div>
                        </div>
                        <aside class="detail-sidebar">
                            <ul class="detail-meta-list">
                                <li><i class="fas fa-calendar-day"></i><div><strong>Date:</strong><br>${formattedDate}</div></li>
                                <li><i class="fas fa-clock"></i><div><strong>Time:</strong><br>${event.time}</div></li>
                                <li><i class="fas fa-ticket-alt"></i><div><strong>Price:</strong><br>${event.price}</div></li>
                                <li><i class="fas fa-building"></i><div><strong>Organizer:</strong><br>${event.organizer.name} ${event.organizer.verified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}</div></li>
                            </ul>
                            <button class="action-btn primary" onclick="bookTicket(event, ${event.id})" ${event.availability === 'sold-out' ? 'disabled' : ''}>
                                <i class="fas ${actionIcon}"></i> ${actionText}
                            </button>
                        </aside>
                    </div>
                </div>
            `;
        }
        
        function setupEventListeners() {
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentFilter = button.dataset.filter;
                    applyFilters();
                });
            });
            document.getElementById('closePopup').addEventListener('click', () => document.getElementById('headerPopup').style.display = 'none');
        }

        function applyFilters() {
            let filteredEvents = eventsData;
            if (currentFilter !== 'all') {
                if (currentFilter === 'weekend') {
                    const weekendDates = getWeekendDates();
                    filteredEvents = filteredEvents.filter(event => weekendDates.includes(event.date));
                } else if (currentFilter === 'free') {
                    filteredEvents = filteredEvents.filter(event => event.price.toLowerCase().includes('free'));
                } else {
                    filteredEvents = filteredEvents.filter(event => event.category === currentFilter);
                }
            }
            renderEvents(filteredEvents);
            updateResultsCount(filteredEvents.length);
        }

        function renderEvents(events) {
            emptyState.style.display = events.length === 0 ? 'block' : 'none';
            eventsContainer.innerHTML = events.map(event => createEventCard(event)).join('');
        }

        function createEventCard(event) {
            const formattedDate = formatEventDate(event.date, { weekday: 'short', month: 'short', day: 'numeric' });
            const ticketStatusClass = event.availability;
            const ticketStatusText = event.availability === 'limited' ? 'Few Left' : event.availability;
            const priceDisplay = event.price.toLowerCase().includes('free') ? `<span class="free">${event.price}</span>` : event.price;
            const actionIcon = event.actionIcon || 'fa-ticket-alt';
            const actionText = event.actionText || 'Book Now';
            const buttonDisabled = event.availability === 'sold-out' ? 'disabled' : '';

            return `
                <div class="event-card">
                    <div class="event-image-container" onclick="viewDetails(event, ${event.id})">
                        <div class="event-image" style="background-image: url('${event.image}')"></div>
                        <div class="image-overlay"></div>
                        <div class="card-top-icons">
                            <button class="save-btn ${savedEvents.has(event.id) ? 'saved' : ''}" onclick="toggleSave(event, ${event.id})"><i class="fas fa-heart"></i></button>
                            <button class="share-btn" onclick="shareEvent(event, ${event.id})"><i class="fas fa-share-alt"></i></button>
                        </div>
                        <div class="ticket-status ${ticketStatusClass}">${ticketStatusText}</div>
                    </div>
                    <div class="event-content" onclick="viewDetails(event, ${event.id})">
                        <h3 class="event-title">${event.title}</h3>
                        <div class="event-meta-grid">
                            <div class="event-meta-item"><i class="fas fa-calendar-alt"></i><span class="highlight">${formattedDate}</span> at ${event.time}</div>
                            <div class="event-meta-item location-link">
                                <a href="${event.gmapsUrl}" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()">
                                    <i class="fas fa-map-marker-alt"></i><span class="highlight">${event.venue}</span>
                                </a>
                            </div>
                        </div>
                        <div class="event-tags">
                            <span class="event-tag primary-cat">${getCategoryName(event.category)}</span>
                            ${event.tags.map(tag => `<span class="event-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                    <div class="event-footer">
                        <div class="event-price">${priceDisplay}</div>
                        <div class="card-actions">
                            <button class="action-btn secondary" onclick="viewDetails(event, ${event.id})"><i class="fas fa-info-circle"></i> Details</button>
                            <button class="action-btn primary" onclick="bookTicket(event, ${event.id})" ${buttonDisabled}>
                                <i class="fas ${actionIcon}"></i> ${event.availability === 'sold-out' ? 'Sold Out' : actionText}
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- Global Functions for onclick Handlers ---
        window.toggleSave = (e, eventId) => { e.stopPropagation(); const btn = e.currentTarget; savedEvents.has(eventId) ? (savedEvents.delete(eventId), btn.classList.remove('saved')) : (savedEvents.add(eventId), btn.classList.add('saved')); };
        window.shareEvent = (e, eventId) => { e.stopPropagation(); const url = `${window.location.origin}${window.location.pathname}#event-${eventId}`; navigator.clipboard.writeText(url).then(() => showNotification('Event link copied!')); };
        window.viewDetails = (e, eventId) => { e.stopPropagation(); window.location.hash = `#event-${eventId}`; };
        window.bookTicket = (e, eventId) => { e.stopPropagation(); const event = eventsData.find(ev => ev.id === eventId); if (event.availability === 'sold-out') { showNotification('Sorry, this event is sold out!', 'error'); return; } if (event.bookingUrl) window.open(event.bookingUrl, '_blank'); else { showNotification('Booking information not available.', 'info'); }};

        // --- Helper Functions ---
        function formatEventDate(dateString, formatOptions) {
            if (/^\d{4}-\d{2}-\d{2}$/.test(dateString)) {
                const dt = new Date(dateString);
                const adjustedDate = new Date(dt.valueOf() + dt.getTimezoneOffset() * 60 * 1000);
                return adjustedDate.toLocaleDateString('en-US', formatOptions);
            }
            return dateString;
        }
        const getCategoryName = category => ({ music: '🎵 Music', art: '🎨 Art', business: '💼 Business', food: '🍽️ Food', health: '💪 Health' }[category] || category.charAt(0).toUpperCase() + category.slice(1));
        const getWeekendDates = () => { const today = new Date(); const sat = new Date(today); sat.setDate(today.getDate() + (6 - today.getDay() + 7) % 7); return [sat.toISOString().split('T')[0]]; };
        const showLoadingState = () => { eventsContainer.innerHTML = Array(6).fill('<div class="skeleton-card"><div class="skeleton-image skeleton"></div></div>').join(''); };
        const hideLoadingState = () => { eventsContainer.innerHTML = ''; };
        const updateResultsCount = count => { resultsCount.textContent = `Showing ${count} result${count !== 1 ? 's' : ''}`; };
        function showNotification(message, type = 'info') { const el = document.createElement('div'); el.style.cssText = `position:fixed;top:20px;right:20px;padding:15px 20px;border-radius:8px;z-index:10000;font-weight:500;transition:transform .3s ease, opacity .3s ease;transform:translateX(120%);opacity:0;background:${type==='error'?'#dc3545':'#28a745'};color:white;`; el.textContent = message; document.body.appendChild(el); setTimeout(() => {el.style.transform = 'translateX(0)'; el.style.opacity = 1;}, 10); setTimeout(() => { el.style.transform = 'translateX(120%)'; el.style.opacity = 0; setTimeout(() => el.remove(), 300); }, 3000); }

        init();
    });
    </script>
</body>
</html>
