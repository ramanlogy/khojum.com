<!DOCTYPE html>
<html lang="en">
<head>
             <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7LWHSBNXT5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7LWHSBNXT5');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover trendy Events easily | Upcoming Events in Kathmandu | Khojum.com</title>
    <meta name="description" content="Nepal's top event discovery platform. Browse upcoming concerts, cultural festivals, art exhibitions, and entertainment in Kathmandu and beyond. Plan your perfect outing with Khojum.">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,500;0,700;1,500&display=swap" rel="stylesheet">
    <style>
        :root {
            --nepal-red: #dc143c;
            --nepal-blue: #003893;
            --accent-yellow: #f9d949;
            --dark-text: #333333;
            --light-text: #666666;
            --lightest-bg: #f9f7f5;
            --card-bg: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Mukta', sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background-color: var(--lightest-bg);
            padding: 0;
            margin: 0;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: var(--nepal-red);
            color: white;
            padding: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 25L70 45L50 65L30 45L50 25Z' fill='rgba(255,255,255,0.05)'/%3E%3C/svg%3E");
            background-size: 100px;
            opacity: 0.2;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .logo h1 {
            font-family: 'Mukta', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
        }
        
        .logo span {
            color: var(--accent-yellow);
        }
        
        .logo img {
            width: 50px;
            height: auto;
        }
        
        .title-section {
            text-align: center;
            padding-bottom: 30px;
        }
        
        .title-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            line-height: 1.2;
        }
        
        .title-section p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .date-display {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1.3rem;
            font-weight: 500;
            margin-top: 10px;
            display: block;
        }
        
        .filter-bar {
            background-color: white;
            padding: 15px 0;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 40px;
        }
        
        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .filter-button {
            background-color: transparent;
            border: 1px solid var(--nepal-red);
            color: var(--nepal-red);
            padding: 8px 16px;
            border-radius: 100px;
            font-family: 'Mukta', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-button:hover, .filter-button.active {
            background-color: var(--nepal-red);
            color: white;
        }
        
        .sort-dropdown {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        
        .sort-dropdown select {
            padding: 8px 16px;
            border: 1px solid var(--nepal-red);
            border-radius: 100px;
            background-color: transparent;
            color: var(--nepal-red);
            font-family: 'Mukta', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 25px;
            padding-bottom: 60px;
        }
        
        @media (min-width: 768px) {
            .events-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .events-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .event-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .event-image {
            height: 180px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .event-category {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--nepal-red);
            color: white;
            padding: 5px 12px;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .event-content {
            padding: 20px;
        }
        
        .event-title {
            font-family: 'Mukta', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark-text);
            line-height: 1.3;
        }
        
        .event-meta {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .event-date, .event-time, .event-location, .event-price {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--light-text);
        }
        
        .event-meta i {
            color: var(--nepal-red);
            font-size: 1rem;
        }
        
        .event-description {
            font-size: 0.95rem;
            color: var(--light-text);
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .event-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .event-price-tag {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--nepal-blue);
        }
        
        .event-price-tag.free {
            color: #2ecc71;
        }
        
        .event-button {
            background-color: var(--nepal-red);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 100px;
            font-family: 'Mukta', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .event-button:hover {
            background-color: #b01030;
        }
        
        footer {
            background-color: var(--nepal-red);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        
        .logo-small {
            font-family: 'Mukta', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .logo-small span {
            color: var(--accent-yellow);
        }
        
        .copyright {
            opacity: 0.8;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 40px 0;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0,0,0,0.1);
            border-left: 4px solid var(--nepal-red);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .title-section h2 {
                font-size: 2.2rem;
            }
            
            .filter-buttons {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 5px;
            }
        }
        
        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
        }
        
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Khojum",
        "url": "https://www.khojum.com",
        "logo": "https://www.khojum.com/assets/favicon.ico" 
    
        
    }
    </script>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1><span>खो</span>जुम</h1>
            </div>
            <div class="title-section">
                <h2>What are you doing this week?</h2>
                <p>Discover the best events happening in Nepal this week</p>
                <span class="date-display" id="date-range">Current Week: {{currentWeek}}</span>
            </div>
        </div>
    </header>
    
    <div class="filter-bar">
        <div class="container">
            <div class="filter-buttons">
                <button class="filter-button active" data-filter="all">All Events</button>
                <button class="filter-button" data-filter="Free">Free</button>
                <button class="filter-button" data-filter="music">Music</button>
                <button class="filter-button" data-filter="food">Holi</button>
                <button class="filter-button" data-filter="arts">Arts</button>
                <button class="filter-button" data-filter="business">Offers</button>
                <button class="filter-button" data-filter="sports">Sports</button>
            </div>
            <div class="sort-dropdown">
                <select id="sort-options">
                    <option value="time">Sort by Time</option>
                    <option value="popularity">Sort by Popularity</option>
                    <option value="price">Sort by Price</option>
                </select>
            </div>
        </div>
    </div>
    
    <main class="container">
        <div class="events-grid" id="events-container">
            <!-- Events will be dynamically populated here -->
        </div>
        
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>Loading more events...</p>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="logo-small">
                <span>खो</span>जुम
            </div>
            <p>Discover and explore the best events happening in Nepal</p>
            <p class="copyright">&copy; 2025 Khojum. All rights reserved.</p>
        </div>
    </footer>

    <!-- Modal Structure -->
    <div id="event-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-summary"></p>
            <h3>Attendees:</h3>
            <ul id="modal-attendees"></ul>
            <h3>Special Highlights:</h3>
            <ul id="modal-highlights"></ul>
        </div>
    </div>

    <script>
        // Set the date range for "this week"
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const dayOfWeek = now.getDay();
            const startDate = new Date(now);
            startDate.setDate(now.getDate() - dayOfWeek); // Sunday
            
            const endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + 6); // Saturday
            
            const options = { month: 'long', day: 'numeric' };
            const dateRange = `${startDate.toLocaleDateString('en-US', options)} - ${endDate.toLocaleDateString('en-US', options)}, ${endDate.getFullYear()}`;
            
            document.getElementById('date-range').textContent = dateRange;
            
            // Load events
            loadEvents();
            
            // Set default sorting by time when the page loads
            sortEvents('time');
            
            // Set up filter buttons
            const filterButtons = document.querySelectorAll('.filter-button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Filter events
                    const filter = this.getAttribute('data-filter');
                    filterEvents(filter);
                });
            });

            // Set up sort dropdown
            const sortDropdown = document.getElementById('sort-options');
            sortDropdown.addEventListener('change', function() {
                const sortCriteria = this.value;
                sortEvents(sortCriteria);
            });
        });
        
        // Sample business data
        const businesses = [
            {
                id: 1,
                title: "DJ Alok Live in Nepal",
                description: "DJ Alok takes the stage for a live performance, bringing hits like 'Hear Me Now' and 'Piece of Your Heart' to the crowd. This event marks his first performance in Nepal.",
                date: "March 7, 2025",
                time: "7:00 PM onwards",
                location: "LOD, Thamel",
                price: "Rs. 2,000 to Rs. 3,000",
                image: "assets/dj alok.png",
                category: "music",
                url: "https://www.instagram.com/p/DGJDIzISsW6/?utm_source=ig_web_copy_link"
            },
            {
                id: 2,
                title: "61st Session of The StoryYellers",
                description: "The StoryYellers is organising its 61st session featuring Srichchha Pradhan, Miss Nepal World 2023, Monish Niraula, Music Director, Nitesh Tandukar, Content Creator, and Basanta Pandey, CFO, fonepay as the speakers.",
                date: "March 5, 2025",
                time: "5:45 PM",
                location: "Moksh, Jhamsikhel",
                price: "Rs. 300 to Rs. 350",
                image: "assets/storyyellers.png",
                category: "talk",
                url: "https://www.instagram.com/p/DGaohi5vTCK/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA=="
            },
            {
                id: 3,
                title: "KP OLI CUP 2025 Finals",
                description: "Machhindra FC vs KP OLI FC at KP oli cup Final 2025 happening grand with live music and special guests.",
                date: "March 3, 2025",
                time: "3:00 PM",
                location: "Dasharath Stadium",
                price: "Free",
                image: "assets/kp oli cup.png",
                category: "sports",
                url: "https://www.facebook.com/kpolicup/",
                attendees: ["World Cup-winning Italian legend Gianluigi Buffon", "Kuma sagar and khowpa", "Purna Rai and daju bhai"],
                highlights: ["Live music performance", "Special guest appearances", "Food stalls available"]
            },
            {
                
                id: 4,
                title: "Sushant KC Live in Nepal",
                description: "Sushant KC is a prominent Nepali singer-songwriter and musician known for his heartfelt lyrics, soulful melodies, and emotional storytelling through music. Some of his hit songs are “Sarangi”, “Parkha Na”, “Kya Kardiya”, “Bardali”. His songs are widely celebrated for his soulful music and heartfelt lyrics that often explore themes of love, nostalgia, and life. His unique blend of contemporary pop with Nepali melodies has made him one of the most beloved artists in Nepal and among the Nepali diaspora.",
                date: "March 8, 2025",
                time: "3:00 PM Onwards",
                location: "Sallaghari Ground, Bhaktapur",
                price: "Rs. 1050 to Rs. 3000", // Table will be announced soon
                image: "assets/susants.png", // Add the appropriate image path
                category: "music",
                url: "https://events.khalti.com/events/ET25DZREURPZ" // Example URL
            },
            {
                id: 5,
                title: "Dream On Music Fest",
                description: " Albatross, Sabin Rai & The Pharaoh, Swar and The Rockheads take the stage for an electrifying live performance! An unforgettable experience of a lifetime filled with high-energy beats, soulful tunes, and pure musical magic which will be hosted by Malvika Subba.",
                date: "March 8, 2025",
                time: "1:00 PM Onwards",
                location: "Hyatt Ground, Boudha",
                price: "Rs. 899 to Rs. 5,000", // Price range
                image: "assets/dreamon.png", // Add the appropriate image path
                category: "music",
                url: "https://events.khalti.com/events/ET257HPZKA7K" // Example URL
            },
            {
                id: 6,
                title: "Holi Rewind 2025",
                description: "Tilt Your World - Holi Rewind 2025 Reliving Holi, Reliving Memories",
                date: "March 13, 2025",
                time: "10:00 AM Onwards",
                location: "International Club, Sanepa, Lalitpur",
                price: "Rs. 799", // Price
                image: "assets/holirewind.png", // Add the appropriate image path
                category: "holi", // Tag for filtering
                url: "https://events.khalti.com/events/ET25WAA2W3FQ" // Example URL
            }
        ];
        
        function loadEvents() {
            const container = document.getElementById('events-container');
            container.innerHTML = '';
            
            businesses.forEach(event => {
                const eventCard = createEventCard(event);
                container.appendChild(eventCard);
                startCountdown(event);
            });
        }
        
        function createEventCard(event) {
            const card = document.createElement('div');
            card.className = 'event-card';
            const categories = Array.isArray(event.category) ? event.category.join(',') : event.category;
            card.setAttribute('data-category', categories);
            
            const imageUrl = event.image || "assets/football-finals.png"; // Example image
            
            card.innerHTML = `
                <div class="event-image" style="background-image: url('${imageUrl}')">
                    <div class="event-category">${categories}</div>
                </div>
                <div class="event-content">
                    <h3 class="event-title">${event.title}</h3>
                    <div class="event-meta">
                        <div class="event-date">
                            <i class="far fa-calendar-alt"></i>
                            <span>${event.date}</span>
                        </div>
                        <div class="event-time">
                            <i class="far fa-clock"></i>
                            <span>${event.time}</span>
                        </div>
                    </div>
                    <div class="event-meta">
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${event.location}</span>
                        </div>
                    </div>
                    <p class="event-description">${event.description}</p>
                    <div class="event-footer">
                        <div class="event-price-tag${event.price === 'Free' ? ' free' : ''}">
                            ${event.price}
                        </div>
                        <a href="${event.url}" class="event-button" target="_blank">
                            View Post <i class="fas fa-external-link-alt" aria-hidden="true"></i>
                            <span class="sr-only">(opens in a new tab)</span>
                        </a>
                    </div>
                    <div class="event-countdown" id="countdown-${event.id}"></div>
                </div>
            `;

            // Add click event to open modal
            card.addEventListener('click', () => {
                openModal(event);
            });

            return card;
        }
        
        function startCountdown(event) {
            const countdownElement = document.getElementById(`countdown-${event.id}`);
            
            // Extract the first valid time from the event time string
            const timeMatch = event.time.match(/(\d{1,2}:\d{2}\s?(AM|PM)?)/i);
            const timeString = timeMatch ? timeMatch[0] : "12:00 AM"; // Default to midnight if no time is found
            const eventDate = new Date(`${event.date} ${timeString}`);

            function updateCountdown() {
                const now = new Date();
                const timeDifference = eventDate - now;

                if (isNaN(eventDate.getTime())) {
                    // If the event date is invalid (no specific time), show nothing
                    countdownElement.textContent = '';
                    return;
                }

                if (timeDifference <= 0) {
                    countdownElement.textContent = 'Expired';
                    countdownElement.style.color = 'red';
                    countdownElement.style.display = 'inline-block';
                    clearInterval(interval);
                    return;
                }

                const days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

                countdownElement.textContent = `Starts in ${days}d ${hours}h`;
                countdownElement.style.display = 'inline-block';
                countdownElement.style.padding = '10px 15px';
                countdownElement.style.border = '1px solid var(--nepal-red)';
                countdownElement.style.borderRadius = '5px';
                countdownElement.style.backgroundColor = 'white';
                countdownElement.style.color = 'var(--nepal-red)';
                countdownElement.style.fontWeight = 'bold';
                countdownElement.style.textAlign = 'center';
                countdownElement.style.cursor = 'pointer'; // Makes it look like a button
            }

            updateCountdown();
            const interval = setInterval(updateCountdown, 3600000); // Update every hour
        }
        
        function filterEvents(category) {
            const allEvents = document.querySelectorAll('.event-card');
            
            allEvents.forEach(event => {
                const eventCategories = event.getAttribute('data-category').split(' ');
                const priceElement = event.querySelector('.event-price-tag');
                const isFreePrice = priceElement && priceElement.textContent.trim().includes('Free');
                
                if (category === 'all') {
                    event.style.display = 'block';
                } else if (category === 'Free') {
                    // Show events with "Free" price or "Free" category
                    if (isFreePrice || eventCategories.includes('Free')) {
                        event.style.display = 'block';
                    } else {
                        event.style.display = 'none';
                    }
                } else {
                    // Filter by category
                    if (eventCategories.includes(category)) {
                        event.style.display = 'block';
                    } else {
                        event.style.display = 'none';
                    }
                }
            });
        }

        function sortEvents(criteria) {
            const container = document.getElementById('events-container');
            const eventsArray = Array.from(container.children);

            eventsArray.sort((a, b) => {
                const eventA = businesses.find(event => event.title === a.querySelector('.event-title').textContent);
                const eventB = businesses.find(event => event.title === b.querySelector('.event-title').textContent);

                // Create Date objects for comparison
                const timeA = new Date(eventA.date + ' ' + eventA.time);
                const timeB = new Date(eventB.date + ' ' + eventB.time);

                switch (criteria) {
                    case 'time':
                        return timeA - timeB; // Sort by time ascending
                    case 'popularity':
                        // Assuming you have a popularity metric, otherwise this is a placeholder
                        return eventB.popularity - eventA.popularity;
                    case 'price':
                        const priceA = parseFloat(eventA.price.replace(/[^0-9.-]+/g, "")) || 0;
                        const priceB = parseFloat(eventB.price.replace(/[^0-9.-]+/g, "")) || 0;
                        return priceA - priceB;
                    default:
                        return 0;
                }
            });

            // Clear and re-append sorted events
            container.innerHTML = '';
            eventsArray.forEach(event => container.appendChild(event));
        }

        function openModal(event) {
            const modal = document.getElementById('event-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalSummary = document.getElementById('modal-summary');
            const modalAttendees = document.getElementById('modal-attendees');
            const modalHighlights = document.getElementById('modal-highlights');

            // Populate modal with event details
            modalTitle.textContent = event.title;
            modalSummary.textContent = event.description;

            // Clear previous attendees and highlights
            modalAttendees.innerHTML = '';
            modalHighlights.innerHTML = '';

            // Add attendees and highlights if available
            if (event.attendees) {
                event.attendees.forEach(attendee => {
                    const li = document.createElement('li');
                    li.textContent = attendee;
                    modalAttendees.appendChild(li);
                });
            }

            if (event.highlights) {
                event.highlights.forEach(highlight => {
                    const li = document.createElement('li');
                    li.textContent = highlight;
                    modalHighlights.appendChild(li);
                });
            }

            // Show the modal
            modal.style.display = 'block';

            // Close modal when the close button is clicked
            const closeButton = document.querySelector('.close-button');
            closeButton.onclick = function() {
                modal.style.display = 'none';
            }

            // Close modal when clicking outside of the modal content
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            }
        }
    </script>
</body>
</html>
